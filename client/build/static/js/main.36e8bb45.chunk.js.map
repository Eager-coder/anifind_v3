{"version":3,"sources":["utlis/client.ts","context/AppContext.tsx","context/UserContext.tsx","utlis/useWindowSize.tsx","components/Navbar.tsx","api/anime/homeListAPI.ts","components/styles/Styles.tsx","components/Home/Carousel.tsx","utlis/getUrlObj.ts","components/Search/SearchBox.tsx","components/Search/SelectList.ts","components/Search/OptionList.tsx","components/Search/SearchSection.tsx","pages/HomePage.tsx","components/styles/ButtonStyles.tsx","pages/LoginPage.tsx","components/LoadingSpinner.tsx","components/UserLink.tsx","components/Anime/Comment.tsx","components/Anime/Comments.tsx","components/Anime/RightSide.tsx","components/Anime/LeftSide.tsx","components/Anime/Characters.tsx","components/Loading.tsx","api/anime/animeAPI.ts","pages/AnimePage.tsx","pages/RegisterPage.tsx","components/Account/Favorites.tsx","components/Account/Sidebar.tsx","components/Account/Profile.tsx","components/EmptyState.tsx","components/Account/Comments.tsx","components/Account/Discussions.tsx","components/Account/Settings/Avatar.tsx","components/Account/Settings/Credentials.tsx","components/Account/Settings/Settings.tsx","components/Account/Social.tsx","pages/AccountPage.tsx","utlis/constants.ts","components/Footer.tsx","components/Modal/ModalMessage.tsx","components/Modal/Modals.tsx","components/Modal/RootModal.tsx","api/anime/characterAPI.ts","components/Character/Comment.tsx","components/Character/Comments.tsx","pages/CharacterPage.tsx","pages/DiscussionsListPage.tsx","components/Like.tsx","components/Discussions/RenderPosts.tsx","components/Discussions/Posts.tsx","components/Discussions/Thread.tsx","pages/DiscussionPage.tsx","pages/NotFound.tsx","pages/MemberPage.tsx","api/anime/searchAPI.ts","components/Search/EmptyState.tsx","components/Search/Card.tsx","pages/SearchPage.tsx","pages/EmailVerificationPage.tsx","pages/ResendVerificationPage.tsx","pages/RequestResetPasswordPage.tsx","pages/ResetPasswordPage.tsx","App.tsx","index.tsx"],"names":["base_url","fetchWrapper","url","method","body","access_token","fetch","JSON","stringify","credentials","headers","Authorization","Accept","res","json","ok","status","data","message","console","log","customFetch","Promise","resolve","_reject","localStorage","getItem","response1","authResponse","setItem","response2","initialState","modal","isOpen","type","props","modalMessage","text","isSuccess","showModal","hideModal","showModalMessage","hideModalMessage","client","AppContext","createContext","AppProvider","children","useState","setModal","setModalMessage","shouldShowMessage","value","Provider","setAccessToken","UserContext","user","isLoading","isLoggedIn","loadingUser","setUser","changeUserData","UserProvider","useContext","setUserData","prev","useWindowSize","size","setSize","useLayoutEffect","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","Navbar","theme","switchTheme","handleSwitchTheme","isMenuOpen","setIsMenuOpen","width","Nav","className","to","onClick","src","alt","username","MobileMenuStyle","id","memo","styled","nav","div","commentBg","header","homeListQuery","options","query","H1","h1","customStyle","H2","h2","Carousel","list","containerRef","useRef","scrollContainer","direction","current","scrollLeft","clientWidth","Section","ref","map","item","index","coverImage","extraLarge","title","english","slice","romaji","highlightColor","baseColor","height","section","scrollbar","getUrlObj","str","entries","URLSearchParams","Object","fromEntries","SearchBox","location","history","search","setQuery","useEffect","SearchBoxEl","onChange","e","target","onKeyDown","key","trim","newParams","toString","push","boxShadow","selectLists","name","reverse","List","OptionList","setIsOpen","listEl","ul","closeList","option","params","filterByOption","Container","AllFilters","SearchSection","useLocation","useHistory","FiltersBox","SelectedFilters","filter","setFilter","obj","arr","removeFilter","Home","trending","setTrending","top","setTop","isMounted","getAnimes","media","PrimaryButtonStyle","button","color","PrimaryBtn","disabled","spinnerSize","SecondaryBtnStyle","SecondaryBtn","Login","email","password","form","setForm","isNotVerified","setIsNotVerified","handleChange","handleSubmit","preventDefault","then","replace","LoginEl","onSubmit","placeholder","required","autoComplete","LoadingEl","padding","LoadingSpinner","UserLink","avatar_url","date","isEdited","formatDistanceStrict","Date","addSuffix","Comment","comment","getComments","newComment","setNewComment","isEditOpen","setIsEditOpen","pending","setPending","textareaRef","scrollHeight","style","selectionStart","length","selectionEnd","focus","handleEditSubmit","comment_id","CommentBox","created_at","is_edited","user_id","defaultValue","Comments","anime_id","comments","setComments","setIsLoading","isSending","setIsSending","setText","CommentForm","RightSide","favAnime","handleAddToFavorites","handleRemoveFromFavorites","btnName","isFavorite","dangerouslySetInnerHTML","__html","description","genres","genre","trailer","allowFullScreen","LeftSide","season","seasonYear","format","episodes","duration","studios","edges","node","Characters","hasOwnProperty","characters","full","image","large","Loading","animeQuery","variables","Media","AnimePage","match","anime","setAnime","setFavAnime","getAnimeData","cover_image","Register","password2","hasEmailSent","setHasEmailSent","RegisterEl","Favorites","favorites","setFavorites","animeData","characterData","character","character_id","Card","link","CardContainer","Sidebar","category","SideNav","aside","Profile","about","newAbout","setNewAbout","isAboutPending","setIsAboutPending","handleLogout","removeItem","handleUpdateAbout","new_about","ProfileEl","EmptyEl","EmptyState","animeComments","setAnimeComments","characterComments","setCharacterComments","CommentsContainer","linkTitle","formatRelative","DiscussionsStyle","Discussions","threads","setThreads","getData","thread","thread_id","topic","Avatar","inputRef","fileInput","setFileInput","previewImg","setPreviewImg","b64Img","setB64Img","setMessage","avatar","InputSquare","click","accept","files","file","reader","FileReader","readAsDataURL","onloadend","result","onerror","Credentials","edit","setEdit","isPending","newUsername","setNewUsername","newEmail","handleSubmitUsername","new_username","Input","input","Settings","SettingsContainer","Social","relation","setRelation","getRelation","SocialEl","followings","following","followers","follower","User","useParams","lightTheme","darkTheme","FooterEl","footer","Footer","href","ModalMessage","createRef","close","setTimeout","clearTimeout","createPortal","CSSTransition","nodeRef","in","timeout","classNames","unmountOnExit","document","querySelector","Textarea","textarea","MODAL_COMPONENTS","CHANGE_PASSWORD","oldPassword","setOldPassword","newPassword","setNewPassword","newPassword2","setNewPassword2","OPEN_THREAD","setTopic","setBody","DEFAULT","DELETE_THREAD","getThread","handleDelete","DELETE_POST","post","getPosts","handleDeletePost","post_id","DELETE_COMMENT","RootModal","CurrentModal","ReactDom","ModalContainer","characterQuery","Character","marked","setOptions","breaks","CharacterPage","setCharacter","favCharacter","setFavCharacter","isSmallScreen","setIsSmallScreen","is_favorite","CharacterPageEl","RelationCardList","RelationCard","DiscussionListPage","PageEl","Header","ThreadCard","LikeEl","Like","count","isLiked","iconCode","Number","RenderPosts","depth","isCommentFieldOpen","setIsCommentFieldOpen","newPost","setNewPost","editedPost","setEditedPost","isLikePending","setIsLikePending","handlePostSubmit","parent_id","handleLike","handleUnlike","PostEl","is_deleted","like_count","is_liked","Posts","posts","setPosts","submitPost","Thread","setThread","isEditLoading","setIsEditLoading","editedThread","setEditedThread","handleEdit","ThreadCardEl","DiscussionPage","NotFound","MemberPage","member","setMember","isFollowing","setFollowing","getMember","is_following","handleFollow","handleUnfollow","MemberPageStyle","MobileStyle","profile","isMobile","favorite_anime","favorite_characters","Aside","MainSection","UserLinkStyle","searchQuery","sort","Page","setLoaded","bgColor","CardBox","onLoad","SkeletonCard","array","Array","SearchPage","setResult","hasNoResult","setHasNoResult","page","setPage","loading","setLoading","hasNextPage","sethasNextPage","urlParams","searchAPI","pageInfo","prevResult","year","SearchResults","num","SearchPageStyle","dataLength","next","pullDownToRefreshThreshold","hasMore","loader","PageStyled","EmailVerificationPage","hasVerified","setHasVerified","verifyEmail","token","ResendVerificationPage","hasSent","setStatus","setEmail","RequestPasswordResetPage","ResetPasswordPage","setPassword","setPassword2","new_password","App","setTheme","userTheme","GlobalStyle","themeType","exact","path","component","DiscussionsListPage","createGlobalStyle","render","StrictMode","getElementById"],"mappings":"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EyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,IAAMhE,GAAI,IAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KAAM,KAAMhE,GAAI,KAAMzD,KAAM,QAC9B,CAAEyH,KA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","file":"static/js/main.36e8bb45.chunk.js","sourcesContent":["export const base_url = process.env.NODE_ENV === \"production\" ? \"/api\" : \"http://localhost:80/api\"\r\n\r\nexport type ClientType = {\r\n\tok: boolean\r\n\tmessage: string\r\n\tdata?: object | Array<any> | any\r\n\tstatus?: number\r\n\terror?: unknown\r\n}\r\n\r\nexport type Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\"\r\n\r\nconst customFetch = (url: string, method: Method = \"GET\", body?: object): Promise<ClientType> => {\r\n\treturn new Promise(async (resolve, _reject) => {\r\n\t\tconst access_token = localStorage.getItem(\"access_token\") || \"\"\r\n\t\ttry {\r\n\t\t\tconst response1 = await fetchWrapper(url, method, body, access_token)\r\n\t\t\tif (response1.status !== 401) {\r\n\t\t\t\treturn resolve(response1)\r\n\t\t\t}\r\n\t\t\tif (!access_token) {\r\n\t\t\t\treturn resolve({ message: \"Please log in to continue\", ok: false })\r\n\t\t\t}\r\n\t\t\tconst authResponse: any = await fetchWrapper(\"/auth/refresh-token\", \"POST\")\r\n\t\t\tif (authResponse.ok) {\r\n\t\t\t\tlocalStorage.setItem(\"access_token\", authResponse.data.access_token)\r\n\t\t\t\tconst response2 = await fetchWrapper(url, method, body, authResponse.data.access_token)\r\n\t\t\t\tresolve(response2)\r\n\t\t\t} else {\r\n\t\t\t\tresolve({ message: \"Please log in to continue\", ok: false })\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tresolve({ message: \"Something went wrong\", ok: false })\r\n\t\t}\r\n\t})\r\n}\r\nexport const fetchWrapper = async (\r\n\turl: string,\r\n\tmethod: string = \"GET\",\r\n\tbody?: object,\r\n\taccess_token?: string,\r\n): Promise<ClientType> => {\r\n\ttry {\r\n\t\tconst res = await fetch(base_url + url, {\r\n\t\t\tmethod,\r\n\t\t\tbody: body && JSON.stringify(body),\r\n\t\t\tcredentials: \"include\",\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: \"Bearer \" + access_token,\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\tconst json = await res.json()\r\n\t\treturn {\r\n\t\t\tok: res.ok,\r\n\t\t\tstatus: res.status,\r\n\t\t\tdata: json.data,\r\n\t\t\tmessage: json.message,\r\n\t\t}\r\n\t} catch (error: any) {\r\n\t\tconsole.log(error)\r\n\t\t// if (typeof error == \"object\") {\r\n\t\treturn { ok: false, ...error }\r\n\t\t// }\r\n\t}\r\n}\r\nexport default customFetch\r\n","import { createContext, FC, useState } from \"react\"\r\nimport customFetch, { Method, ClientType } from \"../utlis/client\"\r\n\r\ntype ModalType =\r\n\t| \"CHANGE_PASSWORD\"\r\n\t| \"OPEN_THREAD\"\r\n\t| \"DEFAULT\"\r\n\t| \"DELETE_THREAD\"\r\n\t| \"DELETE_POST\"\r\n\t| \"DELETE_COMMENT\"\r\ntype showModal = (type: ModalType, props: any) => void\r\n\r\ntype hideModal = () => void\r\n\r\ntype showModalMessage = (text: string, isSuccess: boolean) => void\r\n\r\ntype hideModalMessage = () => void\r\n\r\ntype Client = (\r\n\turl: string,\r\n\toptions?: {\r\n\t\tmethod?: Method\r\n\t\tbody?: object\r\n\t\tshouldShowMessage?: \"default\" | \"error\" | \"none\"\r\n\t}\r\n) => Promise<ClientType>\r\n\r\ntype modal = {\r\n\tisOpen: boolean\r\n\ttype: ModalType\r\n\tprops?: any\r\n}\r\ntype modalMessage = {\r\n\ttext: string\r\n\tisSuccess: boolean\r\n}\r\ntype ContextTypes = {\r\n\tmodal: modal\r\n\tmodalMessage: modalMessage\r\n\tshowModal: showModal\r\n\thideModal: hideModal\r\n\tshowModalMessage: showModalMessage\r\n\thideModalMessage: hideModalMessage\r\n\tclient: Client\r\n}\r\nconst initialState: ContextTypes = {\r\n\tmodal: { isOpen: false, type: \"DEFAULT\", props: null },\r\n\tmodalMessage: { text: \"\", isSuccess: false },\r\n\tshowModal: () => {},\r\n\thideModal: () => {},\r\n\tshowModalMessage: () => {},\r\n\thideModalMessage: () => {},\r\n\tclient: () => new Promise(() => ({ ok: false, status: 200, data: null, message: \"\" })),\r\n}\r\nexport const AppContext = createContext<ContextTypes>(initialState)\r\n\r\nexport const AppProvider: FC = ({ children }) => {\r\n\tconst [modal, setModal] = useState<modal>(initialState.modal)\r\n\tconst [modalMessage, setModalMessage] = useState<modalMessage>(initialState.modalMessage)\r\n\r\n\tconst showModal: showModal = (type, props) => {\r\n\t\tsetModal({ isOpen: true, type, props: props })\r\n\t}\r\n\tconst hideModal: hideModal = () => {\r\n\t\tsetModal({ isOpen: false, type: \"DEFAULT\", props: {} })\r\n\t}\r\n\tconst showModalMessage: showModalMessage = (text, isSuccess) => {\r\n\t\tsetModalMessage({ text, isSuccess })\r\n\t}\r\n\tconst hideModalMessage: hideModalMessage = () => {\r\n\t\tsetModalMessage({ text: \"\", isSuccess: false })\r\n\t}\r\n\r\n\tconst client: Client = async (url, { method = \"GET\", body, shouldShowMessage = false } = {}) => {\r\n\t\tconst res = await customFetch(url, method, body)\r\n\t\tif (shouldShowMessage === \"default\") {\r\n\t\t\tshowModalMessage(res.message, res.ok)\r\n\t\t}\r\n\t\tif (shouldShowMessage === \"error\" && !res.ok) {\r\n\t\t\tshowModalMessage(res.message, res.ok)\r\n\t\t}\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst value = {\r\n\t\tmodal,\r\n\t\tmodalMessage,\r\n\t\tshowModal,\r\n\t\thideModal,\r\n\t\tshowModalMessage,\r\n\t\thideModalMessage,\r\n\t\tclient,\r\n\t}\r\n\r\n\treturn <AppContext.Provider value={value}>{children}</AppContext.Provider>\r\n}\r\n","import { createContext, FC, useContext, useState } from \"react\"\r\nimport { AppContext } from \"./AppContext\"\r\ntype UserType = {\r\n\tisLoggedIn: boolean\r\n\tisLoading: boolean\r\n\tid?: string\r\n\tusername?: string\r\n\temail?: string\r\n\tcreated_at?: number\r\n\tabout?: string\r\n\tavatar_url?: string\r\n}\r\n\r\ntype UserProps = {\r\n\tuser: UserType\r\n\tloadingUser: (isLoading: boolean) => void\r\n\tsetUser: () => Promise<boolean>\r\n\tsetAccessToken: (access_token: string) => void\r\n\tchangeUserData: ChangeUserData\r\n}\r\n\r\ntype ChangeUserData = (type: \"username\" | \"avatar_url\" | \"email\" | \"about\", value: string) => void\r\nconst setAccessToken = (access_token: string) => {\r\n\tlocalStorage.setItem(\"access_token\", access_token)\r\n}\r\n\r\nexport const UserContext = createContext<UserProps>({\r\n\tuser: { isLoading: true, isLoggedIn: false },\r\n\tloadingUser: () => {},\r\n\tsetUser: async () => false,\r\n\tsetAccessToken,\r\n\tchangeUserData: () => {},\r\n})\r\n\r\nexport const UserProvider: FC = ({ children }) => {\r\n\tconst { client } = useContext(AppContext)\r\n\tconst [user, setUserData] = useState<UserType>({ isLoading: true, isLoggedIn: false })\r\n\tconst loadingUser = (isLoading: boolean) => {\r\n\t\tsetUserData(prev => ({ ...prev, isLoading }))\r\n\t}\r\n\tconst setUser = async (): Promise<boolean> => {\r\n\t\tloadingUser(true)\r\n\t\tconst { data, ok } = await client(\"/profile\")\r\n\t\tif (ok) {\r\n\t\t\tsetUserData({ ...data, isLoading: false, isLoggedIn: true })\r\n\t\t} else {\r\n\t\t\tloadingUser(false)\r\n\t\t}\r\n\r\n\t\treturn ok\r\n\t}\r\n\tconst changeUserData: ChangeUserData = (type, value) => {\r\n\t\tsetUserData(prev => ({ ...prev, [type]: value }))\r\n\t}\r\n\treturn (\r\n\t\t<UserContext.Provider value={{ user, loadingUser, setUser, setAccessToken, changeUserData }}>\r\n\t\t\t{children}\r\n\t\t</UserContext.Provider>\r\n\t)\r\n}\r\n","import { useLayoutEffect, useState } from \"react\"\r\n\r\nconst useWindowSize = (): number[] => {\r\n\tconst [size, setSize] = useState([0, 0])\r\n\tuseLayoutEffect(() => {\r\n\t\tfunction updateSize() {\r\n\t\t\tsetSize([window.innerWidth, window.innerHeight])\r\n\t\t}\r\n\t\twindow.addEventListener(\"resize\", updateSize)\r\n\t\tupdateSize()\r\n\t\treturn () => window.removeEventListener(\"resize\", updateSize)\r\n\t}, [])\r\n\treturn size\r\n}\r\nexport default useWindowSize\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\n\r\ninterface Props {\r\n\ttheme: \"light\" | \"dark\"\r\n\tswitchTheme: (theme: Props[\"theme\"]) => void\r\n}\r\nconst Navbar: FC<Props> = ({ theme, switchTheme }) => {\r\n\tconst { user } = useContext(UserContext)\r\n\r\n\tconst handleSwitchTheme = () => {\r\n\t\tswitchTheme(theme === \"light\" ? \"dark\" : \"light\")\r\n\t}\r\n\tconst [isMenuOpen, setIsMenuOpen] = useState(false)\r\n\tconst [width] = useWindowSize()\r\n\treturn (\r\n\t\t<Nav>\r\n\t\t\t<div className=\"nav-container\">\r\n\t\t\t\t<NavLink to=\"/\">\r\n\t\t\t\t\t<span className=\"logo\">Ani</span>\r\n\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t{width > 640 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className=\"nav-links\">\r\n\t\t\t\t\t\t\t<NavLink to=\"/\">Home</NavLink>\r\n\t\t\t\t\t\t\t<NavLink to=\"/search?year=2021\">Browse</NavLink>\r\n\t\t\t\t\t\t\t<NavLink to=\"/discussions\">Discussions</NavLink>\r\n\t\t\t\t\t\t\t{user.isLoggedIn && <NavLink to=\"/me/profile\">Profile</NavLink>}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"user-links\">\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tonClick={handleSwitchTheme}\r\n\t\t\t\t\t\t\t\tsrc={`/assets/icons/${theme === \"dark\" ? \"moon\" : \"sun\"}.svg`}\r\n\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{user.isLoggedIn ? (\r\n\t\t\t\t\t\t\t\t<NavLink to={`/me/profile`}>{user.username}</NavLink>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/login\">Login</NavLink> <span className=\"vertical-bar\">|</span>{\" \"}\r\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/register\">Register</NavLink>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tonClick={() => setIsMenuOpen(true)}\r\n\t\t\t\t\t\tclassName=\"menu\"\r\n\t\t\t\t\t\tsrc=\"/assets/icons/Menu.svg\"\r\n\t\t\t\t\t\talt=\"Menu\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{isMenuOpen && width < 640 && (\r\n\t\t\t\t<MobileMenuStyle>\r\n\t\t\t\t\t<div className=\"links\">\r\n\t\t\t\t\t\t<NavLink to=\"/\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Home.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Home</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<NavLink to=\"/discussions\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Message.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Discussion</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tonClick={() => setIsMenuOpen(false)}\r\n\t\t\t\t\t\t\tid=\"close\"\r\n\t\t\t\t\t\t\tsrc={`/assets/icons/nav-mobile-${theme}/Close.svg`}\r\n\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<NavLink to=\"/search?year=2021\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Search.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Search</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t{user.isLoggedIn ? (\r\n\t\t\t\t\t\t\t<NavLink to=\"/me/profile\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/User.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t<span>Profile</span>\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<NavLink to=\"/login\" onClick={() => setIsMenuOpen(false)}>\r\n\t\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/User.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t<span>Login</span>\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div onClick={handleSwitchTheme} className=\"theme\">\r\n\t\t\t\t\t\t\t<img src={`/assets/icons/nav-mobile-${theme}/Moon.svg`} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Theme</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</MobileMenuStyle>\r\n\t\t\t)}\r\n\t\t</Nav>\r\n\t)\r\n}\r\nexport default memo(Navbar)\r\n\r\nconst Nav = styled.nav`\r\n\twidth: 100%;\r\n\t/* background-color: #4c5264; //current color */\r\n\tbackground-color: #32343b;\r\n\t.nav-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 50px;\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1200px;\r\n\t\theight: 4rem;\r\n\t\tmargin: auto;\r\n\t\t@media screen and (max-width: 768px) {\r\n\t\t\theight: 3.5rem;\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t\tspan.logo {\r\n\t\t\tcursor: pointer;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tfont-size: 2.5rem;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: white;\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: \"Find\";\r\n\t\t\t\tcolor: #70c7a7;\r\n\t\t\t}\r\n\t\t\t@media screen and (max-width: 768px) {\r\n\t\t\t\tfont-size: 2rem;\r\n\t\t\t}\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 1.8rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.nav-links {\r\n\t\t\tdisplay: flex;\r\n\t\t\t> a {\r\n\t\t\t\tcolor: whitesmoke;\r\n\t\t\t\tmargin-right: 20px;\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t\tfont-weight: 550;\r\n\t\t\t\t:active {\r\n\t\t\t\t\tcolor: white;\r\n\t\t\t\t}\r\n\t\t\t\t@media (max-width: 768px) {\r\n\t\t\t\t\tmargin-right: 15px;\r\n\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.user-links {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tcolor: white;\r\n\t\ta {\r\n\t\t\tfont-size: 1.2rem;\r\n\t\t\tcolor: white;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tborder-bottom: 2px #70c7a7 solid;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\timg {\r\n\t\t\tcursor: pointer;\r\n\t\t\theight: 25px;\r\n\t\t\tfilter: invert(1);\r\n\t\t\tmargin-right: 20px;\r\n\t\t}\r\n\t\tspan.vertical-bar {\r\n\t\t\tmargin: 0 5px;\r\n\t\t}\r\n\t}\r\n\timg.menu {\r\n\t\twidth: 28px;\r\n\t\theight: 28px;\r\n\t\tcursor: pointer;\r\n\t}\r\n`\r\nconst MobileMenuStyle = styled.div`\r\n\twidth: 210px;\r\n\theight: 140px;\r\n\tposition: fixed;\r\n\tz-index: 5;\r\n\ttop: 20px;\r\n\tright: 20px;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\tborder-radius: 10px;\r\n\tbox-shadow: 0px 0px 15px 4px rgba(0, 0, 0, 0.15);\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tpadding: 10px;\r\n\t.links {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 1fr 1fr;\r\n\t\tgrid-template-rows: 1fr 1fr;\r\n\t\tjustify-items: center;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\ta,\r\n\t\t.theme {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\timg {\r\n\t\t\t\twidth: 32px;\r\n\t\t\t\theight: 32px;\r\n\t\t\t}\r\n\t\t\tspan {\r\n\t\t\t\tfont-size: 0.7rem;\r\n\t\t\t\tcolor: ${({ theme }) => theme.header};\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\t\t}\r\n\t\t> #close {\r\n\t\t\tcursor: pointer;\r\n\t\t\twidth: 32px;\r\n\t\t\theight: 32px;\r\n\t\t\tposition: relative;\r\n\t\t\ttop: -4px;\r\n\t\t}\r\n\t}\r\n`\r\n","const homeListQuery = async () => {\r\n\tconst query = `\r\n  query popular {\r\n    trending: Page (page: 1) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      media(sort: TRENDING_DESC type: ANIME) {\r\n        id\r\n        title {\r\n          romaji\r\n          english\r\n          native\r\n          userPreferred\r\n        }\r\n        coverImage {\r\n          extraLarge\r\n          color\r\n        }\r\n      }\r\n    }\r\n    top: Page (page: 1) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      media(sort: POPULARITY_DESC type: ANIME) {\r\n        id\r\n        title {\r\n          romaji\r\n          english\r\n          native\r\n          userPreferred\r\n        }\r\n        coverImage {\r\n          extraLarge\r\n          color\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n    `\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ query }),\r\n\t\t}\r\n\ttry {\r\n\t\tconst res = await fetch(url, options)\r\n\t\tconst { data } = await res.json()\r\n\t\treturn data\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n}\r\n\r\nexport default homeListQuery\r\n","import styled from \"styled-components\"\r\n\r\nexport const H1 = styled.h1<{ customStyle?: string }>`\r\n\twidth: 100%;\r\n\tfont-size: 2.8rem;\r\n\t@media (max-width: 1024px) {\r\n\t\tfont-size: 2.5rem;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tfont-size: 2rem;\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\tfont-size: 1.7rem;\r\n\t}\r\n\t${({ customStyle }) => customStyle}\r\n`\r\n\r\nexport const H2 = styled.h2`\r\n\tfont-size: 2rem;\r\n\t@media (max-width: 768px) {\r\n\t\tfont-size: 1.7rem;\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\tfont-size: 1.5rem;\r\n\t}\r\n`\r\n","import { FC, useRef } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\"\r\nimport { H2 } from \"../styles/Styles\"\r\ninterface Props {\r\n\theader: string\r\n\tlist: Array<{\r\n\t\tid: number\r\n\t\tcoverImage: {\r\n\t\t\textraLarge: string\r\n\t\t}\r\n\t\ttitle: {\r\n\t\t\tenglish: string\r\n\t\t\tromaji: string\r\n\t\t}\r\n\t}>\r\n}\r\nconst Carousel: FC<Props> = ({ header, list }) => {\r\n\tconst containerRef = useRef<HTMLDivElement>(null)\r\n\tconst skeletonArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\n\tconst scrollContainer = (direction: \"next\" | \"prev\") => {\r\n\t\tif (direction === \"next\") {\r\n\t\t\tcontainerRef.current!.scrollLeft += containerRef.current!.clientWidth\r\n\t\t}\r\n\t\tif (direction === \"prev\") {\r\n\t\t\tcontainerRef.current!.scrollLeft -= containerRef.current!.clientWidth\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<H2>{header}</H2>\r\n\t\t\t<img onClick={() => scrollContainer(\"next\")} className=\"next-btn\" src=\"/assets/icons/right-chevron.svg\" alt=\"\" />\r\n\t\t\t<img onClick={() => scrollContainer(\"prev\")} className=\"prev-btn\" src=\"/assets/icons/left-chevron.svg\" alt=\"\" />\r\n\t\t\t<div className=\"carousel\">\r\n\t\t\t\t<div ref={containerRef} className=\"card-container\">\r\n\t\t\t\t\t{list\r\n\t\t\t\t\t\t? list.map((item, index) => (\r\n\t\t\t\t\t\t\t\t<Link key={index} to={`/anime/${item.id}`}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"card-img\" src={item.coverImage.extraLarge} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t<p>{item.title.english?.slice(0, 50) || item.title.romaji?.slice(0, 50)}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t: skeletonArray.map(item => (\r\n\t\t\t\t\t\t\t\t<div key={item} className=\"card\">\r\n\t\t\t\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" baseColor=\"#cad4de\">\r\n\t\t\t\t\t\t\t\t\t\t<Skeleton className=\"card-img\" key={item} />\r\n\t\t\t\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" baseColor=\"#cad4de\">\r\n\t\t\t\t\t\t\t\t\t\t<Skeleton width=\"120px\" height=\"10px\" key={item} />\r\n\t\t\t\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  ))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default Carousel\r\nconst Section = styled.section`\r\n\twidth: 100%;\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\tmargin-bottom: 50px;\r\n\tposition: relative;\r\n\th2 {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t.next-btn,\r\n\t.prev-btn {\r\n\t\tcursor: pointer;\r\n\t\twidth: 40px;\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #4c5264;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t\topacity: 0.4;\r\n\t\ttransition: 0.2s;\r\n\t\t&:hover {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\t.next-btn {\r\n\t\tright: 0;\r\n\t}\r\n\t.prev-btn {\r\n\t\tleft: 0;\r\n\t}\r\n\t.card-container {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tscroll-behavior: smooth;\r\n\t\toverflow-x: hidden;\r\n\t\t.card {\r\n\t\t\tmargin-right: 15px;\r\n\t\t\twidth: 150px;\r\n\t\t\t.card-img {\r\n\t\t\t\tborder-radius: 7px;\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\theight: 210px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\r\n\t\t.next-btn,\r\n\t\t.prev-btn {\r\n\t\t\twidth: 40px;\r\n\t\t\theight: 30px;\r\n\t\t\tpadding: 6px;\r\n\t\t\tbackground-color: #4c5264;\r\n\t\t\tborder-radius: 60px;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 5%;\r\n\t\t}\r\n\t\t.next-btn {\r\n\t\t\tright: 20px;\r\n\t\t}\r\n\t\t.prev-btn {\r\n\t\t\tleft: unset;\r\n\t\t\tright: 70px;\r\n\t\t}\r\n\t\t.carousel {\r\n\t\t\toverflow-x: hidden;\r\n\t\t}\r\n\t\t.card-container {\r\n\t\t\toverflow-x: scroll;\r\n\t\t\t::-webkit-scrollbar-track {\r\n\t\t\t\tbackground-color: ${({ theme }) => theme.scrollbar};\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t}\r\n\t\t\t::-webkit-scrollbar {\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\theight: 7px;\r\n\t\t\t\tbackground-color: #f5f5f5;\r\n\t\t\t}\r\n\t\t\t::-webkit-scrollbar-thumb {\r\n\t\t\t\tbackground-color: #58a086;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 480px) {\r\n\t\tmargin-bottom: 40px;\r\n\r\n\t\t.next-btn,\r\n\t\t.prev-btn {\r\n\t\t\twidth: 35px;\r\n\t\t\theight: 27px;\r\n\t\t\ttop: 4%;\r\n\t\t}\r\n\t\t.next-btn {\r\n\t\t\tright: 20px;\r\n\t\t}\r\n\t\t.prev-btn {\r\n\t\t\tright: 60px;\r\n\t\t}\r\n\t\t.card-container {\r\n\t\t\t.card {\r\n\t\t\t\twidth: 120px;\r\n\t\t\t\t.card-img {\r\n\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\theight: 170px;\r\n\t\t\t\t}\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.85rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","export default function getUrlObj(str: string) {\r\n\tconst urlParams = new URLSearchParams(str)\r\n\tconst entries = urlParams.entries()\r\n\treturn Object.fromEntries(entries)\r\n}\r\n","import { useState, useEffect, FC, KeyboardEvent } from \"react\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport getUrlObj from \"../../utlis/getUrlObj\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tlocation: RouteComponentProps[\"location\"]\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\nconst SearchBox: FC<Props> = ({ location, history }) => {\r\n\tconst [query, setQuery] = useState(getUrlObj(location.search).query || \"\")\r\n\r\n\tuseEffect(() => {\r\n\t\tconst searchObj = getUrlObj(location.search)\r\n\t\tif (!searchObj.query) {\r\n\t\t\tsetQuery(\"\")\r\n\t\t}\r\n\t}, [location])\r\n\r\n\tconst handleSubmit = (e: KeyboardEvent<HTMLInputElement>) => {\r\n\t\tif (e.key === \"Enter\" && query.trim()) {\r\n\t\t\tconst newParams = { ...getUrlObj(location.search), query: query.trim() }\r\n\t\t\tconst url = new URLSearchParams(newParams).toString()\r\n\t\t\thistory.push(\"/search?\" + url)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<SearchBoxEl>\r\n\t\t\t<H2>Search anime</H2>\r\n\t\t\t<div className=\"input-container\">\r\n\t\t\t\t<img src=\"https://img.icons8.com/ios-glyphs/100/000000/search.png\" alt=\"search\" />\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tvalue={query}\r\n\t\t\t\t\tonChange={e => setQuery(() => e.target.value)}\r\n\t\t\t\t\tonKeyDown={handleSubmit}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</SearchBoxEl>\r\n\t)\r\n}\r\nexport default SearchBox\r\nconst SearchBoxEl = styled.div`\r\n\twidth: 100%;\r\n\tmargin-top: 50px;\r\n\th2 {\r\n\t\t/* font-size: 2.5rem; */\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t.input-container {\r\n\t\twidth: 100%;\r\n\t\theight: 40px;\r\n\t\tposition: relative;\r\n\t\tborder: none;\r\n\t\tbox-shadow: ${({ theme }) => theme.boxShadow};\r\n\t\tborder-radius: 7px;\r\n\t\tbackground-color: white;\r\n\t\timg {\r\n\t\t\twidth: 23px;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\tleft: 15px;\r\n\t\t\tfilter: invert(0.7);\r\n\t\t}\r\n\t\tinput {\r\n\t\t\theight: 100%;\r\n\t\t\twidth: 100%;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: transparent;\r\n\t\t\tfont-size: 1.1rem;\r\n\t\t\tfont-weight: 300;\r\n\t\t\tpadding-left: 50px;\r\n\t\t\tcolor: #4c5264;\r\n\t\t}\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\tmargin: 20px 0;\r\n\t\th2 {\r\n\t\t\t/* font-size: 1.7rem; */\r\n\t\t}\r\n\t\t.input-container {\r\n\t\t\theight: 30px;\r\n\t\t\tinput {\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tpadding-left: 40px;\r\n\t\t\t}\r\n\t\t\timg {\r\n\t\t\t\tleft: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","const genres: ListType[] = [\r\n\t{\r\n\t\tname: \"Action\",\r\n\t\tid: \"Action\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Adventure\",\r\n\t\tid: \"Adventure\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Comedy\",\r\n\t\tid: \"Comedy\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Drama\",\r\n\t\tid: \"Drama\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Ecchi\",\r\n\t\tid: \"Ecchi\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Fantasy\",\r\n\t\tid: \"Fantasy\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Horror\",\r\n\t\tid: \"Horror\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Mahou Shoujo\",\r\n\t\tid: \"Mahou Shoujo\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Mecha\",\r\n\t\tid: \"Mecha\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Music\",\r\n\t\tid: \"Music\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Mystery\",\r\n\t\tid: \"Mystery\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Psychological\",\r\n\t\tid: \"Psychological\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Romance\",\r\n\t\tid: \"Romance\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Sci-Fi\",\r\n\t\tid: \"Sci-Fi\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Slice of Life\",\r\n\t\tid: \"Slice of Life\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Sports\",\r\n\t\tid: \"Sports\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Supernatural\",\r\n\t\tid: \"Supernatural\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n\t{\r\n\t\tname: \"Thriller\",\r\n\t\tid: \"Supernatural\",\r\n\t\ttype: \"genre\",\r\n\t},\r\n]\r\nconst seasons = [\r\n\t{\r\n\t\tname: \"Summer\",\r\n\t\tid: \"SUMMER\",\r\n\t\ttype: \"season\",\r\n\t},\r\n\t{\r\n\t\tname: \"Spring\",\r\n\t\tid: \"SPRING\",\r\n\t\ttype: \"season\",\r\n\t},\r\n\t{\r\n\t\tname: \"Fall\",\r\n\t\tid: \"FALL\",\r\n\t\ttype: \"season\",\r\n\t},\r\n\t{\r\n\t\tname: \"Winter\",\r\n\t\tid: \"WINTER\",\r\n\t\ttype: \"season\",\r\n\t},\r\n]\r\nconst year: ListType[] = [\r\n\t{ name: 1950, id: 1950, type: \"year\" },\r\n\t{ name: 1951, id: 1951, type: \"year\" },\r\n\t{ name: 1952, id: 1952, type: \"year\" },\r\n\t{ name: 1953, id: 1953, type: \"year\" },\r\n\t{ name: 1954, id: 1954, type: \"year\" },\r\n\t{ name: 1955, id: 1955, type: \"year\" },\r\n\t{ name: 1956, id: 1956, type: \"year\" },\r\n\t{ name: 1957, id: 1957, type: \"year\" },\r\n\t{ name: 1958, id: 1958, type: \"year\" },\r\n\t{ name: 1959, id: 1959, type: \"year\" },\r\n\t{ name: 1960, id: 1960, type: \"year\" },\r\n\t{ name: 1961, id: 1961, type: \"year\" },\r\n\t{ name: 1962, id: 1962, type: \"year\" },\r\n\t{ name: 1963, id: 1963, type: \"year\" },\r\n\t{ name: 1964, id: 1964, type: \"year\" },\r\n\t{ name: 1965, id: 1965, type: \"year\" },\r\n\t{ name: 1966, id: 1966, type: \"year\" },\r\n\t{ name: 1967, id: 1967, type: \"year\" },\r\n\t{ name: 1968, id: 1968, type: \"year\" },\r\n\t{ name: 1969, id: 1969, type: \"year\" },\r\n\t{ name: 1970, id: 1970, type: \"year\" },\r\n\t{ name: 1971, id: 1971, type: \"year\" },\r\n\t{ name: 1972, id: 1972, type: \"year\" },\r\n\t{ name: 1973, id: 1973, type: \"year\" },\r\n\t{ name: 1974, id: 1974, type: \"year\" },\r\n\t{ name: 1975, id: 1975, type: \"year\" },\r\n\t{ name: 1976, id: 1976, type: \"year\" },\r\n\t{ name: 1977, id: 1977, type: \"year\" },\r\n\t{ name: 1978, id: 1978, type: \"year\" },\r\n\t{ name: 1979, id: 1979, type: \"year\" },\r\n\t{ name: 1980, id: 1980, type: \"year\" },\r\n\t{ name: 1981, id: 1981, type: \"year\" },\r\n\t{ name: 1982, id: 1982, type: \"year\" },\r\n\t{ name: 1983, id: 1983, type: \"year\" },\r\n\t{ name: 1984, id: 1984, type: \"year\" },\r\n\t{ name: 1985, id: 1985, type: \"year\" },\r\n\t{ name: 1986, id: 1986, type: \"year\" },\r\n\t{ name: 1987, id: 1987, type: \"year\" },\r\n\t{ name: 1988, id: 1988, type: \"year\" },\r\n\t{ name: 1989, id: 1989, type: \"year\" },\r\n\t{ name: 1990, id: 1990, type: \"year\" },\r\n\t{ name: 1991, id: 1991, type: \"year\" },\r\n\t{ name: 1992, id: 1992, type: \"year\" },\r\n\t{ name: 1993, id: 1993, type: \"year\" },\r\n\t{ name: 1994, id: 1994, type: \"year\" },\r\n\t{ name: 1995, id: 1995, type: \"year\" },\r\n\t{ name: 1996, id: 1996, type: \"year\" },\r\n\t{ name: 1997, id: 1997, type: \"year\" },\r\n\t{ name: 1998, id: 1998, type: \"year\" },\r\n\t{ name: 1999, id: 1999, type: \"year\" },\r\n\t{ name: 2000, id: 2000, type: \"year\" },\r\n\t{ name: 2001, id: 2001, type: \"year\" },\r\n\t{ name: 2002, id: 2002, type: \"year\" },\r\n\t{ name: 2003, id: 2003, type: \"year\" },\r\n\t{ name: 2004, id: 2004, type: \"year\" },\r\n\t{ name: 2005, id: 2005, type: \"year\" },\r\n\t{ name: 2006, id: 2006, type: \"year\" },\r\n\t{ name: 2007, id: 2007, type: \"year\" },\r\n\t{ name: 2008, id: 2008, type: \"year\" },\r\n\t{ name: 2009, id: 2009, type: \"year\" },\r\n\t{ name: 2010, id: 2010, type: \"year\" },\r\n\t{ name: 2011, id: 2011, type: \"year\" },\r\n\t{ name: 2012, id: 2012, type: \"year\" },\r\n\t{ name: 2013, id: 2013, type: \"year\" },\r\n\t{ name: 2014, id: 2014, type: \"year\" },\r\n\t{ name: 2015, id: 2015, type: \"year\" },\r\n\t{ name: 2016, id: 2016, type: \"year\" },\r\n\t{ name: 2017, id: 2017, type: \"year\" },\r\n\t{ name: 2018, id: 2018, type: \"year\" },\r\n\t{ name: 2019, id: 2019, type: \"year\" },\r\n\t{ name: 2020, id: 2020, type: \"year\" },\r\n\t{ name: 2021, id: 2021, type: \"year\" },\r\n]\r\nconst formats = [\r\n\t{\r\n\t\tname: \"tv\",\r\n\t\tid: \"TV\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"ova\",\r\n\t\tid: \"OVA\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"movie\",\r\n\t\tid: \"MOVIE\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"special\",\r\n\t\tid: \"SPECIAL\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"ona\",\r\n\t\tid: \"ONA\",\r\n\t\ttype: \"format\",\r\n\t},\r\n\t{\r\n\t\tname: \"music\",\r\n\t\tid: \"MUSIC\",\r\n\t\ttype: \"format\",\r\n\t},\r\n]\r\nexport const selectLists: selectListsType[] = [\r\n\t{\r\n\t\ttype: \"Genre\",\r\n\t\tlist: genres,\r\n\t},\r\n\t{\r\n\t\ttype: \"Season\",\r\n\t\tlist: seasons,\r\n\t},\r\n\t{\r\n\t\ttype: \"Year\",\r\n\t\tlist: year.reverse(),\r\n\t},\r\n\t{\r\n\t\ttype: \"Format\",\r\n\t\tlist: formats,\r\n\t},\r\n]\r\n\r\nexport type ListType = {\r\n\tname: string | number\r\n\ttype: string\r\n\tid: string | number\r\n}\r\n\r\nexport type selectListsType = {\r\n\ttype: string\r\n\tlist: ListType[]\r\n}\r\n","import React, { useRef, useState, useEffect, FC, ChangeEvent } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport getUrlObj from \"../../utlis/getUrlObj\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { ListType, selectLists, selectListsType } from \"./SelectList\"\r\nconst List = styled.div<{ isOpen: boolean }>`\r\n\twidth: unset;\r\n\theight: max-content;\r\n\tposition: relative;\r\n\t.selected {\r\n\t\tcursor: pointer;\r\n\t\twidth: 150px;\r\n\t\theight: 30px;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 7px;\r\n\t\tbox-shadow: ${({ theme }) => theme.boxShadow};\r\n\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding: 0 15px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tposition: relative;\r\n\t\t.mask {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tz-index: 2;\r\n\t\t}\r\n\t\tspan {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\tcolor: #979797;\r\n\t\t\tpadding: 8px 0;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 15px;\r\n\t\t\theight: 15px;\r\n\t\t\tfilter: invert(0.7);\r\n\t\t\tmargin: 8px 0;\r\n\t\t}\r\n\t\t.cover {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tz-index: 1;\r\n\t\t}\r\n\t}\r\n\t.box {\r\n\t\tlist-style: none;\r\n\t\twidth: 150px;\r\n\t\theight: max-content;\r\n\t\tmax-height: 300px;\r\n\t\tpadding: 10px;\r\n\t\toverflow-y: auto;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 7px;\r\n\t\tbox-shadow: ${({ theme }) => theme.boxShadow};\r\n\t\tposition: absolute;\r\n\t\tdisplay: ${({ isOpen }) => (isOpen ? \"block\" : \"none\")};\r\n\t\tz-index: 2;\r\n\t\t::-webkit-scrollbar-track {\r\n\t\t\tbackground-color: ${({ theme }) => theme.scrollbar};\r\n\t\t}\r\n\t\t::-webkit-scrollbar {\r\n\t\t\tborder-radius: 4px;\r\n\t\t\twidth: 5px;\r\n\t\t\tbackground-color: #f5f5f5;\r\n\t\t}\r\n\t\t::-webkit-scrollbar-thumb {\r\n\t\t\tbackground-color: #7e7e7e;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\tli.option {\r\n\t\t\tcursor: pointer;\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\tcolor: rgb(63, 63, 63);\r\n\t\t\tpadding: 5px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\ttransition: 0.2s;\r\n\t\t\t&:hover {\r\n\t\t\t\tbackground-color: #e0e0e0;\r\n\t\t\t\tcolor: #43b375;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t&:nth-child(2n) {\r\n\t\t\tjustify-self: end;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.selected,\r\n\t\t.box {\r\n\t\t\twidth: 120px;\r\n\t\t}\r\n\t}\r\n`\r\n\r\ntype Props = {\r\n\titem: selectListsType\r\n\tlocation: RouteComponentProps[\"location\"]\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\n\r\nconst OptionList: FC<Props> = ({ item, location, history }) => {\r\n\tconst [isOpen, setIsOpen] = useState(false)\r\n\tconst listEl = useRef<HTMLDivElement>(null)\r\n\tconst ul = useRef<HTMLUListElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener(\"click\", closeList)\r\n\t\treturn () => window.removeEventListener(\"click\", closeList)\r\n\t}, [listEl])\r\n\r\n\tconst closeList = (e: any) => {\r\n\t\tif (e.target !== listEl.current) setIsOpen(false)\r\n\t}\r\n\r\n\tconst filterByOption = (option: ListType) => {\r\n\t\tconst params = { ...getUrlObj(location.search), [option.type]: option.id.toString() }\r\n\t\tconst url = new URLSearchParams(params).toString()\r\n\t\thistory.push(\"/search?\" + url)\r\n\t}\r\n\treturn (\r\n\t\t<List className=\"list-container\" isOpen={isOpen}>\r\n\t\t\t<div className=\"selected\">\r\n\t\t\t\t<div ref={listEl} className=\"mask\" onClick={() => setIsOpen(!isOpen)}></div>\r\n\t\t\t\t<span>{item.type}</span>\r\n\t\t\t\t<img src=\"https://img.icons8.com/ios-glyphs/30/000000/chevron-down.png\" alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<ul ref={ul} className=\"box\">\r\n\t\t\t\t{item.list.map(option => (\r\n\t\t\t\t\t<li key={option.name} className=\"option\" onClick={() => filterByOption(option)}>\r\n\t\t\t\t\t\t{option.name}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t</List>\r\n\t)\r\n}\r\nexport default OptionList\r\n","import React, { FC, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { useLocation, useHistory, RouteComponentProps } from \"react-router-dom\"\r\nimport SearchBox from \"./SearchBox\"\r\nimport { ListType, selectLists, selectListsType } from \"./SelectList\"\r\nimport OptionList from \"./OptionList\"\r\nimport getUrlObj from \"../../utlis/getUrlObj\"\r\n\r\nconst Container = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t}\r\n`\r\nconst AllFilters = styled.div`\r\n\twidth: 100%;\r\n\tmargin: 50px auto;\r\n\t.options-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\twidth: 100%;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tmargin: 20px auto;\r\n\t\t.options-container {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: 1fr 1fr;\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst SearchSection: FC = () => {\r\n\tconst location = useLocation()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<SearchBox location={location} history={history} />\r\n\t\t\t<AllFilters>\r\n\t\t\t\t<div className=\"options-container\">\r\n\t\t\t\t\t{selectLists.map((item, index) => (\r\n\t\t\t\t\t\t<OptionList key={index} item={item} location={location} history={history} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</AllFilters>\r\n\t\t\t<SelectedFilters location={location} history={history} />\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default SearchSection\r\nconst FiltersBox = styled.div`\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tmargin: 15px 0;\r\n\t.filter {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 7px;\r\n\t\tmargin: 0 20px 20px 0;\r\n\t\tbackground: #4c5264;\r\n\t\tpadding: 4px;\r\n\t}\r\n\timg {\r\n\t\tmargin-left: 5px;\r\n\t\twidth: 15px;\r\n\t\tfilter: invert(1);\r\n\t\theight: auto;\r\n\t}\r\n`\r\ntype FilterProps = {\r\n\thistory: RouteComponentProps[\"history\"]\r\n\tlocation: RouteComponentProps[\"location\"]\r\n}\r\nconst SelectedFilters: FC<FilterProps> = ({ history, location }) => {\r\n\tconst [filter, setFilter] = useState<any[]>([])\r\n\tconst obj = getUrlObj(location.search)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet arr = []\r\n\t\tfor (let key in obj) {\r\n\t\t\tif (obj[key]) {\r\n\t\t\t\tarr.push({ type: key, value: obj[key] })\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFilter(arr)\r\n\t}, [location])\r\n\tconst removeFilter = (filter: ListType) => {\r\n\t\tdelete obj[filter.type]\r\n\t\tconst url = new URLSearchParams(obj).toString()\r\n\t\thistory.push(\"/search?\" + url)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<FiltersBox>\r\n\t\t\t{filter.map((e, index) => (\r\n\t\t\t\t<div key={index} className=\"filter\">\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<b>{e.type}:</b> {e.value}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<img onClick={() => removeFilter(e)} src=\"./assets/icons/x.svg\" />\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</FiltersBox>\r\n\t)\r\n}\r\n","import React, { FC, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport homeListQuery from \"../api/anime/homeListAPI\"\r\nimport Carousel from \"../components/Home/Carousel\"\r\nimport SearchSection from \"../components/Search/SearchSection\"\r\ntype List = Array<{\r\n\tid: number\r\n\tcoverImage: {\r\n\t\textraLarge: string\r\n\t}\r\n\ttitle: {\r\n\t\tenglish: string\r\n\t\tromaji: string\r\n\t}\r\n}> | null\r\n\r\nconst Home: FC = () => {\r\n\tconst [trending, setTrending] = useState<List>(null)\r\n\tconst [top, setTop] = useState<List>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tconst getAnimes = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { top, trending } = await homeListQuery()\r\n\t\t\t\tif (isMounted) {\r\n\t\t\t\t\tsetTop(top.media)\r\n\t\t\t\t\tsetTrending(trending.media)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAnimes()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"hero\">\r\n\t\t\t\t<div className=\"hero-container\">\r\n\t\t\t\t\t<h1>Discover the world of anime using the world's largest anime database</h1>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<SearchSection />\r\n\t\t\t<Carousel header=\"Popular this season\" list={trending!} />\r\n\t\t\t<Carousel header=\"Top animes of all time\" list={top!} />\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Home\r\nconst Container = styled.div`\r\n\t.hero {\r\n\t\tbackground: url(\"/assets/images/background.jpg\");\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-size: cover;\r\n\t\twidth: 100%;\r\n\t\theight: 400px;\r\n\t\tposition: relative;\r\n\t\t.hero-container {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.7);\r\n\t\t}\r\n\t\th1 {\r\n\t\t\tmax-width: 1200px;\r\n\t\t\tpadding: 100px 50px;\r\n\t\t\ttext-align: center;\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin: auto;\r\n\t\t\tcolor: white;\r\n\t\t\tfont-size: 3rem;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 1024px) {\r\n\t\t.hero {\r\n\t\t\theight: 300px;\r\n\t\t\th1 {\r\n\t\t\t\tfont-size: 2.5rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.hero {\r\n\t\t\theight: 200px;\r\n\t\t\th1 {\r\n\t\t\t\tfont-size: 2rem;\r\n\t\t\t\tpadding: 50px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.hero {\r\n\t\t\theight: 200px;\r\n\t\t\tmargin: 0;\r\n\t\t\th1 {\r\n\t\t\t\tpadding: 40px 20px;\r\n\t\t\t\tfont-size: 1.7rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport BeatLoader from \"react-spinners/BeatLoader\"\r\ntype Size = \"small\" | \"medium\" | \"large\"\r\ninterface ButtonStyleType {\r\n\tsize: Size\r\n\tdisabled: boolean\r\n\tcolor: string\r\n\tcustomStyle?: string\r\n}\r\nconst PrimaryButtonStyle = styled.button<ButtonStyleType>`\r\n\tfont-family: \"Overpass\", sans-serif;\r\n\tcursor: pointer;\r\n\tbackground: ${({ color }) => color};\r\n\tborder-radius: 4px;\r\n\tborder: none;\r\n\tcolor: white;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tfont-weight: 500;\r\n\ttransition: 0.2s;\r\n\twidth: max-content;\r\n\t:hover {\r\n\t\tfilter: brightness(0.9);\r\n\t}\r\n\t:disabled {\r\n\t\tfilter: brightness(0.8);\r\n\t\topacity: 0.7;\r\n\t}\r\n\tfont-size: ${({ size }) =>\r\n\t\tsize === \"small\" ? \"0.9rem\" : size === \"medium\" ? \"1.1rem\" : size === \"large\" ? \"1.5rem\" : \"0\"};\r\n\tpadding: ${({ size }) =>\r\n\t\tsize === \"small\"\r\n\t\t\t? \"3px 8px\"\r\n\t\t\t: size === \"medium\"\r\n\t\t\t? \"5px 12px\"\r\n\t\t\t: size === \"large\"\r\n\t\t\t? \"8px 16px\"\r\n\t\t\t: \"0\"};\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: ${({ size }) =>\r\n\t\t\tsize === \"small\"\r\n\t\t\t\t? \"0.8rem\"\r\n\t\t\t\t: size === \"medium\"\r\n\t\t\t\t? \"0.95rem\"\r\n\t\t\t\t: size === \"large\"\r\n\t\t\t\t? \"1.15rem\"\r\n\t\t\t\t: \"0\"};\r\n\t}\r\n\t${({ customStyle }) => customStyle}\r\n`\r\n\r\ninterface ButtonType {\r\n\tonClick?: () => void\r\n\tclassName?: string\r\n\tsize?: Size\r\n\tcolor?: \"green\" | \"red\"\r\n\tisLoading?: boolean\r\n\tdisabled?: boolean\r\n\tcustomStyle?: string\r\n\ttype?: \"submit\" | \"reset\" | \"button\"\r\n}\r\nexport const PrimaryBtn: FC<ButtonType> = ({\r\n\tchildren,\r\n\tcolor = \"green\",\r\n\tsize = \"medium\",\r\n\tonClick,\r\n\tclassName,\r\n\tdisabled,\r\n\tisLoading,\r\n\tcustomStyle,\r\n}) => {\r\n\tconst spinnerSize = size === \"small\" ? 5 : size === \"medium\" ? 10 : size === \"large\" ? 15 : 0\r\n\treturn (\r\n\t\t<PrimaryButtonStyle\r\n\t\t\tcolor={color === \"red\" ? \"#F15858\" : \"#70c7a7\"}\r\n\t\t\tdisabled={disabled || false}\r\n\t\t\tsize={size}\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={className}\r\n\t\t\tcustomStyle={customStyle}>\r\n\t\t\t{isLoading ? <BeatLoader size={spinnerSize} color=\"white\" /> : children}\r\n\t\t</PrimaryButtonStyle>\r\n\t)\r\n}\r\n\r\nconst SecondaryBtnStyle = styled.button<ButtonStyleType>`\r\n\tcursor: pointer;\r\n\tcolor: ${({ color }) => color};\r\n\tfont-weight: 500;\r\n\tfont-size: ${({ size }) =>\r\n\t\tsize === \"small\" ? \"0.8rem\" : size === \"medium\" ? \"1rem\" : size === \"large\" ? \"1.5rem\" : \"0\"};\r\n\tborder: none;\r\n\tbackground: none;\r\n\t:hover {\r\n\t\tfilter: brightness(0.9);\r\n\t}\r\n\t:disabled {\r\n\t\tfilter: brightness(0.8);\r\n\t\topacity: 0.7;\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: ${({ size }) =>\r\n\t\t\tsize === \"small\"\r\n\t\t\t\t? \"0.8rem\"\r\n\t\t\t\t: size === \"medium\"\r\n\t\t\t\t? \"0.95rem\"\r\n\t\t\t\t: size === \"large\"\r\n\t\t\t\t? \"1.15rem\"\r\n\t\t\t\t: \"0\"};\r\n\t}\r\n\t${({ customStyle }) => customStyle}\r\n`\r\nexport const SecondaryBtn: FC<ButtonType> = ({\r\n\tchildren,\r\n\tcolor = \"green\",\r\n\tsize = \"medium\",\r\n\tonClick,\r\n\tdisabled,\r\n\tclassName,\r\n\tcustomStyle,\r\n\ttype,\r\n}) => {\r\n\treturn (\r\n\t\t<SecondaryBtnStyle\r\n\t\t\tonClick={onClick}\r\n\t\t\tdisabled={disabled || false}\r\n\t\t\tsize={size}\r\n\t\t\tcolor={color === \"red\" ? \"#F15858\" : \"#70c7a7\"}\r\n\t\t\tclassName={className}\r\n\t\t\tcustomStyle={customStyle}\r\n\t\t\ttype={type}>\r\n\t\t\t{children}\r\n\t\t</SecondaryBtnStyle>\r\n\t)\r\n}\r\n","import { useState, memo, useContext, FC, ChangeEvent, FormEvent } from \"react\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { ClipLoader } from \"react-spinners\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { H1 } from \"../components/styles/Styles\"\r\nimport { base_url } from \"../utlis/client\"\r\n\r\nconst Login: FC = () => {\r\n\tconst [form, setForm] = useState({ email: null, password: null })\r\n\tconst history = useHistory()\r\n\tconst { showModalMessage } = useContext(AppContext)\r\n\tconst { user, loadingUser, setUser, setAccessToken } = useContext(UserContext)\r\n\tconst { isLoading } = user\r\n\tconst [isNotVerified, setIsNotVerified] = useState(false)\r\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetForm({ ...form, [e.target.name]: e.target.value })\r\n\t}\r\n\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tloadingUser(true)\r\n\t\tconst res = await fetch(base_url + \"/auth/login\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify(form),\r\n\t\t\tcredentials: \"include\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\tconst { data, message } = await res.json()\r\n\t\tloadingUser(false)\r\n\r\n\t\tif (res.ok) {\r\n\t\t\tsetAccessToken(data.access_token)\r\n\t\t\tsetUser().then(() => history.replace(\"/\"))\r\n\t\t} else if (res.status === 401) {\r\n\t\t\tsetIsNotVerified(true)\r\n\t\t} else {\r\n\t\t\tshowModalMessage(message, res.ok)\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<LoginEl>\r\n\t\t\t<div className=\"form-container\">\r\n\t\t\t\t<H1>Log in</H1>\r\n\t\t\t\t{isNotVerified ? (\r\n\t\t\t\t\t<div className=\"not-verified\">\r\n\t\t\t\t\t\t<h2> Email is not verified</h2>\r\n\t\t\t\t\t\t<p>Check your inbox and look for a link to verify your account.</p>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>Haven't received a link? </span>\r\n\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={() => history.push(\"/resend-verification\")}>\r\n\t\t\t\t\t\t\t\tResend link\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tautoComplete=\"password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"forgot-password\"\r\n\t\t\t\t\t\t\tonClick={() => history.push(\"/request-password-reset\")}>\r\n\t\t\t\t\t\t\tForgot password\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\r\n\t\t\t\t\t\t<PrimaryBtn type=\"submit\" className=\"submit\" disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\t\t\t{isLoading ? <ClipLoader color=\"#fff\" size=\"25\" /> : \"Log in\"}\r\n\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tDon't have an accound? <Link to=\"/register\">Sign up</Link>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</LoginEl>\r\n\t)\r\n}\r\n\r\nexport default memo(Login)\r\n\r\nconst LoginEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t.form-container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 4px;\r\n\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 50px;\r\n\t\t}\r\n\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t\theight: 35px;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground: #edf1f5;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin-top: 50px;\r\n\t\t\t\ta {\r\n\t\t\t\t\tcolor: #70c7a7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbutton.forgot-password {\r\n\t\t\t\tmargin-top: 10px;\r\n\t\t\t}\r\n\t\t\tbutton.submit {\r\n\t\t\t\tmargin-top: 30px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.not-verified {\r\n\t\th2 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdiv {\r\n\t\t\tmargin-top: 30px;\r\n\t\t\tspan {\r\n\t\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t\theight: 80vh;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px 20px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t\theight: 80vh;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport ClipLoader from \"react-spinners/ClipLoader\"\r\nimport styled from \"styled-components\"\r\n\r\nconst LoadingEl = styled.div<{ padding: number }>`\r\n\twidth: 100%;\r\n\tpadding-top: ${({ padding }) => padding || \"0\"}px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`\r\ntype Props = {\r\n\tsize?: number\r\n\tpadding?: number\r\n}\r\nconst LoadingSpinner: FC<Props> = ({ size, padding = 0 }) => {\r\n\treturn (\r\n\t\t<LoadingEl padding={padding}>\r\n\t\t\t<ClipLoader color=\"#70c7a7\" size={size || 50} />\r\n\t\t</LoadingEl>\r\n\t)\r\n}\r\nexport default LoadingSpinner\r\n","import { formatDistanceStrict } from \"date-fns\"\r\nimport { FC } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\ntype Props = {\r\n\tusername: string\r\n\tavatar_url: string\r\n\tdate: number\r\n\tisEdited?: boolean\r\n}\r\nconst UserLink: FC<Props> = ({ username, avatar_url, date, isEdited }) => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Link className=\"user\" to={`/user/${username}`}>\r\n\t\t\t\t<img src={avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t<div className=\"username-date\">\r\n\t\t\t\t\t<span className=\"username\">{username}</span>\r\n\t\t\t\t\t{!!date && (\r\n\t\t\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t\t\t{formatDistanceStrict(new Date(date * 1000), new Date(), {\r\n\t\t\t\t\t\t\t\taddSuffix: true,\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{isEdited && <span className=\"edited\">(edited)</span>}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default UserLink\r\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\t.username-date {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t.user {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 15px;\r\n\t\timg {\r\n\t\t\twidth: 40px;\r\n\t\t\theight: 40px;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\t\tspan.username {\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t}\r\n\tspan.date,\r\n\tspan.edited {\r\n\t\tfont-size: 0.8rem;\r\n\t\tcolor: grey;\r\n\t}\r\n\t.edited {\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.user {\r\n\t\t\timg {\r\n\t\t\t\twidth: 30px;\r\n\t\t\t\theight: 30px;\r\n\t\t\t}\r\n\t\t\tspan.username {\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tspan.date,\r\n\t\tspan.edited {\r\n\t\t\tfont-size: 0.75rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport UserLink from \"../UserLink\"\r\nexport type CommentType = {\r\n\tuser_id: string\r\n\tcomment_id: number\r\n\tusername: string\r\n\tavatar_url: string\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n\ttext: string\r\n}\r\ntype CommentProps = {\r\n\tcomment: CommentType\r\n\tgetComments: () => Promise<void>\r\n}\r\nconst Comment: FC<CommentProps> = ({ comment, getComments }) => {\r\n\tconst [newComment, setNewComment] = useState(comment.text)\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [pending, setPending] = useState(false)\r\n\tconst { id } = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isEditOpen && !pending) {\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t}, [comment])\r\n\tuseLayoutEffect(() => {\r\n\t\tif (textareaRef.current != null) {\r\n\t\t\tconst scrollHeight = textareaRef.current.scrollHeight\r\n\t\t\ttextareaRef.current.style.height = scrollHeight + \"px\"\r\n\t\t\tif (isEditOpen) {\r\n\t\t\t\ttextareaRef.current.selectionStart = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.selectionEnd = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.focus()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [textareaRef.current, isEditOpen])\r\n\tconst handleEditSubmit = async () => {\r\n\t\tsetPending(true)\r\n\t\tconst { ok } = await client(`/anime/comments/${comment.comment_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: { newComment },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t}\r\n\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetPending(false)\r\n\t}\r\n\tconst handleEditOpen = () => {\r\n\t\tsetIsEditOpen(true)\r\n\t}\r\n\treturn (\r\n\t\t<CommentBox>\r\n\t\t\t<div className=\"top-bar\">\r\n\t\t\t\t<UserLink\r\n\t\t\t\t\tusername={comment.username}\r\n\t\t\t\t\tavatar_url={comment.avatar_url}\r\n\t\t\t\t\tdate={comment.created_at}\r\n\t\t\t\t\tisEdited={comment.is_edited}\r\n\t\t\t\t/>\r\n\t\t\t\t{id == comment.user_id && (\r\n\t\t\t\t\t<div className=\"actions\">\r\n\t\t\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => setIsEditOpen(false)}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left: 10px;\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditSubmit}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={handleEditOpen} disabled={pending}>\r\n\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left: 10px;\"\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tshowModal(\"DELETE_COMMENT\", { getComments, comment, type: \"anime\" })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{isEditOpen ? (\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\tname=\"newComment\"\r\n\t\t\t\t\tdefaultValue={newComment}\r\n\t\t\t\t\tonChange={e => setNewComment(e.target.value)}></textarea>\r\n\t\t\t) : (\r\n\t\t\t\t<p className=\"comment\">{comment.text}</p>\r\n\t\t\t)}\r\n\t\t</CommentBox>\r\n\t)\r\n}\r\nexport default Comment\r\n\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\t.top-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.comment-data {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.user-data {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\t.username {\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t\t.date {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tcolor: grey;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\tp {\r\n\t\tmargin-top: 15px;\r\n\t\twhite-space: pre-line;\r\n\t}\r\n\ttextarea {\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 5px;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 1rem;\r\n\t\theight: unset;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tp,\r\n\t\ttextarea {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, FormEvent, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport Comment, { CommentType } from \"./Comment\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tanime_id: number\r\n}\r\n\r\nconst Comments: FC<Props> = ({ anime_id }) => {\r\n\tconst [comments, setComments] = useState<CommentType[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [isSending, setIsSending] = useState(false)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst getComments = async () => {\r\n\t\tconst { data, ok, message } = await client(`/anime/comments/${anime_id}`)\r\n\t\tif (ok) {\r\n\t\t\tsetComments(data)\r\n\t\t} else {\r\n\t\t\tconsole.log(message)\r\n\t\t}\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetComments()\r\n\t}, [])\r\n\r\n\tconst [text, setText] = useState(\"\")\r\n\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsSending(true)\r\n\r\n\t\tconst { ok } = await client(`/anime/comments/${anime_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { text },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t\tsetText(\"\")\r\n\t\t}\r\n\t\tsetIsSending(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H2>Comments</H2>\r\n\t\t\t<CommentForm onSubmit={handleSubmit}>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\tonChange={e => setText(e.target.value)}\r\n\t\t\t\t\tdisabled={isSending}\r\n\t\t\t\t\tvalue={text}\r\n\t\t\t\t\tplaceholder=\"Add your comment\"></textarea>\r\n\t\t\t\t<br />\r\n\t\t\t\t<PrimaryBtn disabled={isSending} customStyle=\"padding: 7px 10px; font-size: 1.2rem;\">\r\n\t\t\t\t\tSend\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</CommentForm>\r\n\t\t\t<div className=\"all-comments\">\r\n\t\t\t\t{isLoading ? <LoadingSpinner size={50} /> : null}\r\n\t\t\t\t{comments?.map(comment => (\r\n\t\t\t\t\t<Comment key={comment.comment_id} comment={comment} getComments={getComments} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Comments\r\n\r\nconst Container = styled.section`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\r\n\t.all-comments {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t}\r\n`\r\nconst CommentForm = styled.form`\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1.2rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\ttextarea {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport { H1 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tdata: any\r\n\tfavAnime: {\r\n\t\tisFavorite: boolean\r\n\t\tisLoading: boolean\r\n\t}\r\n\thandleAddToFavorites: () => Promise<void>\r\n\thandleRemoveFromFavorites: () => Promise<void>\r\n\r\n\tisLoading: boolean\r\n}\r\nconst RightSide: FC<Props> = ({\r\n\tdata,\r\n\tfavAnime,\r\n\thandleAddToFavorites,\r\n\thandleRemoveFromFavorites,\r\n\tisLoading,\r\n}) => {\r\n\tconst btnName = favAnime.isFavorite ? \"Remove\" : \"Add to Favorites\"\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<H1 customStyle=\"margin-bottom: 10px;\">{data.title.english || data.title.romaji}</H1>\r\n\t\t\t<div className=\"img-and-desc\">\r\n\t\t\t\t<div className=\"mobile-img-cont\">\r\n\t\t\t\t\t<img className=\"mobile-img\" src={data.coverImage.extraLarge} alt=\"\" />\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tdisabled={favAnime.isLoading}\r\n\t\t\t\t\t\tisLoading={favAnime.isLoading || isLoading}\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tfavAnime.isFavorite ? handleRemoveFromFavorites() : handleAddToFavorites()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclassName=\"fav-btn\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tcolor={favAnime.isFavorite ? \"red\" : \"green\"}>\r\n\t\t\t\t\t\t{btnName}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p dangerouslySetInnerHTML={{ __html: data.description }}></p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ul className=\"genres\">\r\n\t\t\t\t{data.genres.map((genre: string, index: string) => (\r\n\t\t\t\t\t<Link key={index} to={`/search?genre=${genre}`}>\r\n\t\t\t\t\t\t{genre}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t\t{data.trailer && (\r\n\t\t\t\t<iframe\r\n\t\t\t\t\tallowFullScreen\r\n\t\t\t\t\tclassName=\"trailer\"\r\n\t\t\t\t\ttitle={data.title}\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\theight=\"350px\"\r\n\t\t\t\t\tsrc={`https://www.youtube.com/embed/${data.trailer.id}`}></iframe>\r\n\t\t\t)}\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default RightSide\r\n\r\nconst Section = styled.section`\r\n\twidth: 60%;\r\n\tmargin-left: 50px;\r\n\tmargin-top: 0px;\r\n\r\n\t.fav-btn {\r\n\t\tdisplay: none;\r\n\t}\r\n\tp {\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t.mobile-img {\r\n\t\tdisplay: none;\r\n\t\tborder-radius: 7px;\r\n\t}\r\n\t.trailer {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\t.genres {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin-top: 20px;\r\n\t\ta {\r\n\t\t\tborder: 1px rgba(0, 0, 0, 0.4) solid;\r\n\t\t\tcolor: #4c5264;\r\n\t\t\tbackground-color: white;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tmargin: 5px 0;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tpadding: 2px 5px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\twidth: 100%;\r\n\t\tmargin: 0;\r\n\t\t.img-and-desc {\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\twidth: 70%;\r\n\t\t\t}\r\n\t\t\t.mobile-img-cont {\r\n\t\t\t\twidth: 30%;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tmargin-right: 15px;\r\n\r\n\t\t\t\t.mobile-img {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-bottom: 15px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.fav-btn {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t\t.genres {\r\n\t\t\tmargin-top: 5px;\r\n\t\t}\r\n\r\n\t\t@media screen and (max-width: 480px) {\r\n\t\t\tmargin-top: 20px;\r\n\t\t\t.img-and-desc {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\tmargin-top: 20px;\r\n\t\t\t\t}\r\n\t\t\t\t.mobile-img-cont {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-right: 0px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tiframe {\r\n\t\t\t\theight: 220px;\r\n\t\t\t}\r\n\t\t\t.genres {\r\n\t\t\t\tli {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t\tmargin: 5px 5px 5px 0;\r\n\t\t\t\t\tpadding: 2px 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\ntype Props = {\r\n\tdata: any\r\n\tfavAnime: {\r\n\t\tisFavorite: boolean\r\n\t\tisLoading: boolean\r\n\t}\r\n\thandleAddToFavorites: () => Promise<void>\r\n\thandleRemoveFromFavorites: () => Promise<void>\r\n\tisLoading: boolean\r\n}\r\nconst LeftSide: FC<Props> = ({\r\n\tdata,\r\n\tfavAnime,\r\n\thandleAddToFavorites,\r\n\thandleRemoveFromFavorites,\r\n\tisLoading,\r\n}) => {\r\n\tconst btnName = favAnime.isFavorite ? \"Remove\" : \"Add to Favorites\"\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<img className=\"desktop-img\" src={data.coverImage.extraLarge} alt=\"\" />\r\n\t\t\t<PrimaryBtn\r\n\t\t\t\tdisabled={favAnime.isLoading}\r\n\t\t\t\tisLoading={favAnime.isLoading || isLoading}\r\n\t\t\t\tonClick={() => (favAnime.isFavorite ? handleRemoveFromFavorites() : handleAddToFavorites())}\r\n\t\t\t\tclassName=\"fav-btn\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tcolor={favAnime.isFavorite ? \"red\" : \"green\"}>\r\n\t\t\t\t{btnName}\r\n\t\t\t</PrimaryBtn>\r\n\t\t\t<ul className=\"details\">\r\n\t\t\t\t<li>\r\n\t\t\t\t\tSeason\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t{data.season} {data.seasonYear}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tFormat <span>{data.format}</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tEpisodes <span>{data.episodes}</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tDuration <span>{data.duration} min</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tStatus <span>{data.status}</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\tStudio <span>{data.studios?.edges[0]?.node?.name}</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default LeftSide\r\nconst Section = styled.section`\r\n\twidth: 35%;\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t.details {\r\n\t\tmargin: 20px 0;\r\n\t\tpadding: 5px 20px;\r\n\t\tborder-radius: 3px;\r\n\t\tbackground-color: white;\r\n\t\tbox-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.1);\r\n\t\tli {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\tcolor: black;\r\n\t\t\tfont-size: 1.1rem;\r\n\t\t\tspan {\r\n\t\t\t\tcolor: #4c5264;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 768px) {\r\n\t\twidth: 100%;\r\n\t\t.details {\r\n\t\t\tmargin: 0;\r\n\t\t\tpadding: 10px 20px;\r\n\t\t\tborder-radius: 0;\r\n\t\t\tbox-shadow: none;\r\n\t\t\tli {\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tspan {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.desktop-img {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t.fav-btn {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 480px) {\r\n\t\t.details {\r\n\t\t\tpadding: 5px 10px;\r\n\t\t\tli {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\tspan {\r\n\t\t\t\t\tfont-size: 0.85rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n// const GreenBtn = `\r\n// \twidth: max-content;\r\n// \theight: max-content;\r\n// \tpadding: 5px;\r\n// \tfont-size: 0.8rem;\r\n// \t@media screen and (max-width: 768px) {\r\n// \t\tdisplay: none !important;\r\n// \t}\r\n// `\r\n// const RedBtn = `\r\n// \twidth: max-content;\r\n// \theight: max-content;\r\n// \tpadding: 5px;\r\n// \tfont-size: 0.8rem;\r\n// \tbackground-color: red;\r\n// \t@media screen and (max-width: 768px) {\r\n// \t\tdisplay: none !important;\r\n// \t}\r\n// `\r\n// const ButtonStyle = `\r\n// \twidth: max-content;\r\n// \theight: max-content;\r\n// \tpadding: 5px;\r\n// \t/* font-size: 1rem; */\r\n// \tfont-size: 0.8rem;\r\n// \t@media screen and (max-width: 768px) {\r\n// \t\tdisplay: none;\r\n// \t}\r\n// `\r\n","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\nconst Characters = ({ data }: any) => {\r\n\tif (!data.hasOwnProperty(\"characters\")) return null\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<H2>Main characters</H2>\r\n\t\t\t<div className=\"characters-container\">\r\n\t\t\t\t{data.characters.edges.map(\r\n\t\t\t\t\t({\r\n\t\t\t\t\t\tnode: {\r\n\t\t\t\t\t\t\tname: { full: name },\r\n\t\t\t\t\t\t\timage,\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}: any) => (\r\n\t\t\t\t\t\t<Link to={`/character/${id}`} key={id}>\r\n\t\t\t\t\t\t\t<div className=\"character-card\">\r\n\t\t\t\t\t\t\t\t<img src={image.large} alt={name} />\r\n\t\t\t\t\t\t\t\t<p>{name}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t)\r\n}\r\nexport default Characters\r\nconst Section = styled.section`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: 20px auto;\r\n\th2 {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\t.characters-container {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(6, minmax(120px, 1fr));\r\n\t\tjustify-content: space-between;\r\n\t\tcolumn-gap: 20px;\r\n\t\trow-gap: 20px;\r\n\t\t.character-card {\r\n\t\t\timg {\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 210px;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 1024px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(5, minmax(120px, 1fr));\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 900px) {\r\n\t\t.characters-container {\r\n\t\t\t.character-card {\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 200px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(4, minmax(100px, 1fr));\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 620px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(4, minmax(80px, 1fr));\r\n\t\t\t.character-card {\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 150px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 480px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\t.character-card {\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\t}\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 170px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t@media screen and (max-width: 400px) {\r\n\t\t.characters-container {\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\t.character-card {\r\n\t\t\t\timg {\r\n\t\t\t\t\theight: 140px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport ClipLoader from \"react-spinners/ClipLoader\"\r\nimport styled from \"styled-components\"\r\n\r\nconst LoadingEl = styled.div`\r\n\tposition: fixed;\r\n\ttop: 4rem;\r\n\tbottom: 2.5rem;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`\r\nconst Loading: FC<{ size: number }> = ({ size }) => {\r\n\treturn (\r\n\t\t<LoadingEl>\r\n\t\t\t<ClipLoader color=\"#70c7a7\" size={size || 50} />\r\n\t\t</LoadingEl>\r\n\t)\r\n}\r\nexport default Loading\r\n","const animeQuery = async (id: number) => {\r\n\tconst query = `\r\n    query ($id: Int) {\r\n      Media(id: $id) {\r\n        id\r\n        title {\r\n          romaji\r\n          english\r\n          native\r\n        }\r\n        description\r\n        trailer {\r\n          id\r\n        }\r\n        bannerImage\r\n        coverImage {\r\n          extraLarge\r\n          large\r\n          medium\r\n          color\r\n        }\r\n        format\r\n        episodes\r\n        status\r\n        duration\r\n        startDate {\r\n          year\r\n          month\r\n          day\r\n        }\r\n        endDate {\r\n          year\r\n          month\r\n          day\r\n        }\r\n        season\r\n        seasonYear\r\n        studios(isMain: true) {\r\n          edges {\r\n            id\r\n            node {\r\n              name\r\n            }\r\n          }\r\n        }\r\n        genres\r\n        characters(sort: [ROLE, ID], role: MAIN) {\r\n          edges {\r\n            id\r\n            role\r\n            node {\r\n              id\r\n              name {\r\n                full\r\n              }\r\n              image {\r\n                large\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n`\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tquery,\r\n\t\t\t\tvariables: { id },\r\n\t\t\t}),\r\n\t\t}\r\n\tconst res = await fetch(url, options)\r\n\tconst json = await res.json()\r\n\treturn json.data.Media\r\n}\r\nexport default animeQuery\r\n","import { FC, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport Comments from \"../components/Anime/Comments\"\r\nimport RightSide from \"../components/Anime/RightSide\"\r\nimport LeftSide from \"../components/Anime/LeftSide\"\r\nimport Characters from \"../components/Anime/Characters\"\r\nimport Loading from \"../components/Loading\"\r\nimport animeQuery from \"../api/anime/animeAPI\"\r\nimport { RouteChildrenProps } from \"react-router\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { UserContext } from \"../context/UserContext\"\r\n\r\ninterface RouteProps {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tid: number\r\n\t\t}\r\n\t}\r\n\thistory: RouteChildrenProps[\"history\"]\r\n}\r\ninterface Anime {\r\n\tcoverImage: {\r\n\t\textraLarge: string\r\n\t}\r\n\ttitle: {\r\n\t\tenglish: string\r\n\t\tromaji: string\r\n\t}\r\n}\r\n\r\nconst AnimePage: FC<RouteProps> = ({ match, history }) => {\r\n\tconst anime_id = match.params.id\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [anime, setAnime] = useState<Anime | null>(null)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst { user } = useContext(UserContext)\r\n\tconst [favAnime, setFavAnime] = useState({ isFavorite: false, isLoading: true })\r\n\tconst getAnimeData = async () => {\r\n\t\tconst anime = await animeQuery(anime_id)\r\n\t\tif (!anime) {\r\n\t\t\treturn history.replace(\"/404\")\r\n\t\t}\r\n\t\tsetAnime(anime)\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetAnimeData()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!user.isLoading && user.isLoggedIn) {\r\n\t\t\tclient(`/anime/favorites/is-favorite/${anime_id}`).then(({ data }) => {\r\n\t\t\t\tconsole.log(\"fav loading\")\r\n\t\t\t\tsetFavAnime({ isFavorite: data, isLoading: false })\r\n\t\t\t})\r\n\t\t}\r\n\t}, [user.isLoading])\r\n\r\n\tconst handleAddToFavorites = async () => {\r\n\t\tsetFavAnime({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/anime/favorites/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tanime_id,\r\n\t\t\t\tcover_image: anime?.coverImage.extraLarge,\r\n\t\t\t\ttitle: anime?.title.english || anime?.title.romaji,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\r\n\t\tsetFavAnime(prev => ({ isFavorite: ok ? true : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\tconst handleRemoveFromFavorites = async () => {\r\n\t\tsetFavAnime({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/anime/favorites/${anime_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\r\n\t\tsetFavAnime(prev => ({ isFavorite: ok ? false : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\tif (!isLoading)\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<LeftSide\r\n\t\t\t\t\t\tfavAnime={favAnime}\r\n\t\t\t\t\t\thandleAddToFavorites={handleAddToFavorites}\r\n\t\t\t\t\t\thandleRemoveFromFavorites={handleRemoveFromFavorites}\r\n\t\t\t\t\t\tdata={anime}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<RightSide\r\n\t\t\t\t\t\tfavAnime={favAnime}\r\n\t\t\t\t\t\thandleAddToFavorites={handleAddToFavorites}\r\n\t\t\t\t\t\thandleRemoveFromFavorites={handleRemoveFromFavorites}\r\n\t\t\t\t\t\tdata={anime}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Characters data={anime} />\r\n\t\t\t\t<Comments anime_id={match.params.id} />\r\n\t\t\t</Container>\r\n\t\t)\r\n\treturn <Loading size={100} />\r\n}\r\nexport default AnimePage\r\nconst Container = styled.div`\r\n\tpadding: 50px 0;\r\n\t.flex-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1200px;\r\n\t\tpadding: 0 50px;\r\n\t\tmargin: auto;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\tpadding: 20px 0;\r\n\t\t.flex-container {\r\n\t\t\tflex-direction: column-reverse;\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 480px) {\r\n\t\tpadding: 0;\r\n\t\t.flex-container {\r\n\t\t}\r\n\t}\r\n`\r\n","import { useState, useContext, useEffect, FormEvent, ChangeEvent, FC } from \"react\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { ClipLoader } from \"react-spinners\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\n\r\nconst Register: FC = () => {\r\n\tconst { user, loadingUser } = useContext(UserContext)\r\n\tconst { isLoading, isLoggedIn } = user\r\n\tconst { client, showModalMessage } = useContext(AppContext)\r\n\tconst history = useHistory()\r\n\r\n\tconst [form, setForm] = useState({\r\n\t\tusername: null,\r\n\t\temail: null,\r\n\t\tpassword: null,\r\n\t\tpassword2: null,\r\n\t})\r\n\tconst [hasEmailSent, setHasEmailSent] = useState(false)\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetForm({ ...form, [e.target.name]: e.target.value })\r\n\t}\r\n\tconst handleSubmit = async (e: FormEvent) => {\r\n\t\te.preventDefault()\r\n\t\tloadingUser(true)\r\n\t\tif (form.password !== form.password2) {\r\n\t\t\tloadingUser(false)\r\n\t\t\treturn showModalMessage(\"Passwords must match\", false)\r\n\t\t}\r\n\t\tconst { ok } = await client(\"/auth/register\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: form,\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetHasEmailSent(true)\r\n\t\t}\r\n\r\n\t\tloadingUser(false)\r\n\t}\r\n\tif (hasEmailSent)\r\n\t\treturn (\r\n\t\t\t<RegisterEl>\r\n\t\t\t\t<div className=\"verify-email-container\">\r\n\t\t\t\t\t<H1>Verify account</H1>\r\n\t\t\t\t\t<img src=\"/assets/icons/email.svg\" alt=\"\" />\r\n\t\t\t\t\t<p>We're almost done! Check your email for a link to verify your email address. </p>\r\n\t\t\t\t\t<SecondaryBtn onClick={() => history.push(\"/resend-verification\")} size=\"medium\">\r\n\t\t\t\t\t\tResend link\r\n\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t</RegisterEl>\r\n\t\t)\r\n\treturn (\r\n\t\t<RegisterEl>\r\n\t\t\t<div className=\"form-container\">\r\n\t\t\t\t<H1>Register</H1>\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input name=\"email\" type=\"email\" required placeholder=\"Email\" onChange={handleChange} />\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tplaceholder=\"Confirm password\"\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\tcustomStyle={`\r\n\t\t\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\t\t\theight: 40px;\r\n\t\t\t\t\t\t`}>\r\n\t\t\t\t\t\t{isLoading ? <ClipLoader color=\"#fff\" size=\"25\" /> : \"Register\"}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tAlready signed up? <Link to=\"/login\">Log in</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</RegisterEl>\r\n\t)\r\n}\r\nexport default Register\r\nconst RegisterEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t.verify-email-container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 6px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\t@media (max-width: 480px) {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 100px;\r\n\t\t\theight: auto;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\twidth: 70px;\r\n\t\t\t}\r\n\t\t}\r\n\t\tp {\r\n\t\t\tfont-size: 1.1;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.form-container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 6px;\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 50px;\r\n\t\t}\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t\theight: 35px;\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground: #edf1f5;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin-top: 50px;\r\n\t\t\t\ta {\r\n\t\t\t\t\tcolor: #70c7a7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tbutton {\r\n\t\t\tmargin-top: 30px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.form-container {\r\n\t\t\tpadding: 50px 20px;\r\n\t\t\tmargin: 0;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t}\r\n`\r\n","import { useState, useEffect, FC, useContext } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\ninterface Anime {\r\n\tanime_id?: number\r\n\ttitle?: string\r\n\tcover_image: string\r\n}\r\ninterface Character {\r\n\tcharacter_id?: number\r\n\tname?: string\r\n\tcover_image: string\r\n}\r\ninterface Favorites {\r\n\tanime: Anime[]\r\n\tcharacters: Character[]\r\n}\r\nconst Favorites: FC = () => {\r\n\tconst [favorites, setFavorites] = useState<Favorites | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tsetIsLoading(true)\r\n\t\t;(async () => {\r\n\t\t\tconst { data: animeData } = await client(\"/anime/favorites\")\r\n\t\t\tconst { data: characterData } = await client(\"/characters/favorites\")\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetFavorites({ anime: animeData, characters: characterData })\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H1>Favorites</H1>\r\n\t\t\t<H2>Anime</H2>\r\n\t\t\t{favorites?.anime?.length ? (\r\n\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t{favorites?.anime.map(anime => (\r\n\t\t\t\t\t\t// <AnimeCard key={anime.anime_id} anime={anime} />\r\n\t\t\t\t\t\t<Card key={anime.anime_id} item={anime} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p>\r\n\t\t\t\t\tYou have no favorites. Why not to browse <Link to=\"/\">anime</Link>?\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t\t<H2>Chacarters</H2>\r\n\t\t\t{favorites?.characters?.length ? (\r\n\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t{favorites?.characters.map(character => (\r\n\t\t\t\t\t\t// <AnimeCard key={anime.anime_id} anime={anime} />\r\n\t\t\t\t\t\t<Card key={character.character_id} item={character} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p>\r\n\t\t\t\t\tYou have no favorites. Why not to browse <Link to=\"/\">characters</Link>?\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Favorites\r\ninterface Card {\r\n\titem: Anime & Character\r\n}\r\nconst Card: FC<Card> = ({ item }) => {\r\n\tconst link = item.anime_id ? `/anime/${item.anime_id}` : `/character/${item.character_id}`\r\n\tconst title = item.title || item.name\r\n\treturn (\r\n\t\t<CardContainer>\r\n\t\t\t<Link to={link}>\r\n\t\t\t\t<img src={item.cover_image} alt=\"\" />\r\n\t\t\t\t<p>{title}</p>\r\n\t\t\t</Link>\r\n\t\t</CardContainer>\r\n\t)\r\n}\r\n//\r\nconst Container = styled.section`\r\n\twidth: 100%;\r\n\t.list {\r\n\t\twidth: 100%;\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(auto-fit, 120px);\r\n\t\tcolumn-gap: 20px;\r\n\t\trow-gap: 20px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t}\r\n\t\t@media (max-width: 400px) {\r\n\t\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\t}\r\n\t}\r\n\tbutton {\r\n\t\tcursor: pointer;\r\n\t\twidth: max-content;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\tbackground-color: rgb(199, 77, 77);\r\n\t\tcolor: white;\r\n\t\tmargin-top: 5px;\r\n\t\tpadding: 3px 5px;\r\n\t\t&:disabled {\r\n\t\t\tbackground-color: grey;\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst CardContainer = styled.div`\r\n\twidth: 120px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\taspect-ratio: 2 / 3;\r\n\t\tobject-fit: cover;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\tp {\r\n\t\tfont-size: 0.9rem;\r\n\t\theight: 30px;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\t/* grid-template-columns: repeat(3, 1fr); */\r\n\t\twidth: 100%;\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Sidebar: FC<{ category: string }> = ({ category }) => {\r\n\treturn (\r\n\t\t<SideNav>\r\n\t\t\t<ul className=\"links\">\r\n\t\t\t\t<li className={category === \"profile\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/profile\">Profile</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"favorites\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/favorites\">Favorites</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"comments\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/comments\">Comments</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"discussions\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/discussions\">Discussions</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"settings\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/settings\">Settings</Link>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={category === \"social\" ? \"link-active\" : \"link\"}>\r\n\t\t\t\t\t<Link to=\"/me/social\">Social</Link>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</SideNav>\r\n\t)\r\n}\r\nexport default Sidebar\r\n\r\nconst SideNav = styled.aside`\r\n\tborder-radius: 7px;\r\n\tmargin-right: 100px;\r\n\twidth: 200px;\r\n\theight: max-content;\r\n\t.links {\r\n\t\tlist-style: none;\r\n\t\tli {\r\n\t\t\twidth: max-content;\r\n\t\t\ta {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: max-content;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t\tfont-size: 1.5rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.link {\r\n\t\ta {\r\n\t\t\tcolor: ${({ theme }) => theme.header};\r\n\t\t}\r\n\t}\r\n\t.link-active {\r\n\t\ta {\r\n\t\t\tborder-left: #70c7a7 4px solid;\r\n\t\t\tpadding-left: 20px;\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 1024px) {\r\n\t\tmargin-right: 50px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 20px;\r\n\t\t.links {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\toverflow-x: auto;\r\n\t\t\t> :last-child {\r\n\t\t\t\tmargin-right: 0 !important;\r\n\t\t\t}\r\n\t\t\tli {\r\n\t\t\t\tmargin-right: 25px;\r\n\t\t\t\ta {\r\n\t\t\t\t\tfont-size: 1rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.link-active {\r\n\t\t\ta {\r\n\t\t\t\tborder-left: none;\r\n\t\t\t\tpadding-left: 0px;\r\n\t\t\t\tcolor: #70c7a7;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { useState, useEffect, useRef, memo, useContext, FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { format, parseISO } from \"date-fns\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\nimport \"react-loading-skeleton/dist/skeleton.css\"\r\n\r\nconst Profile: FC = () => {\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst { user, setUser } = useContext(UserContext)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst { isLoading } = user\r\n\tconst [newAbout, setNewAbout] = useState(user.about || \"\")\r\n\tconst [isAboutPending, setIsAboutPending] = useState(false)\r\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null)\r\n\tconst handleLogout = async () => {\r\n\t\tconst { ok } = await client(`/auth/logout`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tlocalStorage.removeItem(\"access_token\")\r\n\t\t\twindow.location.replace(\"/\")\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isEditOpen && textareaRef.current) {\r\n\t\t\ttextareaRef.current.focus()\r\n\t\t}\r\n\t}, [isEditOpen])\r\n\r\n\tconst handleUpdateAbout = async () => {\r\n\t\tsetIsAboutPending(true)\r\n\t\tconst { ok } = await client(\"/profile/about\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t\tbody: { new_about: newAbout },\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetIsAboutPending(false)\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<ProfileEl>\r\n\t\t\t<H1>Profile</H1>\r\n\t\t\t<div className=\"top\">\r\n\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t<img src={user.avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text\">\r\n\t\t\t\t\t<H2>{user.username}</H2>\r\n\r\n\t\t\t\t\t{isLoading || !user.created_at ? (\r\n\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#f5f5f5\" baseColor=\"#c4c4c4\">\r\n\t\t\t\t\t\t\t<Skeleton width=\"7rem\" height=\"10px\" />\r\n\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p>Member since {format(new Date(user.created_at!), \"MMMM y\")}</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"about-user\">\r\n\t\t\t\t<div className=\"about-header\">\r\n\t\t\t\t\t<H2>About me</H2>\r\n\r\n\t\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(false)} isLoading={isAboutPending} disabled={isAboutPending}>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(true)} isLoading={isAboutPending} disabled={isAboutPending}>\r\n\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t<div className=\"edit-about\">\r\n\t\t\t\t\t\t<textarea ref={textareaRef} value={newAbout} onChange={e => setNewAbout(e.target.value)}></textarea>\r\n\t\t\t\t\t\t<PrimaryBtn isLoading={isAboutPending} disabled={isAboutPending} onClick={handleUpdateAbout}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t<SkeletonTheme highlightColor=\"#f5f5f5\" baseColor=\"#c4c4c4\">\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t\t<Skeleton width=\"100%\" height=\"10px\" />\r\n\t\t\t\t\t\t\t</SkeletonTheme>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<p>{user.about ? user.about : \"Write about yourself\"}</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t<SecondaryBtn color=\"red\" onClick={handleLogout} customStyle=\"margin-top: 20px;\">\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t</div>\r\n\t\t</ProfileEl>\r\n\t)\r\n}\r\nexport default memo(Profile)\r\n\r\nconst ProfileEl = styled.section`\r\n\twidth: 100%;\r\n\r\n\t.top {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 50px;\r\n\t\t.avatar {\r\n\t\t\tmargin-right: 50px;\r\n\t\t\timg {\r\n\t\t\t\twidth: 180px;\r\n\t\t\t\theight: 180px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.about-user {\r\n\t\t.about-header {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\tp {\r\n\t\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 10px;\r\n\t\t}\r\n\t}\r\n\t.edit-about {\r\n\t\twidth: 100%;\r\n\t\ttextarea {\r\n\t\t\twidth: 100%;\r\n\t\t\tmin-height: 200px;\r\n\t\t\theight: max-content;\r\n\t\t\tborder: none;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 10px;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.top {\r\n\t\t\t.avatar {\r\n\t\t\t\tmargin-right: 30px;\r\n\t\t\t\timg {\r\n\t\t\t\t\twidth: 130px;\r\n\t\t\t\t\theight: 130px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.text {\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { H2 } from \"./styles/Styles\"\r\n\r\nconst EmptyEl = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\timg {\r\n\t\tmax-width: 200px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n`\r\nconst EmptyState: FC<{ src: string; header: string }> = ({ src, header }) => {\r\n\treturn (\r\n\t\t<EmptyEl>\r\n\t\t\t<img src={src} alt=\"\" />\r\n\t\t\t<H2>{header}</H2>\r\n\t\t</EmptyEl>\r\n\t)\r\n}\r\nexport default EmptyState\r\n","import { useState, useEffect, FC, useContext } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { formatRelative } from \"date-fns\"\r\nimport EmptyState from \"../EmptyState\"\r\n\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\ntype AnimeComment = {\r\n\tcomment_id: string\r\n\ttext: string\r\n\tanime_id?: number\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n}\r\ntype CharacterComment = {\r\n\tcomment_id: string\r\n\ttext: string\r\n\tcharacter_id?: number\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n}\r\nconst Comments: FC = () => {\r\n\tconst [animeComments, setAnimeComments] = useState<AnimeComment[]>([])\r\n\tconst [characterComments, setCharacterComments] = useState<CharacterComment[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\r\n\t\tconst getComments = async () => {\r\n\t\t\tconst { data: animeData } = await client(\"/anime/comments/user\")\r\n\t\t\tconst { data: characterData } = await client(\"/characters/comments/user\")\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetAnimeComments(animeData)\r\n\t\t\t\tsetCharacterComments(characterData)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetComments()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<CommentsContainer>\r\n\t\t\t<H1>All comments</H1>\r\n\t\t\t{isLoading ? (\r\n\t\t\t\t<LoadingSpinner size={50} padding={100} />\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<H2>Anime comments</H2>\r\n\t\t\t\t\t{animeComments?.length ? (\r\n\t\t\t\t\t\tanimeComments.map(comment => <Comment key={comment.comment_id} comment={comment} />)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EmptyState src=\"/assets/images/empty_comments.png\" header=\"You have no comments\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<H2>Character comments</H2>\r\n\t\t\t\t\t{characterComments?.length ? (\r\n\t\t\t\t\t\tcharacterComments.map(comment => <Comment key={comment.comment_id} comment={comment} />)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EmptyState src=\"/assets/images/empty_comments.png\" header=\"You have no comments\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</CommentsContainer>\r\n\t)\r\n}\r\nexport default Comments\r\n\r\nconst Comment: FC<{ comment: AnimeComment & CharacterComment }> = ({ comment }) => {\r\n\tconst link = comment.character_id\r\n\t\t? `/character/${comment.character_id}`\r\n\t\t: `/anime/${comment.anime_id}`\r\n\tconst linkTitle = comment.character_id ? \"Character\" : \"Anime\"\r\n\treturn (\r\n\t\t<CommentBox>\r\n\t\t\t<p className=\"comment\">{comment.text}</p>\r\n\t\t\t<div className=\"meta\">\r\n\t\t\t\t<span>\r\n\t\t\t\t\tCommented on <Link to={link}>{linkTitle}</Link>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t{formatRelative(new Date(comment.created_at * 1000), new Date())}{\" \"}\r\n\t\t\t\t\t{comment.is_edited && \"(edited)\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</CommentBox>\r\n\t)\r\n}\r\n\r\nconst CommentsContainer = styled.section`\r\n\twidth: 100%;\r\n`\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tcolor: ${({ theme }) => theme.text};\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\r\n\tp.comment {\r\n\t\tcolor: ${({ theme }) => theme.header};\r\n\t\tmargin-bottom: 15px;\r\n\t\tfont-size: 1rem;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\t.meta {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tfont-size: 0.9rem;\r\n\t}\r\n\timg {\r\n\t\twidth: 20px;\r\n\t\tmargin-left: 20px;\r\n\t}\r\n`\r\n","import { formatRelative } from \"date-fns\"\r\nimport { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1 } from \"../styles/Styles\"\r\ninterface Thread {\r\n\tthread_id: string\r\n\ttopic: string\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n}\r\nconst DiscussionsStyle = styled.section`\r\n\t.thread {\r\n\t\tmargin-bottom: 15px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\t\th2 {\r\n\t\t\tfont-size: 1.5rem;\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tspan.date {\r\n\t\t\tcolor: grey;\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst Discussions: FC = () => {\r\n\tconst [threads, setThreads] = useState<Thread[] | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\t\tlet isMounted = true\r\n\t\tconst getData = async () => {\r\n\t\t\tconst { data } = await client(`/profile/threads`)\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetThreads(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetData()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<DiscussionsStyle>\r\n\t\t\t<H1>Threads</H1>\r\n\t\t\t{isLoading ? (\r\n\t\t\t\t<>Loading...</>\r\n\t\t\t) : (\r\n\t\t\t\tthreads?.map(thread => (\r\n\t\t\t\t\t<div className=\"thread\" key={thread.thread_id}>\r\n\t\t\t\t\t\t<Link to={`/discussions/threads/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t<h2>{thread.topic}</h2>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<span className=\"date\">\r\n\t\t\t\t\t\t\t{formatRelative(new Date(thread.created_at * 1000), new Date())}{\" \"}\r\n\t\t\t\t\t\t\t{thread.is_edited && \"(edited)\"}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))\r\n\t\t\t)}\r\n\t\t</DiscussionsStyle>\r\n\t)\r\n}\r\nexport default Discussions\r\n","import { useContext, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../../context/AppContext\"\r\nimport { UserContext } from \"../../../context/UserContext\"\r\nimport { PrimaryBtn } from \"../../styles/ButtonStyles\"\r\nimport { H2 } from \"../../styles/Styles\"\r\n\r\nexport default function Avatar() {\r\n\tconst inputRef = useRef<HTMLInputElement>(null)\r\n\tconst [fileInput, setFileInput] = useState<string>(\"\")\r\n\tconst [previewImg, setPreviewImg] = useState<any>(null)\r\n\tconst [b64Img, setB64Img] = useState<any>(null)\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst { avatar_url } = useContext(UserContext).user\r\n\tconst { showModalMessage, client } = useContext(AppContext)\r\n\tconst { setUser } = useContext(UserContext)\r\n\tconst handleFileInput = (e: any) => {\r\n\t\tif (!e.target.files[0]) return\r\n\t\tconst file = e.target.files[0]\r\n\t\tif (file.size / 1024 > 1500) {\r\n\t\t\tsetFileInput(\"\")\r\n\t\t\treturn showModalMessage(\"Image size must not exceed 1.5MB\", false)\r\n\t\t}\r\n\t\tsetMessage(\"\")\r\n\t\tsetFileInput(e.target.value)\r\n\t\tconst reader = new FileReader()\r\n\t\treader.readAsDataURL(file)\r\n\t\treader.onloadend = () => {\r\n\t\t\tsetB64Img(reader.result)\r\n\t\t\tsetPreviewImg(reader.result)\r\n\t\t}\r\n\t\treader.onerror = () => {\r\n\t\t\tshowModalMessage(\"Something went wrong\", false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tsetMessage(\"Loading...\")\r\n\t\tsetFileInput(\"\")\r\n\t\tif (!b64Img) return showModalMessage(\"Please select an image\", false)\r\n\t\tconst { ok } = await client(\"/profile/avatar\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: { avatar: b64Img },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetMessage(\"\")\r\n\t\tif (ok) {\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H2>Avatar</H2>\r\n\t\t\t<div className=\"avatar\">\r\n\t\t\t\t<InputSquare className=\"image\" onClick={() => inputRef?.current?.click()}>\r\n\t\t\t\t\t<div className=\"line\">\r\n\t\t\t\t\t\t<p>{message ? message : \"Click to choose an image\"}</p>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tdefaultValue={fileInput}\r\n\t\t\t\t\t\t\tonChange={handleFileInput}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InputSquare>\r\n\t\t\t\t{previewImg ? (\r\n\t\t\t\t\t<img className=\"image\" src={previewImg} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<img className=\"image\" src={avatar_url} alt=\"\" />\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<PrimaryBtn disabled={!fileInput} onClick={handleSubmit}>\r\n\t\t\t\tSave\r\n\t\t\t</PrimaryBtn>\r\n\t\t</Container>\r\n\t)\r\n}\r\nconst Container = styled.div`\r\n\t.avatar {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\timg {\r\n\t\tobject-fit: cover;\r\n\t\tmargin-left: 20px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\t.image {\r\n\t\twidth: 250px;\r\n\t\theight: 250px;\r\n\t}\r\n\t@media (max-width: 1024px) {\r\n\t\t.image {\r\n\t\t\twidth: 200px;\r\n\t\t\theight: 200px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\t.image {\r\n\t\t\twidth: 130px;\r\n\t\t\theight: 130px;\r\n\t\t}\r\n\t}\r\n`\r\nconst InputSquare = styled.div`\r\n\tcursor: pointer;\r\n\tborder-radius: 4px;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\tpadding: 20px;\r\n\t.line {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder: 2px gray dashed;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tinput {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\tp {\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\tpadding: 10px;\r\n\r\n\t\t.line {\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { useContext, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../../context/AppContext\"\r\nimport { UserContext } from \"../../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../../styles/ButtonStyles\"\r\nimport { H2 } from \"../../styles/Styles\"\r\ninterface Edit {\r\n\tisOpen: boolean\r\n\ttype: \"none\" | \"username\" | \"email\"\r\n}\r\nexport default function Credentials() {\r\n\tconst { user, setUser } = useContext(UserContext)\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst [edit, setEdit] = useState<Edit>({ isOpen: false, type: \"none\" })\r\n\tconst [newUsername, setNewUsername] = useState({ text: \"\", isPending: false })\r\n\tconst [newEmail, setNewEmail] = useState({ text: \"\", isPending: false })\r\n\r\n\tconst handleSubmitUsername = async () => {\r\n\t\tsetNewUsername(prev => ({ ...prev, isPending: true }))\r\n\t\tconst { ok } = await client(\"/profile/username\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t\tbody: { new_username: newUsername.text.trim() },\r\n\t\t})\r\n\t\tsetNewUsername(prev => ({ ...prev, isPending: false }))\r\n\t\tif (ok) {\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\tconst handleSubmitEmail = async () => {\r\n\t\tsetNewEmail(prev => ({ ...prev, isPending: true }))\r\n\t\tconst { ok } = await client(\"/user/update/email\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t\tbody: { newEmail: newEmail.text.trim() },\r\n\t\t})\r\n\t\tsetNewEmail(prev => ({ ...prev, isPending: false }))\r\n\t\tif (ok) {\r\n\t\t\tsetUser()\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"username\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H2>Username</H2>\r\n\t\t\t\t\t{edit.isOpen && edit.type === \"username\" ? (\r\n\t\t\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tonClick={() => setEdit({ isOpen: false, type: \"none\" })}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newUsername.isPending}\r\n\t\t\t\t\t\t\t\tonClick={handleSubmitUsername}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SecondaryBtn size=\"medium\" onClick={() => setEdit({ isOpen: true, type: \"username\" })}>\r\n\t\t\t\t\t\t\tChange\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{edit.isOpen && edit.type === \"username\" ? (\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\tvalue={newUsername.text}\r\n\t\t\t\t\t\tonChange={e => setNewUsername({ text: e.target.value, isPending: false })}\r\n\t\t\t\t\t\tplaceholder=\"New username...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"data\">{user.username}</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{/* <div className=\"email\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H2>Email</H2>\r\n\t\t\t\t\t{edit.isOpen && edit.type === \"email\" ? (\r\n\t\t\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tonClick={() => setEdit({ isOpen: false, type: \"none\" })}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tisLoading={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\t\t\tonClick={handleSubmitEmail}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SecondaryBtn size=\"medium\" onClick={() => setEdit({ isOpen: true, type: \"email\" })}>\r\n\t\t\t\t\t\t\tChange\r\n\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{edit.isOpen && edit.type === \"email\" ? (\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdisabled={newEmail.isPending}\r\n\t\t\t\t\t\tvalue={newEmail.text}\r\n\t\t\t\t\t\tonChange={e => setNewEmail({ text: e.target.value, isPending: false })}\r\n\t\t\t\t\t\tplaceholder=\"New email...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"data\">{user.email}</div>\r\n\t\t\t\t)}\r\n\t\t\t</div> */}\r\n\t\t\t<div className=\"password\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H2>Password</H2>\r\n\t\t\t\t\t<SecondaryBtn size=\"medium\" onClick={() => showModal(\"CHANGE_PASSWORD\", null)}>\r\n\t\t\t\t\t\tChange\r\n\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"data\">********</div>\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst Container = styled.div`\r\n\t.top {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 40px;\r\n\t}\r\n\t.data {\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 10px;\r\n\t\tmargin: 10px 0;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t}\r\n\t.buttons {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbutton {\r\n\t\t\tmargin-left: 10px;\r\n\t\t}\r\n\t}\r\n`\r\nconst Input = styled.input`\r\n\tdisplay: block;\r\n\tmin-width: 300px;\r\n\twidth: 100%;\r\n\theight: 30px;\r\n\tmargin: 25px 0;\r\n\tpadding: 0 5px;\r\n\tposition: relative;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n\tfont-size: 1.1rem;\r\n\tbox-shadow: 0px 0px 5px rgb(0 0 0 / 5%);\r\n\tbackground-color: white;\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: 0.95rem;\r\n\t}\r\n`\r\n","import styled from \"styled-components\"\r\nimport { H1 } from \"../../styles/Styles\"\r\nimport Avatar from \"./Avatar\"\r\nimport Credentials from \"./Credentials\"\r\n\r\nexport default function Settings() {\r\n\treturn (\r\n\t\t<SettingsContainer>\r\n\t\t\t<H1>Settings</H1>\r\n\t\t\t<div>\r\n\t\t\t\t<Avatar />\r\n\t\t\t\t<Credentials />\r\n\t\t\t</div>\r\n\t\t</SettingsContainer>\r\n\t)\r\n}\r\n\r\nconst SettingsContainer = styled.div`\r\n\twidth: 100%;\r\n`\r\n","import { FC, useContext, useEffect, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H1, H2 } from \"../styles/Styles\"\r\n\r\n// const UserCard = styled.div``\r\ninterface Relation {\r\n\tfollowings: {\r\n\t\tusername: string\r\n\t\tavatar_url: string\r\n\t}[]\r\n\tfollowers: {\r\n\t\tusername: string\r\n\t\tavatar_url: string\r\n\t}[]\r\n}\r\nconst Social: FC = () => {\r\n\tconst [relation, setRelation] = useState<Relation | null>(null)\r\n\tconst { client } = useContext(AppContext)\r\n\r\n\tconst getRelation = async () => {\r\n\t\tconst { ok, data } = await client(`/profile/follows`)\r\n\t\tif (ok) {\r\n\t\t\tsetRelation(data)\r\n\t\t\tconsole.log(data)\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tgetRelation()\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<SocialEl>\r\n\t\t\t<H1>Social</H1>\r\n\t\t\t<H2>Following</H2>\r\n\t\t\t<div className=\"list\">\r\n\t\t\t\t{relation?.followings?.map(following => (\r\n\t\t\t\t\t<Link key={following.username} className=\"user-link\" to={`/user/${following.username}`}>\r\n\t\t\t\t\t\t<img src={following.avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t\t\t<p>{following.username}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\r\n\t\t\t<H2>Followers</H2>\r\n\t\t\t<div className=\"list\">\r\n\t\t\t\t{relation?.followers.map(follower => (\r\n\t\t\t\t\t<Link key={follower.username} className=\"user-link\" to={`/user/${follower.username}`}>\r\n\t\t\t\t\t\t<img src={follower.avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t\t\t<p>{follower.username}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</SocialEl>\r\n\t)\r\n}\r\nexport default Social\r\n\r\nconst SocialEl = styled.div`\r\n\t.list {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t.user-link {\r\n\t\twidth: 100px;\r\n\t\tmargin-right: 10px;\r\n\t\tdisplay: block;\r\n\t\timg {\r\n\t\t\twidth: 100%;\r\n\t\t\tborder-radius: 10px;\r\n\t\t\taspect-ratio: 1 / 1;\r\n\t\t\tobject-fit: cover;\r\n\t\t}\r\n\t}\r\n`\r\n","import { useContext, useEffect } from \"react\"\r\nimport { useParams, useHistory } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport Favorites from \"../components/Account/Favorites\"\r\nimport Sidebar from \"../components/Account/Sidebar\"\r\nimport Profile from \"../components/Account/Profile\"\r\nimport Comments from \"../components/Account/Comments\"\r\nimport Discussions from \"../components/Account/Discussions\"\r\nimport Settings from \"../components/Account/Settings/Settings\"\r\nimport Social from \"../components/Account/Social\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\n\r\nexport default function User() {\r\n\tconst { category } = useParams<{ category: string }>()\r\n\tconst history = useHistory()\r\n\tconst { isLoading, isLoggedIn } = useContext(UserContext).user\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isLoggedIn && !isLoading) {\r\n\t\t\thistory.push(\"/login\")\r\n\t\t}\r\n\t}, [isLoggedIn, isLoading])\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"flex\">\r\n\t\t\t\t<Sidebar category={category} />\r\n\t\t\t\t{category === \"profile\" && <Profile />}\r\n\t\t\t\t{category === \"favorites\" && <Favorites />}\r\n\t\t\t\t{category === \"comments\" && <Comments />}\r\n\t\t\t\t{category === \"discussions\" && <Discussions />}\r\n\t\t\t\t{category === \"settings\" && <Settings />}\r\n\t\t\t\t{category === \"social\" && <Social />}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst Container = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: 50px auto;\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t}\r\n\timg.avatar {\r\n\t\twidth: 100px;\r\n\t}\r\n\t.preview-img {\r\n\t\theight: 200px;\r\n\t}\r\n\th1 {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\th2 {\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t\tmargin: 20px auto;\r\n\t\t.flex {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t}\r\n`\r\n","export interface Theme {\r\n\ttheme: \"light\" | \"dark\"\r\n\tbody: string\r\n\theader: string\r\n\ttext: string\r\n\tscrollbar: string\r\n\tboxShadow: string\r\n\tcommentBg: string\r\n}\r\nexport const lightTheme: Theme = {\r\n\ttheme: \"light\",\r\n\tbody: \"#edf1f5\",\r\n\theader: \"#3f4453\",\r\n\ttext: \"#4c5264\",\r\n\tscrollbar: \"#e4e4e4\",\r\n\tboxShadow: \"0px 0px 5px rgba(0, 0, 0, 0.05)\",\r\n\tcommentBg: \"white\",\r\n}\r\n\r\nexport const darkTheme: Theme = {\r\n\ttheme: \"dark\",\r\n\tbody: \"#161e29\",\r\n\theader: \"#f5f5f5\",\r\n\ttext: \"#d3d3d3\",\r\n\tscrollbar: \"darkgrey\",\r\n\tboxShadow: \"0px 0px 10px 3px rgba(255, 255, 255, 0.3)\",\r\n\tcommentBg: \"#32343b\",\r\n}\r\n","import styled from \"styled-components\"\r\n\r\nconst FooterEl = styled.footer`\r\n\tbackground-color: #32343b;\r\n\t/* position: absolute; */\r\n\t/* bottom: 0; */\r\n\t/* left: 0; */\r\n\t/* right: 0; */\r\n\t.footer-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 1200px;\r\n\t\tmargin: 0 auto;\r\n\t\tpadding: 10px 50px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t.logo {\r\n\t\t\tcolor: rgb(255, 255, 255);\r\n\t\t\tfont-size: 2rem;\r\n\t\t\tfont-weight: 600;\r\n\t\t\twidth: 230px;\r\n\t\t\tfilter: invert(0.2);\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: \"Find\";\r\n\t\t\t\tcolor: #70c7a7;\r\n\t\t\t}\r\n\t\t}\r\n\t\tspan {\r\n\t\t\tcolor: #eeeeee;\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tsmall {\r\n\t\t\t\tcolor: rgb(207, 83, 83);\r\n\t\t\t}\r\n\t\t}\r\n\t\tp {\r\n\t\t\tcolor: #eeeeee;\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\twidth: 230px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 768px) {\r\n\t\t.footer-container {\r\n\t\t\tpadding: 10px 0;\r\n\t\t\tflex-direction: column;\r\n\t\t\t.logo,\r\n\t\t\tp {\r\n\t\t\t\twidth: max-content;\r\n\t\t\t\tmargin: 10px 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 480px) {\r\n\t\t.footer-container {\r\n\t\t\t.logo {\r\n\t\t\t\tfont-size: 2rem;\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin: 5px 0;\r\n\t\t\t}\r\n\t\t\tspan,\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nexport default function Footer() {\r\n\treturn (\r\n\t\t<FooterEl>\r\n\t\t\t<div className=\"footer-container\">\r\n\t\t\t\t<div className=\"logo\">Ani</div>\r\n\t\t\t\t<span>\r\n\t\t\t\t\tCreated with <small>❤</small> by Sultan\r\n\t\t\t\t</span>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tEmail:\r\n\t\t\t\t\t<a href=\"mailto:turan.sultann@gmail.com\">turan.sultann@gmail.com</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</FooterEl>\r\n\t)\r\n}\r\n","import { createRef, FC, RefObject, useContext, useEffect } from \"react\"\r\nimport { createPortal } from \"react-dom\"\r\nimport styled from \"styled-components\"\r\nimport { CSSTransition } from \"react-transition-group\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\n\r\nconst ModalMessage: FC = () => {\r\n\tconst { modalMessage, showModalMessage, hideModalMessage } = useContext(AppContext)\r\n\tconst { text, isSuccess } = modalMessage\r\n\tconst ref = createRef<HTMLDivElement>()\r\n\r\n\tuseEffect(() => {\r\n\t\tif (text) {\r\n\t\t\tconst close = setTimeout(() => {\r\n\t\t\t\thideModalMessage()\r\n\t\t\t}, 3000)\r\n\t\t\treturn () => clearTimeout(close)\r\n\t\t}\r\n\t}, [text])\r\n\r\n\treturn createPortal(\r\n\t\t<CSSTransition\r\n\t\t\tnodeRef={ref}\r\n\t\t\tin={text ? true : false}\r\n\t\t\ttimeout={200}\r\n\t\t\tclassNames=\"message\"\r\n\t\t\tunmountOnExit>\r\n\t\t\t<Container isSuccess={isSuccess} ref={ref}>\r\n\t\t\t\t<p>{text}</p>\r\n\t\t\t\t<span onClick={hideModalMessage}>&#10006;</span>\r\n\t\t\t</Container>\r\n\t\t</CSSTransition>,\r\n\t\tdocument.querySelector(\"#root\")!\r\n\t)\r\n}\r\nexport default ModalMessage\r\n\r\nconst Container = styled.div<{ isSuccess: boolean }>`\r\n\tposition: fixed;\r\n\ttop: 0px;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, 50px);\r\n\tbackground: ${({ isSuccess }) => (isSuccess ? \"#c3f1c7\" : \"#e4c4c4\")};\r\n\tpadding: 10px;\r\n\tborder-radius: 4px;\r\n\theight: max-content;\r\n\twidth: 400px;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tz-index: 2;\r\n\tp {\r\n\t\tcolor: ${({ isSuccess }) => (isSuccess ? \"#00915c\" : \"#C2185B\")};\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\tspan {\r\n\t\tfont-size: 1.2rem;\r\n\t\tcursor: pointer;\r\n\t\tcolor: #303030;\r\n\t}\r\n\t&.message-enter {\r\n\t\ttransform: translate(-50%, 0px);\r\n\t\ttransition: 200ms;\r\n\t\topacity: 0;\r\n\t}\r\n\t&.message-enter-active {\r\n\t\ttransform: translate(-50%, 50px);\r\n\t\ttransition: 200ms;\r\n\t\topacity: 1;\r\n\t}\r\n\t&.message-exit {\r\n\t\ttransform: translate(-50%, 50px);\r\n\t\ttransition: 200ms;\r\n\t}\r\n\t&.message-exit-active {\r\n\t\ttransform: translate(-50%, 0px);\r\n\t\ttransition: 200ms;\r\n\t\topacity: 0;\r\n\t}\r\n\t@media (max-width: 480px) {\r\n\t\twidth: calc(100% - 40px);\r\n\t\tp {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, useContext, useState } from \"react\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport styled, { css } from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { useHistory } from \"react-router\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\n// const PrimaryBtnStyle = css`\r\n// \tpadding: 5px;\r\n// `.toString()\r\n// export const ChangeUsernameModal: FC = () => {\r\n// \tconst [newUsername, setNewUsername] = useState(\"\")\r\n// \tconst [isLoading, setIsLoading] = useState(false)\r\n// \tconst { hideModal, client } = useContext(AppContext)\r\n// \tconst { changeUserData } = useContext(UserContext)\r\n\r\n// \tconst handleSubmit = async () => {\r\n// \t\tsetIsLoading(true)\r\n// \t\tconst { ok } = await client(\"/user/update/username\", {\r\n// \t\t\tmethod: \"PUT\",\r\n// \t\t\tbody: {\r\n// \t\t\t\tdata: newUsername,\r\n// \t\t\t},\r\n// \t\t\tshouldShowMessage: \"default\",\r\n// \t\t})\r\n\r\n// \t\tif (ok) {\r\n// \t\t\tchangeUserData(\"username\", newUsername)\r\n// \t\t}\r\n// \t\tsetIsLoading(false)\r\n// \t}\r\n// \treturn (\r\n// \t\t<>\r\n// \t\t\t<H2>Change username</H2>\r\n// \t\t\t<Input\r\n// \t\t\t\ttype=\"text\"\r\n// \t\t\t\tvalue={newUsername}\r\n// \t\t\t\tonChange={e => setNewUsername(e.target.value)}\r\n// \t\t\t\tplaceholder=\"New username\"\r\n// \t\t\t/>\r\n// \t\t\t<div className=\"buttons\">\r\n// \t\t\t\t<SecondaryBtn className=\"cancel\" onClick={() => hideModal()} disabled={isLoading}>\r\n// \t\t\t\t\tCancel\r\n// \t\t\t\t</SecondaryBtn>\r\n// \t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading} isLoading={isLoading}>\r\n// \t\t\t\t\tSubmit\r\n// \t\t\t\t</PrimaryBtn>\r\n// \t\t\t</div>\r\n// \t\t</>\r\n// \t)\r\n// }\r\n// export const ChangeEmailModal = () => {\r\n// \tconst [newEmail, setNewEmail] = useState(\"\")\r\n// \tconst [isLoading, setIsLoading] = useState(false)\r\n// \tconst { hideModal, client } = useContext(AppContext)\r\n// \tconst { changeUserData } = useContext(UserContext)\r\n\r\n// \tconst handleSubmit = async () => {\r\n// \t\tsetIsLoading(true)\r\n// \t\tconst { ok } = await client(\"/user/update/email\", {\r\n// \t\t\tmethod: \"PUT\",\r\n// \t\t\tbody: {\r\n// \t\t\t\tdata: newEmail,\r\n// \t\t\t},\r\n// \t\t\tshouldShowMessage: \"default\",\r\n// \t\t})\r\n\r\n// \t\tif (ok) {\r\n// \t\t\tchangeUserData(\"username\", newEmail)\r\n// \t\t}\r\n// \t\tsetIsLoading(false)\r\n// \t}\r\n\r\n// \treturn (\r\n// \t\t<>\r\n// \t\t\t<H2>Change email</H2>\r\n// \t\t\t<Input\r\n// \t\t\t\ttype=\"text\"\r\n// \t\t\t\tvalue={newEmail}\r\n// \t\t\t\tonChange={e => setNewEmail(e.target.value)}\r\n// \t\t\t\tplaceholder=\"New email\"\r\n// \t\t\t/>\r\n// \t\t\t<div className=\"buttons\">\r\n// \t\t\t\t<SecondaryBtn className=\"cancel\" onClick={() => hideModal()} disabled={isLoading}>\r\n// \t\t\t\t\tCancel\r\n// \t\t\t\t</SecondaryBtn>\r\n// \t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading} isLoading={isLoading}>\r\n// \t\t\t\t\tSubmit\r\n// \t\t\t\t</PrimaryBtn>\r\n// \t\t\t</div>\r\n// \t\t</>\r\n// \t)\r\n// }\r\nexport const ChangePasswordModal = () => {\r\n\tconst { hideModal, client, showModalMessage } = useContext(AppContext)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [oldPassword, setOldPassword] = useState(\"\")\r\n\tconst [newPassword, setNewPassword] = useState(\"\")\r\n\tconst [newPassword2, setNewPassword2] = useState(\"\")\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tif (newPassword !== newPassword2) {\r\n\t\t\tsetIsLoading(false)\r\n\r\n\t\t\treturn showModalMessage(`Passwords don't match`, false)\r\n\t\t}\r\n\r\n\t\tconst { ok } = await client(\"/user/update/password\", {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: {\r\n\t\t\t\toldPassword,\r\n\t\t\t\tnewPassword,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\thideModal()\r\n\t\t}\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Change password</H2>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tvalue={oldPassword}\r\n\t\t\t\tonChange={e => setOldPassword(e.target.value)}\r\n\t\t\t\tplaceholder=\"Current password\"\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tvalue={newPassword}\r\n\t\t\t\tonChange={e => setNewPassword(e.target.value)}\r\n\t\t\t\tplaceholder=\"New password\"\r\n\t\t\t/>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tvalue={newPassword2}\r\n\t\t\t\tonChange={e => setNewPassword2(e.target.value)}\r\n\t\t\t\tplaceholder=\"Confirm new password\"\r\n\t\t\t/>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn className=\"cancel\" onClick={() => hideModal()} disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport const DeleteCommentModal = () => {\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { hideModal, modal, client } = useContext(AppContext)\r\n\tconst { comment, getComments, type } = modal.props\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok } = await client(`/${type}/comments/${comment.comment_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t\thideModal()\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Delete comment</H2>\r\n\t\t\t<p>\r\n\t\t\t\tAre you sure you want to delete the comment? <br />\r\n\t\t\t\t<span>{comment.text}</span>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={hideModal} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleDelete} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport const DeleteThreadModal = () => {\r\n\tconst { hideModal, modal, client } = useContext(AppContext)\r\n\r\n\tconst { thread, getThread, history } = modal.props\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\tconst handleDelete = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok, data } = await client(`/discussions/threads/${thread.thread_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetIsLoading(false)\r\n\t\tif (ok) {\r\n\t\t\tif (data.status === \"hard_delete\") {\r\n\t\t\t\thistory.replace(\"/discussions\")\r\n\t\t\t} else {\r\n\t\t\t\tgetThread()\r\n\t\t\t}\r\n\t\t\thideModal()\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Delete thread</H2>\r\n\t\t\t<p>\r\n\t\t\t\tAre you sure you want to delete the thread? <br />\r\n\t\t\t\t<span>{thread.topic}</span>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={hideModal} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleDelete} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport const DeletePostModal = () => {\r\n\tconst { hideModal, modal, client } = useContext(AppContext)\r\n\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\tconst { post, getPosts } = modal.props\r\n\r\n\tconst handleDeletePost = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok } = await client(`/discussion/post/${post.post_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetPosts()\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t\thideModal()\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Delete post</H2>\r\n\t\t\t<p>\r\n\t\t\t\tAre you sure you want to delete this post? <br />\r\n\t\t\t\t<span>{post.body}</span>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={() => hideModal()} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleDeletePost} disabled={isLoading} isLoading={isLoading}>\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport const OpenThreadModal: FC = () => {\r\n\tconst [topic, setTopic] = useState(\"\")\r\n\tconst [body, setBody] = useState(\"\")\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst history = useHistory()\r\n\tconst { hideModal } = useContext(AppContext)\r\n\tconst handleSubmit = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { data, ok } = await client(\"/discussions/threads/\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { topic, body },\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\r\n\t\tif (ok) {\r\n\t\t\thideModal()\r\n\t\t\thistory.push(`/discussions/threads/${data.thread_id}`)\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<H2>Open a Thread</H2>\r\n\t\t\t<Input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tplaceholder=\"Thread Topic\"\r\n\t\t\t\tdefaultValue={topic}\r\n\t\t\t\tonChange={e => setTopic(e.target.value)}\r\n\t\t\t\tdisabled={isLoading}\r\n\t\t\t/>\r\n\t\t\t<Textarea\r\n\t\t\t\tplaceholder=\"What to you want to discuss?\"\r\n\t\t\t\tdefaultValue={body}\r\n\t\t\t\tdisabled={isLoading}\r\n\t\t\t\tonChange={e => setBody(e.target.value)}></Textarea>\r\n\t\t\t<div className=\"buttons\">\r\n\t\t\t\t<SecondaryBtn onClick={hideModal} className=\"cancel\" disabled={isLoading}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t<PrimaryBtn onClick={handleSubmit} disabled={isLoading}>\r\n\t\t\t\t\tCreate a thread\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst Input = styled.input`\r\n\tdisplay: block;\r\n\tmin-width: 300px;\r\n\twidth: 100%;\r\n\theight: 30px;\r\n\tmargin: 25px 0;\r\n\tpadding: 0 5px;\r\n\tposition: relative;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n\tfont-size: 1.1rem;\r\n\tbox-shadow: 0px 0px 5px rgb(0 0 0 / 5%);\r\n\tbackground-color: white;\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: 0.95rem;\r\n\t}\r\n`\r\nconst Textarea = styled.textarea`\r\n\tmargin: 5px 0;\r\n\tpadding: 5px;\r\n\twidth: 600px;\r\n\theight: 300px;\r\n\tfont-size: 1rem;\r\n\tborder-radius: 4px;\r\n\tborder: none;\r\n\t@media (max-width: 640px) {\r\n\t\tfont-size: 0.9rem;\r\n\t}\r\n`\r\n","import { FC, useContext } from \"react\"\r\nimport ReactDom from \"react-dom\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport {\r\n\t// ChangeEmailModal,\r\n\tChangePasswordModal,\r\n\t// ChangeUsernameModal,\r\n\tOpenThreadModal,\r\n\tDeleteThreadModal,\r\n\tDeletePostModal,\r\n\tDeleteCommentModal,\r\n\t// DeletePostModal,\r\n} from \"./Modals\"\r\n\r\nconst MODAL_COMPONENTS = {\r\n\t// CHANGE_USERNAME: ChangeUsernameModal,\r\n\t// CHANGE_EMAIL: ChangeEmailModal,\r\n\tCHANGE_PASSWORD: ChangePasswordModal,\r\n\tOPEN_THREAD: OpenThreadModal,\r\n\tDEFAULT: () => null,\r\n\tDELETE_THREAD: DeleteThreadModal,\r\n\tDELETE_POST: DeletePostModal,\r\n\tDELETE_COMMENT: DeleteCommentModal,\r\n}\r\nexport default function RootModal() {\r\n\tconst { isOpen, type } = useContext(AppContext).modal\r\n\tif (!isOpen) return null\r\n\tconst CurrentModal: FC = MODAL_COMPONENTS[type] || null\r\n\r\n\treturn ReactDom.createPortal(\r\n\t\t<ModalContainer>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<CurrentModal />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ModalContainer>,\r\n\t\tdocument.querySelector(\".App\")!\r\n\t)\r\n}\r\n\r\nconst ModalContainer = styled.div`\r\n\tposition: fixed;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\ttop: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\r\n\t.container {\r\n\t\twidth: max-content;\r\n\t\tbackground: ${({ theme }) => theme.body};\r\n\t\tpadding: 25px;\r\n\t\tborder-radius: 4px;\r\n\t\th2,\r\n\t\tp {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\t}\r\n\t.buttons {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.container {\r\n\t\t\twidth: calc(100% - 40px);\r\n\t\t\ttextarea {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tfont-size: 0.95rem;\r\n\t\t\t}\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","const query = `\r\nquery($id: Int){\r\n  Character(id: $id) {\r\n    id\r\n    name {\r\n      first\r\n      last\r\n      full\r\n      native\r\n      alternative\r\n    }\r\n    description\r\n    image {\r\n      large\r\n    }\r\n\t\t media(type: ANIME) {\r\n      edges {\r\n        node {\r\n\t\t\t\t\tid\r\n          type\r\n          title {\r\n            romaji\r\n            english\r\n            native\r\n            userPreferred\r\n          }\r\n\t\t\t\t\t coverImage {\r\n            extraLarge\r\n            large\r\n            medium\r\n            color\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n`\r\nconst characterQuery = async (character_id: number) => {\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tquery,\r\n\t\t\t\tvariables: { id: character_id },\r\n\t\t\t}),\r\n\t\t}\r\n\tconst res = await fetch(url, options)\r\n\r\n\tconst json = await res.json()\r\n\treturn json.data.Character\r\n}\r\nexport default characterQuery\r\n","import { FC, useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport UserLink from \"../UserLink\"\r\nexport type CommentType = {\r\n\tuser_id: string\r\n\tcomment_id: number\r\n\tusername: string\r\n\tavatar_url: string\r\n\tcreated_at: number\r\n\tis_edited: boolean\r\n\ttext: string\r\n}\r\ntype CommentProps = {\r\n\tcomment: CommentType\r\n\tgetComments: () => Promise<void>\r\n}\r\nconst Comment: FC<CommentProps> = ({ comment, getComments }) => {\r\n\tconst [newComment, setNewComment] = useState(comment.text)\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [pending, setPending] = useState(false)\r\n\tconst { id } = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst textareaRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isEditOpen && !pending) {\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t}, [comment])\r\n\r\n\tconst handleEditSubmit = async () => {\r\n\t\tsetPending(true)\r\n\t\tconst { ok } = await client(`/characters/comments/${comment.comment_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: { text: newComment },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t}\r\n\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetPending(false)\r\n\t}\r\n\tuseLayoutEffect(() => {\r\n\t\tif (textareaRef.current != null) {\r\n\t\t\tconst scrollHeight = textareaRef.current.scrollHeight\r\n\t\t\ttextareaRef.current.style.height = scrollHeight + \"px\"\r\n\t\t\tif (isEditOpen) {\r\n\t\t\t\ttextareaRef.current.selectionStart = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.selectionEnd = textareaRef.current.value.length\r\n\t\t\t\ttextareaRef.current.focus()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [textareaRef.current, isEditOpen])\r\n\treturn (\r\n\t\t<CommentBox>\r\n\t\t\t<div className=\"top-bar\">\r\n\t\t\t\t<UserLink\r\n\t\t\t\t\tusername={comment.username}\r\n\t\t\t\t\tavatar_url={comment.avatar_url}\r\n\t\t\t\t\tdate={comment.created_at}\r\n\t\t\t\t\tisEdited={comment.is_edited}\r\n\t\t\t\t/>\r\n\t\t\t\t{id === comment.user_id && (\r\n\t\t\t\t\t<div className=\"actions\">\r\n\t\t\t\t\t\t{isEditOpen ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={() => setIsEditOpen(false)} disabled={pending}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left:15px;\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditSubmit}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<SecondaryBtn size=\"small\" onClick={() => setIsEditOpen(true)} disabled={pending}>\r\n\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcustomStyle=\"margin-left: 15px;\"\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tshowModal(\"DELETE_COMMENT\", { getComments, comment, type: \"characters\" })\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdisabled={pending}>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{isEditOpen ? (\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tref={textareaRef}\r\n\t\t\t\t\tname=\"newComment\"\r\n\t\t\t\t\tdefaultValue={newComment}\r\n\t\t\t\t\tonChange={e => setNewComment(e.target.value)}></textarea>\r\n\t\t\t) : (\r\n\t\t\t\t<p className=\"comment\">{comment.text}</p>\r\n\t\t\t)}\r\n\t\t</CommentBox>\r\n\t)\r\n}\r\nexport default Comment\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\t.top-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.comment-data {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.user-data {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\t.username {\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t\t.date {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tcolor: grey;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\tp {\r\n\t\tmargin-top: 15px;\r\n\t\twhite-space: pre-line;\r\n\t}\r\n\ttextarea {\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 5px;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 1rem;\r\n\t\theight: unset;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tp,\r\n\t\ttextarea {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n/*\r\nconst CommentBox = styled.div`\r\n\tborder-radius: 4px;\r\n\tpadding: 15px;\r\n\tmargin: 10px 0;\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\t.top-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.comment-data {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t.user-data {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 30px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tborder-radius: 4px;\r\n\t\t}\r\n\t\t.username {\r\n\t\t\tcolor: #70c7a7;\r\n\t\t}\r\n\t\t.date {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t\tmargin-left: 20px;\r\n\t\t\tcolor: grey;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\tp {\r\n\t\tmargin-top: 15px;\r\n\t}\r\n\ttextarea {\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 5px;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 1rem;\r\n\t\theight: auto;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t}\r\n`\r\n*/\r\n","import { FC, FormEvent, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport Comment, { CommentType } from \"./Comment\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\ntype Props = {\r\n\tcharacter_id: number\r\n}\r\n\r\nconst Comments: FC<Props> = ({ character_id }) => {\r\n\tconst [comments, setComments] = useState<CommentType[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [isSending, setIsSending] = useState(false)\r\n\tconst { client } = useContext(AppContext)\r\n\tconst getComments = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconst { data } = await client(`/characters/comments/${character_id}`)\r\n\t\tsetComments(data)\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tclient(`/characters/comments/${character_id}`).then(({ data }) => {\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetComments(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst [text, setText] = useState(\"\")\r\n\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsSending(true)\r\n\t\tconst { ok } = await client(`/characters/comments/${character_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { text },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getComments()\r\n\t\t\tsetText(\"\")\r\n\t\t}\r\n\t\tsetIsSending(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<H2>Comments</H2>\r\n\t\t\t<CommentForm onSubmit={handleSubmit}>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\tonChange={e => setText(e.target.value)}\r\n\t\t\t\t\tdisabled={isSending}\r\n\t\t\t\t\tvalue={text}\r\n\t\t\t\t\tplaceholder=\"Add your comment\"></textarea>\r\n\t\t\t\t<br />\r\n\t\t\t\t<PrimaryBtn disabled={isSending} customStyle=\"padding: 7px 10px; font-size: 1.2rem;\">\r\n\t\t\t\t\tSend\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</CommentForm>\r\n\t\t\t<div className=\"all-comments\">\r\n\t\t\t\t{isLoading ? <LoadingSpinner size={50} /> : null}\r\n\t\t\t\t{comments?.map(comment => (\r\n\t\t\t\t\t<Comment key={comment.comment_id} comment={comment} getComments={getComments} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\nexport default Comments\r\n\r\nconst Container = styled.section`\r\n\twidth: 100%;\r\n\tmargin: auto;\r\n\r\n\t.all-comments {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n`\r\nconst CommentForm = styled.form`\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1.2rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\ttextarea {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport marked from \"marked\"\r\nimport characterQuery from \"../api/anime/characterAPI\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport Comments from \"../components/Character/Comments\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\nmarked.setOptions({ breaks: true })\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tid: number\r\n\t\t}\r\n\t}\r\n}\r\ninterface Character {\r\n\tcharacter_id: number\r\n\timage: {\r\n\t\tlarge: string\r\n\t\textraLarge: string\r\n\t}\r\n\tname: {\r\n\t\tfull: string\r\n\t}\r\n\tdescription: string\r\n\tmedia: {\r\n\t\tedges: any\r\n\t}\r\n}\r\n\r\nconst CharacterPage: FC<Props> = ({ match }) => {\r\n\tconst character_id = match.params.id\r\n\tconst [character, setCharacter] = useState<Character | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [favCharacter, setFavCharacter] = useState({ isFavorite: false, isLoading: true })\r\n\tconst { client } = useContext(AppContext)\r\n\tconst [isSmallScreen, setIsSmallScreen] = useState(false)\r\n\tconst [width] = useWindowSize()\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tcharacterQuery(character_id).then(data => {\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetCharacter(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\tclient(`/characters/favorites/is-favorite/${character_id}`).then(({ ok, data }) => {\r\n\t\t\tif (ok) {\r\n\t\t\t\tsetFavCharacter({ isFavorite: data.is_favorite, isLoading: false })\r\n\t\t\t} else {\r\n\t\t\t\tsetFavCharacter({ isFavorite: false, isLoading: false })\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\tuseEffect(() => {\r\n\t\tsetIsSmallScreen(width < 768)\r\n\t}, [width])\r\n\r\n\tconst handleAddToFavorites = async () => {\r\n\t\tsetFavCharacter({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/characters/favorites`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tcharacter_id,\r\n\t\t\t\tcover_image: character?.image.large,\r\n\t\t\t\tname: character?.name.full,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tsetFavCharacter(prev => ({ isFavorite: ok ? true : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\r\n\tconst handleRemoveFromFavorites = async () => {\r\n\t\tsetFavCharacter({ isFavorite: false, isLoading: true })\r\n\t\tconst { ok } = await client(`/characters/favorites/${character_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tsetFavCharacter(prev => ({ isFavorite: ok ? false : prev.isFavorite, isLoading: false }))\r\n\t}\r\n\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<CharacterPageEl>\r\n\t\t\t<section className=\"top\">\r\n\t\t\t\t{isSmallScreen && <H1>{character?.name.full}</H1>}\r\n\t\t\t\t<div className=\"image\">\r\n\t\t\t\t\t<img src={character?.image.extraLarge || character?.image.large} alt=\"\" />\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tcolor={favCharacter.isFavorite ? \"red\" : \"green\"}\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tfavCharacter.isFavorite ? handleRemoveFromFavorites() : handleAddToFavorites()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdisabled={favCharacter.isLoading}\r\n\t\t\t\t\t\tisLoading={favCharacter.isLoading}>\r\n\t\t\t\t\t\t{favCharacter.isFavorite ? \"Remove\" : \"Add to Favorites\"}\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text\">\r\n\t\t\t\t\t{!isSmallScreen && <H1>{character?.name.full}</H1>}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t__html: character?.description ? marked(character?.description!) : \"\",\r\n\t\t\t\t\t\t}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"relation\">\r\n\t\t\t\t<H2>Appears in</H2>\r\n\t\t\t\t<RelationCardList>\r\n\t\t\t\t\t{character!.media.edges.map(({ node }: any) => (\r\n\t\t\t\t\t\t<RelationCard key={node.id}>\r\n\t\t\t\t\t\t\t<Link to={`/anime/${node.id}`}>\r\n\t\t\t\t\t\t\t\t<img src={node.coverImage.extraLarge || node.coverImage.large} alt=\"\" />\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<p>{node.title.english || node.title.romaji}</p>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</RelationCard>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</RelationCardList>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"comments\">\r\n\t\t\t\t<Comments character_id={character_id} />\r\n\t\t\t</section>\r\n\t\t</CharacterPageEl>\r\n\t)\r\n}\r\nexport default memo(CharacterPage)\r\nconst CharacterPageEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 20px;\r\n\t}\r\n\tsection.top {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\theight: max-content;\r\n\t\t.text {\r\n\t\t\twidth: 70%;\r\n\t\t\tp {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t\tdel {\r\n\t\t\t\tbackground-color: ${({ theme }) => theme.text};\r\n\t\t\t\t:hover {\r\n\t\t\t\t\tbackground-color: unset;\r\n\t\t\t\t\ttext-decoration: none;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.image {\r\n\t\t\twidth: 30%;\r\n\t\t\tmargin-right: 50px;\r\n\t\t\timg {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tbox-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsection.relation {\r\n\t\tmargin: 30px 0;\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\tsection.top {\r\n\t\t\tflex-direction: column;\r\n\t\t\th1 {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t\t.text {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin-top: 20px;\r\n\t\t\t\tp {\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.image {\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\timg {\r\n\t\t\t\t\twidth: 200px;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tmargin: 0 auto;\r\n\t\t\t\t\tmargin-bottom: 20px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nconst RelationCardList = styled.section`\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(5, 1fr);\r\n\tcolumn-gap: 20px;\r\n\trow-gap: 20px;\r\n\t@media (max-width: 720px) {\r\n\t\tgrid-template-columns: repeat(4, 1fr);\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t}\r\n`\r\nconst RelationCard = styled.div`\r\n\twidth: 100%;\r\n\timg {\r\n\t\tborder-radius: 7px;\r\n\t\taspect-ratio: 2 / 3;\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tobject-fit: cover;\r\n\t}\r\n`\r\n","import { useContext, useEffect, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { H1 } from \"../components/styles/Styles\"\r\nimport UserLink from \"../components/UserLink\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\ntype Thread = {\r\n\tthread_id: string\r\n\tavatar_url: string\r\n\tusername: string\r\n\ttopic: string\r\n\tbody: string\r\n\tcreated_at: number\r\n}\r\nexport default function DiscussionListPage() {\r\n\tconst [threads, setThreads] = useState<Thread[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst [width] = useWindowSize()\r\n\tuseEffect(() => {\r\n\t\tlet isMounted = true\r\n\t\tclient(\"/discussions/threads\").then(({ data }) => {\r\n\t\t\tif (isMounted) {\r\n\t\t\t\tsetThreads(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<PageEl>\r\n\t\t\t<Header>\r\n\t\t\t\t<H1>Discussions</H1>\r\n\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\tsize={width > 768 ? \"medium\" : \"small\"}\r\n\t\t\t\t\tonClick={() => showModal(\"OPEN_THREAD\", null)}>\r\n\t\t\t\t\tOpen a Thread\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t</Header>\r\n\t\t\t<p className=\"intro\">Join open discussions about anime or open your own thread.</p>\r\n\r\n\t\t\t{!isLoading && threads.length\r\n\t\t\t\t? threads.map(thread => (\r\n\t\t\t\t\t\t<ThreadCard key={thread.thread_id}>\r\n\t\t\t\t\t\t\t<Link className=\"thread-link\" to={`/discussions/threads/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t\t<h2>{thread.topic}</h2>\r\n\t\t\t\t\t\t\t\t<p>{thread.body}</p>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\tusername={thread.username}\r\n\t\t\t\t\t\t\t\tavatar_url={thread.avatar_url}\r\n\t\t\t\t\t\t\t\tdate={thread.created_at}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ThreadCard>\r\n\t\t\t\t  ))\r\n\t\t\t\t: \"Loading...\"}\r\n\t\t</PageEl>\r\n\t)\r\n}\r\nconst Header = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tbutton {\r\n\t\tflex-shrink: 0;\r\n\t}\r\n`\r\nconst PageEl = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 20px;\r\n\t}\r\n\r\n\tp.intro {\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin-bottom: 20px;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\nconst ThreadCard = styled.div`\r\n\tbackground: ${({ theme }) => theme.commentBg};\r\n\tborder-radius: 4px;\r\n\tpadding: 20px;\r\n\tmargin: 20px 0;\r\n\ta.thread-link {\r\n\t\th2 {\r\n\t\t\tfont-size: 1.5rem;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\tfont-weight: 700;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t}\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\tp {\r\n\t\t\tmargin: 10px 0;\r\n\t\t\t@media (max-width: 640px) {\r\n\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC } from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst LikeEl = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twidth: max-content;\r\n\tspan.count {\r\n\t\tfont-size: 1.1rem;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-right: 5px;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n\tbutton.heart {\r\n\t\tfont-size: 1.5rem;\r\n\t\tcolor: #ff5050;\r\n\t\tcursor: pointer;\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell,\r\n\t\t\t\"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n\t\tborder: none;\r\n\t\tbackground: transparent;\r\n\t\t&:disabled {\r\n\t\t\tcolor: #636262;\r\n\t\t}\r\n\t}\r\n`\r\ninterface Props {\r\n\tcount: number\r\n\tisLiked: boolean\r\n\tisPending: boolean\r\n\tonClick: () => void\r\n}\r\nconst Like: FC<Props> = ({ count, isLiked, onClick, isPending }) => {\r\n\tconst style = {\r\n\t\tclassName: isLiked ? \"heart liked\" : \"heart unliked\",\r\n\t\ticonCode: isLiked ? \"&#x2665;\" : \"&#x2661;\",\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LikeEl>\r\n\t\t\t<span className=\"count\">{!!Number(count) && count}</span>\r\n\t\t\t<button\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tdisabled={isPending}\r\n\t\t\t\tclassName={style.className}\r\n\t\t\t\tdangerouslySetInnerHTML={{ __html: style.iconCode }}></button>\r\n\t\t</LikeEl>\r\n\t)\r\n}\r\nexport default Like\r\n","import { FC, memo, useContext, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport Like from \"../Like\"\r\nimport UserLink from \"../UserLink\"\r\nimport { Post } from \"./Posts\"\r\ninterface Props {\r\n\tpost: Post\r\n\tdepth?: number\r\n\tthread: {\r\n\t\tthread_id: string\r\n\t\tis_deleted: boolean\r\n\t}\r\n\tgetPosts: () => Promise<void>\r\n}\r\nconst RenderPosts: FC<Props> = ({ post, depth = 0, thread, getPosts }) => {\r\n\tconst [isCommentFieldOpen, setIsCommentFieldOpen] = useState(false)\r\n\tconst [newPost, setNewPost] = useState({ isLoading: false, text: \"\" })\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [editedPost, setEditedPost] = useState({ isLoading: false, text: post.body })\r\n\tconst user = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tconst [isLikePending, setIsLikePending] = useState(false)\r\n\r\n\tconst handlePostSubmit = async () => {\r\n\t\tsetNewPost(prev => ({ ...prev, isLoading: true }))\r\n\t\tconst { ok } = await client(`/discussions/threads/${thread.thread_id}/posts`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tparent_id: post.post_id,\r\n\t\t\t\tbody: newPost.text,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\r\n\t\tif (ok) {\r\n\t\t\tgetPosts()\r\n\t\t\tsetNewPost({ text: \"\", isLoading: false })\r\n\t\t\tsetIsCommentFieldOpen(false)\r\n\t\t}\r\n\t\tsetNewPost(prev => ({ ...prev, isLoading: false }))\r\n\t}\r\n\r\n\tconst handleEditSubmit = async () => {\r\n\t\tsetEditedPost(prev => ({ ...prev, isLoading: true }))\r\n\t\tconst { ok } = await client(`/discussions/threads/${thread.thread_id}/posts/${post.post_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: {\r\n\t\t\t\tbody: editedPost.text,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tawait getPosts()\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t\tsetEditedPost({ text: post.body, isLoading: false })\r\n\t}\r\n\tconst handleEditCancel = () => {\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetEditedPost({ isLoading: false, text: post.body })\r\n\t}\r\n\tconst handleLike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\r\n\t\tconst { ok } = await client(\r\n\t\t\t`/discussions/threads/${thread.thread_id}/posts/${post.post_id}/like/`,\r\n\t\t\t{\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tshouldShowMessage: \"error\",\r\n\t\t\t}\r\n\t\t)\r\n\t\tif (ok) {\r\n\t\t\tawait getPosts()\r\n\t\t}\r\n\t\tsetIsLikePending(false)\r\n\t}\r\n\r\n\tconst handleUnlike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\t\tconst { ok } = await client(\r\n\t\t\t`/discussions/threads/${thread.thread_id}/posts/${post.post_id}/like`,\r\n\t\t\t{\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\tshouldShowMessage: \"error\",\r\n\t\t\t}\r\n\t\t)\r\n\t\tif (ok) {\r\n\t\t\tawait getPosts()\r\n\t\t}\r\n\t\tsetIsLikePending(false)\r\n\t}\r\n\treturn (\r\n\t\t<PostEl key={post.post_id} depth={depth}>\r\n\t\t\t{/* Top bar */}\r\n\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\tusername={post.username}\r\n\t\t\t\t\t\tdate={post.created_at}\r\n\t\t\t\t\t\tavatar_url={post.avatar_url}\r\n\t\t\t\t\t\tisEdited={post.is_edited}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{!post.is_deleted && (\r\n\t\t\t\t\t\t<Like\r\n\t\t\t\t\t\t\tcount={post.like_count}\r\n\t\t\t\t\t\t\tisLiked={post.is_liked}\r\n\t\t\t\t\t\t\tisPending={isLikePending}\r\n\t\t\t\t\t\t\tonClick={post.is_liked ? handleUnlike : handleLike}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isEditOpen && !post.is_deleted ? (\r\n\t\t\t\t\t\t<div className=\"edit-actions\">\r\n\t\t\t\t\t\t\t<div className=\"left\">\r\n\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditCancel}\r\n\t\t\t\t\t\t\t\t\tdisabled={editedPost.isLoading}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleEditSubmit}\r\n\t\t\t\t\t\t\t\t\tdisabled={editedPost.isLoading}\r\n\t\t\t\t\t\t\t\t\tcustomStyle={`padding: 2px 5px;`}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\tonClick={() => showModal(\"DELETE_POST\", { post, getPosts })}\r\n\t\t\t\t\t\t\t\tdisabled={editedPost.isLoading}>\r\n\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tuser.username === post.username &&\r\n\t\t\t\t\t\t!post.is_deleted &&\r\n\t\t\t\t\t\t!isCommentFieldOpen && (\r\n\t\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(true)}>Edit</SecondaryBtn>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* Edit */}\r\n\t\t\t\t{isEditOpen && !post.is_deleted ? (\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tclassName=\"edit\"\r\n\t\t\t\t\t\tvalue={editedPost.text}\r\n\t\t\t\t\t\tonChange={e => setEditedPost(prev => ({ ...prev, text: e.target.value }))}></textarea>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p className=\"body\">{post.body}</p>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* Reply */}\r\n\t\t\t\t{isCommentFieldOpen ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tclassName=\"reply\"\r\n\t\t\t\t\t\t\tonChange={e => setNewPost({ text: e.target.value, isLoading: false })}\r\n\t\t\t\t\t\t\tvalue={newPost.text}\r\n\t\t\t\t\t\t\tplaceholder=\"Add your comment\"></textarea>\r\n\t\t\t\t\t\t<div className=\"send-actions\">\r\n\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tdisabled={newPost.isLoading}\r\n\t\t\t\t\t\t\t\tonClick={() => setIsCommentFieldOpen(false)}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tdisabled={newPost.isLoading}\r\n\t\t\t\t\t\t\t\tonClick={() => handlePostSubmit()}\r\n\t\t\t\t\t\t\t\tcustomStyle={`padding: 2px 5px;`}>\r\n\t\t\t\t\t\t\t\tSend\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t!isEditOpen &&\r\n\t\t\t\t\t!thread.is_deleted &&\r\n\t\t\t\t\t!post.is_deleted && (\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsCommentFieldOpen(true)}>Reply</SecondaryBtn>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t\t{/* Replies */}\r\n\t\t\t\t{post?.children?.map(post => (\r\n\t\t\t\t\t<RenderPosts\r\n\t\t\t\t\t\tpost={post}\r\n\t\t\t\t\t\tthread={thread}\r\n\t\t\t\t\t\tgetPosts={getPosts}\r\n\t\t\t\t\t\tkey={post.post_id}\r\n\t\t\t\t\t\tdepth={Number(depth) + 1}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</PostEl>\r\n\t)\r\n}\r\nexport default memo(RenderPosts)\r\nconst PostEl = styled.div<{ depth: number }>`\r\n\tmargin: 15px 0;\r\n\tpadding: ${({ depth }) => (depth === 0 ? \"15px 15px 15px 0\" : \"0px\")};\r\n\tborder-left: 3px #b6b6b6 solid;\r\n\tborder-radius: 4px;\r\n\tbackground-color: ${({ theme }) => theme.commentBg};\r\n\t@media (max-width: 640px) {\r\n\t\tborder-left: 2px #b6b6b6 solid;\r\n\t}\r\n\t.wrapper {\r\n\t\tpadding-left: 20px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tpadding-left: 10px;\r\n\t\t}\r\n\t}\r\n\t.top {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t> button {\r\n\t\t\tmargin-left: 20px;\r\n\t\t}\r\n\t}\r\n\tp.body {\r\n\t\tmargin: 15px 0;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\tfont-weight: 300;\r\n\t\t}\r\n\t}\r\n\t.edit-actions {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t.left {\r\n\t\t\tdisplay: flex;\r\n\t\t\tbutton {\r\n\t\t\t\tmargin: 0 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.send-actions {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbutton {\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\t}\r\n\ttextarea.reply,\r\n\ttextarea.edit {\r\n\t\twidth: 100%;\r\n\t\theight: 80px;\r\n\t\tfont-size: 1rem;\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 5px;\r\n\t\tmargin: 8px 0;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\ttextarea.reply {\r\n\t\t/* border: none; */\r\n\t\tborder: 1px grey solid;\r\n\t}\r\n\ttextarea.edit {\r\n\t\tborder: 1px grey solid;\r\n\t}\r\n`\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport { PrimaryBtn } from \"../styles/ButtonStyles\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\nimport RenderPosts from \"./RenderPosts\"\r\nimport { ThreadType } from \"./Thread\"\r\nexport interface Post {\r\n\tpost_id: string\r\n\tcreated_at: number\r\n\tbody: string\r\n\tparent_id: string\r\n\tusername: string\r\n\tuser_id: string\r\n\tis_edited: boolean\r\n\tis_deleted: boolean\r\n\tis_liked: boolean\r\n\tlike_count: number\r\n\tavatar_url: string\r\n\tchildren: Post[]\r\n}\r\nconst Posts: FC<{ thread: ThreadType }> = ({ thread }) => {\r\n\tconst [newPost, setNewPost] = useState({ text: \"\", isLoading: false })\r\n\tconst [posts, setPosts] = useState<Post[]>([])\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tgetPosts().then(() => setIsLoading(false))\r\n\t}, [])\r\n\tconst getPosts = async () => {\r\n\t\tconst { data } = await client(`/discussions/threads/${thread.thread_id}/posts`)\r\n\t\tsetPosts(data)\r\n\t}\r\n\r\n\tconst submitPost = async (parent_id: string | null, body: string) => {\r\n\t\tsetNewPost({ ...newPost, isLoading: true })\r\n\t\tconst { ok } = await client(`/discussions/threads/${thread.thread_id}/posts`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: {\r\n\t\t\t\tparent_id,\r\n\t\t\t\tbody,\r\n\t\t\t},\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetPosts()\r\n\t\t}\r\n\t\tsetNewPost({ text: \"\", isLoading: false })\r\n\t}\r\n\r\n\tif (isLoading) return <LoadingSpinner />\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{thread.is_deleted ? null : (\r\n\t\t\t\t<CommentForm>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\tonChange={e => setNewPost({ text: e.target.value, isLoading: false })}\r\n\t\t\t\t\t\tvalue={newPost.text}\r\n\t\t\t\t\t\tplaceholder=\"Add your post\"></textarea>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\tonClick={() => submitPost(null, newPost.text)}\r\n\t\t\t\t\t\tdisabled={newPost.isLoading}\r\n\t\t\t\t\t\tcustomStyle={`font-size: 1.2rem; padding: 5px 10px;`}>\r\n\t\t\t\t\t\tSend\r\n\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t</CommentForm>\r\n\t\t\t)}\r\n\t\t\t{posts ? (\r\n\t\t\t\tposts.map(post => (\r\n\t\t\t\t\t<RenderPosts\r\n\t\t\t\t\t\tpost={post}\r\n\t\t\t\t\t\tthread={{ thread_id: thread.thread_id, is_deleted: thread.is_deleted! }}\r\n\t\t\t\t\t\tgetPosts={getPosts}\r\n\t\t\t\t\t\tkey={post.post_id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t) : (\r\n\t\t\t\t<div>Nothing to display</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\nexport default memo(Posts)\r\n// Duplicate from Comments.jsx\r\nconst CommentForm = styled.div`\r\n\tmargin-bottom: 30px;\r\n\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1.2rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 1rem;\r\n\t\t}\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n`\r\n","import { Dispatch, FC, SetStateAction, useContext, useEffect, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/ButtonStyles\"\r\nimport UserLink from \"../UserLink\"\r\nimport Like from \"../Like\"\r\nimport { UserContext } from \"../../context/UserContext\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { AppContext } from \"../../context/AppContext\"\r\nimport LoadingSpinner from \"../LoadingSpinner\"\r\n\r\nexport type ThreadType = {\r\n\tthread_id: string\r\n\ttopic?: string\r\n\tbody?: string\r\n\tavatar_url?: string\r\n\tlike_count?: number\r\n\tcreated_at?: number\r\n\tuser_id?: string\r\n\tusername?: string\r\n\tis_deleted?: boolean\r\n\tis_liked?: boolean\r\n\tisEdited?: boolean\r\n}\r\n\r\ntype Props = {\r\n\tthread: ThreadType\r\n\tsetThread: Dispatch<SetStateAction<ThreadType>>\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\n\r\nconst Thread: FC<Props> = ({ thread, setThread, history }) => {\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [isEditLoading, setIsEditLoading] = useState(false)\r\n\tconst [isEditOpen, setIsEditOpen] = useState(false)\r\n\tconst [isLikePending, setIsLikePending] = useState(true)\r\n\tconst [editedThread, setEditedThread] = useState({\r\n\t\ttopic: \"\",\r\n\t\tbody: \"\",\r\n\t})\r\n\tconst user = useContext(UserContext).user\r\n\tconst { showModal, client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tif (!user.isLoading && !thread.topic) {\r\n\t\t\tgetThread()\r\n\t\t}\r\n\t}, [user.isLoading])\r\n\r\n\tconst getThread = async () => {\r\n\t\tconst { data } = await client(`/discussions/threads/${thread.thread_id}`)\r\n\t\tif (!data) return history.replace(\"/404\")\r\n\t\tsetIsLoading(false)\r\n\t\tsetIsLikePending(false)\r\n\t\tsetIsEditOpen(false)\r\n\t\tsetThread(data)\r\n\t\tsetEditedThread({ topic: data.topic, body: data.body })\r\n\t}\r\n\tconst handleEdit = async () => {\r\n\t\tsetIsEditLoading(true)\r\n\t\tconst { ok } = await client(`/discussions/threads/${thread.thread_id}`, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tbody: editedThread,\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tgetThread()\r\n\t\t\tsetIsEditOpen(false)\r\n\t\t}\r\n\t\tsetIsEditLoading(false)\r\n\t}\r\n\tconst handleDelete = () => {\r\n\t\tshowModal(\"DELETE_THREAD\", { thread, getThread, history })\r\n\t}\r\n\r\n\tconst handleLike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\t\tconst { ok } = await client(`/discussions/threads/like/${thread.thread_id}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetThread(prev => ({ ...prev, is_liked: true, like_count: Number(prev.like_count) + 1 }))\r\n\t\t\tsetIsLikePending(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleUnlike = async () => {\r\n\t\tsetIsLikePending(true)\r\n\t\tconst { ok } = await client(`/discussions/threads/like/${thread.thread_id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"error\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\tsetThread(prev => ({ ...prev, is_liked: false, like_count: Number(prev.like_count) - 1 }))\r\n\t\t\tsetIsLikePending(false)\r\n\t\t}\r\n\t}\r\n\tif (isLoading) return <LoadingSpinner />\r\n\tif (isEditOpen)\r\n\t\treturn (\r\n\t\t\t<ThreadCardEl>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tid=\"edit-topic\"\r\n\t\t\t\t\tvalue={editedThread.topic}\r\n\t\t\t\t\tonChange={e => setEditedThread(prev => ({ ...prev, topic: e.target.value }))}\r\n\t\t\t\t\tdisabled={isEditLoading}\r\n\t\t\t\t/>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tid=\"edit-body\"\r\n\t\t\t\t\tvalue={editedThread.body}\r\n\t\t\t\t\tonChange={e => setEditedThread(prev => ({ ...prev, body: e.target.value }))}\r\n\t\t\t\t\tdisabled={isEditLoading}></textarea>\r\n\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t<div className=\"left\">\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(false)}>Cancel</SecondaryBtn>\r\n\t\t\t\t\t\t<PrimaryBtn onClick={handleEdit} disabled={isEditLoading}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<SecondaryBtn color=\"red\" onClick={handleDelete}>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t</div>\r\n\t\t\t</ThreadCardEl>\r\n\t\t)\r\n\treturn (\r\n\t\t<ThreadCardEl>\r\n\t\t\t<h1>{thread.topic}</h1>\r\n\t\t\t<p className=\"body\">{thread.body}</p>\r\n\r\n\t\t\t<div className=\"actions\">\r\n\t\t\t\t<UserLink\r\n\t\t\t\t\tavatar_url={thread.avatar_url!}\r\n\t\t\t\t\tusername={thread.username!}\r\n\t\t\t\t\tdate={thread.created_at!}\r\n\t\t\t\t\tisEdited={thread.isEdited!}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"like-edit\">\r\n\t\t\t\t\t<Like\r\n\t\t\t\t\t\tcount={thread.like_count!}\r\n\t\t\t\t\t\tisLiked={thread.is_liked!}\r\n\t\t\t\t\t\tisPending={isLikePending}\r\n\t\t\t\t\t\tonClick={thread.is_liked ? handleUnlike : handleLike}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{thread.user_id === user.id && !thread.is_deleted ? (\r\n\t\t\t\t\t\t<SecondaryBtn onClick={() => setIsEditOpen(true)}>Edit</SecondaryBtn>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ThreadCardEl>\r\n\t)\r\n}\r\nexport default Thread\r\nconst ThreadCardEl = styled.div`\r\n\tmargin-bottom: 50px;\r\n\t@media (max-width: 640px) {\r\n\t\tmargin-bottom: 30px;\r\n\t}\r\n\th1 {\r\n\t\tfont-size: 2.2rem;\r\n\t\t@media (max-width: 768px) {\r\n\t\t\tfont-size: 1.7rem;\r\n\t\t}\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 1.4rem;\r\n\t\t}\r\n\t}\r\n\tp.body {\r\n\t\twhite-space: pre-line;\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin: 10px 0;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\t.like-edit {\r\n\t\t\tdisplay: flex;\r\n\t\t\t> * {\r\n\t\t\t\tmargin-right: 15px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// edit\r\n\tinput#edit-topic {\r\n\t\tfont-size: 1.1rem;\r\n\t\tmargin-bottom: 15px;\r\n\t\tpadding: 5px 8px;\r\n\t\twidth: 100%;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t}\r\n\t}\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 1rem;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: none;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t\t@media (max-width: 640px) {\r\n\t\t\tfont-size: 0.85rem;\r\n\t\t}\r\n\t}\r\n\r\n\t.buttons {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t.left {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\t> button {\r\n\t\t\t\tmargin-right: 15px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { FC, memo, useState } from \"react\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport styled from \"styled-components\"\r\nimport Posts from \"../components/Discussions/Posts\"\r\nimport Thread, { ThreadType } from \"../components/Discussions/Thread\"\r\ntype Props = {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tthread_id: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\nconst DiscussionPage: FC<Props> = ({ match, history }) => {\r\n\tconst [thread, setThread] = useState<ThreadType>({\r\n\t\tthread_id: match.params.thread_id,\r\n\t})\r\n\treturn (\r\n\t\t<PageEl>\r\n\t\t\t<>\r\n\t\t\t\t<Thread thread={thread} setThread={setThread} history={history} />\r\n\t\t\t\t<Posts thread={thread} />\r\n\t\t\t</>\r\n\t\t</PageEl>\r\n\t)\r\n}\r\nexport default DiscussionPage\r\nconst PageEl = styled.div`\r\n\twidth: 100%;\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: 30px auto;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 0 20px;\r\n\t}\r\n`\r\n","import { H1 } from \"../components/styles/Styles\"\r\n\r\nexport default function NotFound() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<H1>Oops! Not found...</H1>\r\n\t\t\t<p>The page you requested cannot be found.</p>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { FC, memo, useContext, useEffect, useState } from \"react\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { UserContext } from \"../context/UserContext\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\nimport { format } from \"date-fns\"\r\nimport useWindowSize from \"../utlis/useWindowSize\"\r\n\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tusername: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\ninterface Member {\r\n\tprofile: {\r\n\t\tusername: string\r\n\t\tuser_id: string\r\n\t\tavatar_url: string\r\n\t\tabout: string\r\n\t\tcreated_at: number\r\n\t}\r\n\tfavorite_anime: {\r\n\t\tanime_id: number\r\n\t\tcover_image: string\r\n\t\ttitle: string\r\n\t}[]\r\n\tfavorite_characters: {\r\n\t\tcharacter_id: number\r\n\t\tcover_image: string\r\n\t\tname: string\r\n\t}[]\r\n\tfollowers: {\r\n\t\tusername: string\r\n\t\tavatar_url: string\r\n\t}[]\r\n\tfollowings: {\r\n\t\tusername: string\r\n\t\tavatar_url: string\r\n\t}[]\r\n\tthreads: {\r\n\t\ttopic: string\r\n\t\tthread_id: string\r\n\t}[]\r\n}\r\nconst MemberPage: FC<Props> = ({ match, history }) => {\r\n\tconst user = useContext(UserContext).user\r\n\tconst [member, setMember] = useState<Member | null>(null)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [following, setFollowing] = useState({ isLoading: true, isFollowing: false })\r\n\tconst [width] = useWindowSize()\r\n\r\n\tconst { client } = useContext(AppContext)\r\n\tuseEffect(() => {\r\n\t\tif (user.isLoggedIn && user.username === match.params.username) {\r\n\t\t\thistory.replace(\"/me/profile\")\r\n\t\t}\r\n\t}, [user.isLoggedIn, match.params.username])\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\t\tlet isMounted = true\r\n\t\tconst getMember = async () => {\r\n\t\t\tconst { data, status } = await client(`/members/${match.params.username}`)\r\n\t\t\tif (data && isMounted) {\r\n\t\t\t\tconsole.log(data)\r\n\r\n\t\t\t\tsetMember(data)\r\n\t\t\t\tsetFollowing({ isLoading: false, isFollowing: data.is_following })\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t}\r\n\t\t\tif (status === 404) {\r\n\t\t\t\thistory.replace(\"/404\")\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetMember()\r\n\t\treturn () => {\r\n\t\t\tisMounted = false\r\n\t\t}\r\n\t}, [match.params.username])\r\n\tconst handleFollow = async () => {\r\n\t\tsetFollowing(prev => ({ isFollowing: prev.isFollowing, isLoading: true }))\r\n\r\n\t\tconst { ok } = await client(`/members/follow/${match.params.username}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetFollowing(prev => ({ isFollowing: ok ? true : prev.isFollowing, isLoading: false }))\r\n\t}\r\n\tconst handleUnfollow = async () => {\r\n\t\tsetFollowing(prev => ({ isFollowing: prev.isFollowing, isLoading: true }))\r\n\r\n\t\tconst { ok } = await client(`/members/follow/${match.params.username}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetFollowing(prev => ({ isFollowing: ok ? false : prev.isFollowing, isLoading: false }))\r\n\t}\r\n\tif (isLoading) return <LoadingSpinner />\r\n\tif (width < 640) {\r\n\t\treturn (\r\n\t\t\t<MemberPageStyle>\r\n\t\t\t\t<MobileStyle>\r\n\t\t\t\t\t<div className=\"user-info-top\">\r\n\t\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t\t<img src={member?.profile.avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"username-date\">\r\n\t\t\t\t\t\t\t<H1>{member?.profile.username}</H1>\r\n\t\t\t\t\t\t\t<p className=\"member\">Member since {format(new Date(user.created_at!), \"MMMM y\")}</p>\r\n\t\t\t\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\t\t\t\tcolor={following.isFollowing ? \"red\" : \"green\"}\r\n\t\t\t\t\t\t\t\tonClick={following.isFollowing ? handleUnfollow : handleFollow}\r\n\t\t\t\t\t\t\t\tisLoading={following.isLoading}\r\n\t\t\t\t\t\t\t\tdisabled={following.isLoading}>\r\n\t\t\t\t\t\t\t\t{following.isFollowing ? \"Unfollow\" : \"Follow\"}\r\n\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"about\">\r\n\t\t\t\t\t\t<H2>About</H2>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{member?.profile.about ||\r\n\t\t\t\t\t\t\t\t\"Apparently, this user prefers to keep an air of mystery about them.\"}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"social\">\r\n\t\t\t\t\t\t<div className=\"followers\">\r\n\t\t\t\t\t\t\t<H2>Follwers</H2>\r\n\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t{member?.followers.map(follower => (\r\n\t\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\t\tkey={follower.username}\r\n\t\t\t\t\t\t\t\t\t\tusername={follower.username}\r\n\t\t\t\t\t\t\t\t\t\tavatar_url={follower.avatar_url}\r\n\t\t\t\t\t\t\t\t\t\tisMobile={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"following\">\r\n\t\t\t\t\t\t\t<H2>Following</H2>\r\n\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t{member?.followings.map(following => (\r\n\t\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\t\tkey={following.username}\r\n\t\t\t\t\t\t\t\t\t\tusername={following.username}\r\n\t\t\t\t\t\t\t\t\t\tavatar_url={following.avatar_url}\r\n\t\t\t\t\t\t\t\t\t\tisMobile={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"favorites\">\r\n\t\t\t\t\t\t<H2>Favorites</H2>\r\n\t\t\t\t\t\t<h3>Anime</h3>\r\n\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t{member?.favorite_anime?.map(anime => (\r\n\t\t\t\t\t\t\t\t<Card key={anime.anime_id}>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/anime/${anime.anime_id}`}>\r\n\t\t\t\t\t\t\t\t\t\t<img src={anime.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t<p>{anime.title}</p>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{member?.favorite_characters.length ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h3>Characters</h3>\r\n\t\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t\t{member?.favorite_characters?.map(character => (\r\n\t\t\t\t\t\t\t\t\t\t<Card key={character.character_id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/characters/${character.character_id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={character.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{character.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{member?.threads.length && (\r\n\t\t\t\t\t\t<div className=\"threads\">\r\n\t\t\t\t\t\t\t<H2>Threads</H2>\r\n\t\t\t\t\t\t\t{member?.threads.map(thread => (\r\n\t\t\t\t\t\t\t\t<Link key={thread.thread_id} to={`/discussions/threads/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t\t\t{thread.topic}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</MobileStyle>\r\n\t\t\t</MemberPageStyle>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<MemberPageStyle>\r\n\t\t\t<Aside>\r\n\t\t\t\t<div className=\"avatar-container\">\r\n\t\t\t\t\t<img src={member?.profile?.avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<PrimaryBtn\r\n\t\t\t\t\tcolor={following.isFollowing ? \"red\" : \"green\"}\r\n\t\t\t\t\tonClick={following.isFollowing ? handleUnfollow : handleFollow}\r\n\t\t\t\t\tisLoading={following.isLoading}\r\n\t\t\t\t\tdisabled={following.isLoading}>\r\n\t\t\t\t\t{following.isFollowing ? \"Unfollow\" : \"Follow\"}\r\n\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t<div className=\"social\">\r\n\t\t\t\t\t<div className=\"followers\">\r\n\t\t\t\t\t\t<H2>Follwers</H2>\r\n\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t{member?.followers.map(follower => (\r\n\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\tkey={follower.username}\r\n\t\t\t\t\t\t\t\t\tusername={follower.username}\r\n\t\t\t\t\t\t\t\t\tavatar_url={follower.avatar_url}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"following\">\r\n\t\t\t\t\t\t<H2>Following</H2>\r\n\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t{member?.followings.map(following => (\r\n\t\t\t\t\t\t\t\t<UserLink\r\n\t\t\t\t\t\t\t\t\tkey={following.username}\r\n\t\t\t\t\t\t\t\t\tusername={following.username}\r\n\t\t\t\t\t\t\t\t\tavatar_url={following.avatar_url}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Aside>\r\n\t\t\t<MainSection>\r\n\t\t\t\t<div className=\"top\">\r\n\t\t\t\t\t<H1>{member?.profile.username}'s Profile</H1>\r\n\t\t\t\t\t<p className=\"member\">Member since {format(new Date(user.created_at!), \"MMMM y\")}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"about\">\r\n\t\t\t\t\t<H2>About</H2>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{member?.profile.about ||\r\n\t\t\t\t\t\t\t\"Apparently, this user prefers to keep an air of mystery about them.\"}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"favorites\">\r\n\t\t\t\t\t<H2>Favorites</H2>\r\n\t\t\t\t\t<h3>Anime</h3>\r\n\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t{member?.favorite_anime?.map(anime => (\r\n\t\t\t\t\t\t\t<Card key={anime.anime_id}>\r\n\t\t\t\t\t\t\t\t<Link to={`/anime/${anime.anime_id}`}>\r\n\t\t\t\t\t\t\t\t\t<img src={anime.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t<p>{anime.title}</p>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{member?.favorite_characters.length ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<h3>Characters</h3>\r\n\t\t\t\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t\t\t\t{member?.favorite_characters?.map(character => (\r\n\t\t\t\t\t\t\t\t\t<Card key={character.character_id}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/character/${character.character_id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={character.cover_image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<p>{character.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{member?.threads.length ? (\r\n\t\t\t\t\t<div className=\"threads\">\r\n\t\t\t\t\t\t<H2>Threads</H2>\r\n\t\t\t\t\t\t{member?.threads.map(thread => (\r\n\t\t\t\t\t\t\t<Link key={thread.thread_id} to={`/discussions/threads/${thread.thread_id}`}>\r\n\t\t\t\t\t\t\t\t{thread.topic}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</MainSection>\r\n\t\t</MemberPageStyle>\r\n\t)\r\n}\r\n\r\nexport default memo(MemberPage)\r\nconst UserLink: FC<{ username: string; avatar_url: string; isMobile?: boolean }> = ({\r\n\tusername,\r\n\tavatar_url,\r\n\tisMobile = false,\r\n}) => {\r\n\treturn (\r\n\t\t<UserLinkStyle isMobile={isMobile}>\r\n\t\t\t<Link key={username} className=\"user-card\" to={`/user/${username}`}>\r\n\t\t\t\t<img src={avatar_url || \"/assets/images/avatar.png\"} alt=\"\" />\r\n\t\t\t\t<span>{username}</span>\r\n\t\t\t</Link>\r\n\t\t</UserLinkStyle>\r\n\t)\r\n}\r\nconst UserLinkStyle = styled.div<{ isMobile: boolean }>`\r\n\tmargin-right: ${({ isMobile }) => (isMobile ? \"15px\" : \"10px\")};\r\n\twidth: 50px;\r\n\t@media (max-width: 768px) {\r\n\t\twidth: ${({ isMobile }) => (isMobile ? \"60px\" : \"40px\")};\r\n\t}\r\n\ta {\r\n\t\tspan {\r\n\t\t\tdisplay: block;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\tword-wrap: break-word;\r\n\t\t\tfont-size: 0.9rem;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 0.75rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 50px;\r\n\t\t\theight: 50px;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tobject-position: center;\r\n\t\t\tborder-radius: 7px;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\twidth: ${({ isMobile }) => (isMobile ? \"60px\" : \"40px\")};\r\n\t\t\t\theight: ${({ isMobile }) => (isMobile ? \"60px\" : \"40px\")};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nconst MemberPageStyle = styled.section`\r\n\tmax-width: 1200px;\r\n\tpadding: 50px;\r\n\tmargin: auto;\r\n\tdisplay: flex;\r\n\t@media (max-width: 768px) {\r\n\t\tpadding: 20px;\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\tdisplay: block;\r\n\t}\r\n`\r\nconst MainSection = styled.div`\r\n\twidth: 100%;\r\n\t.about {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\th2 {\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\th3 {\r\n\t\tmargin: 10px 0;\r\n\t}\r\n\t.list {\r\n\t\twidth: 100%;\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(auto-fill, 80px);\r\n\t\tcolumn-gap: 20px;\r\n\t\trow-gap: 20px;\r\n\t}\r\n\t.threads {\r\n\t\ta {\r\n\t\t\tfont-size: 1.2rem;\r\n\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t}\r\n\t}\r\n`\r\nconst Aside = styled.aside`\r\n\tmargin-right: 100px;\r\n\t@media (max-width: 1024px) {\r\n\t\tmargin-right: 50px;\r\n\t}\r\n\t.avatar-container {\r\n\t\twidth: 250px;\r\n\t\theight: 250px;\r\n\t\tmargin-bottom: 20px;\r\n\t\t@media (max-width: 1024px) {\r\n\t\t\twidth: 180px;\r\n\t\t\theight: 180px;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tobject-fit: cover;\r\n\t\t\tborder-radius: 10px;\r\n\t\t}\r\n\t}\r\n\t.followers,\r\n\t.following {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\t.list {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\twidth: 250px;\r\n\t\t@media (max-width: 1024px) {\r\n\t\t\twidth: 180px;\r\n\t\t}\r\n\t}\r\n`\r\n\r\nconst Card = styled.div`\r\n\twidth: 80px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\timg {\r\n\t\twidth: 100%;\r\n\t\theight: 120px;\r\n\t\taspect-ratio: 2/3;\r\n\t\tobject-fit: cover;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\tp {\r\n\t\tfont-size: 0.85rem;\r\n\t\theight: 30px;\r\n\t\tmargin-bottom: 5px;\r\n\t\tword-wrap: break-word;\r\n\t}\r\n`\r\nconst MobileStyle = styled.div`\r\n\t.user-info-top {\r\n\t\tdisplay: flex;\r\n\t\t.avatar {\r\n\t\t\twidth: 120px;\r\n\t\t\timg {\r\n\t\t\t\twidth: 120px;\r\n\t\t\t\theight: 120px;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t\tborder-radius: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.username-date {\r\n\t\t\theight: 120px;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tmargin-left: 30px;\r\n\t\t\tp.member {\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\tbutton {\r\n\t\t\t\tmargin-top: auto;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\th2 {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\t.social {\r\n\t\t.list {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t}\r\n\t}\r\n\t.favorites {\r\n\t\t.list {\r\n\t\t\tdisplay: flex;\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t\tmargin: 10px 0;\r\n\t\t\t> * {\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t\tmargin-right: 20px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.threads a {\r\n\t\tfont-size: 1rem;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n`\r\n","// const searchQuery = async (variables: { query: string, page: number }) => {\r\nconst searchQuery = async (variables: any) => {\r\n\tconst query = `\r\n\t\tquery ($id: Int, $page: Int, $perPage: Int, $search: String, \r\n\t\t\t$genre: String, $isAdult: Boolean, $year: Int, $format: MediaFormat, $sort: [MediaSort]) \r\n\t\t{\r\n      Page (page: $page, perPage: $perPage) {\r\n        pageInfo {\r\n          total\r\n          currentPage\r\n          lastPage\r\n          hasNextPage\r\n          perPage\r\n        }\r\n\t\t\t\tmedia (id: $id, search: $search, genre: $genre, isAdult: $isAdult, \r\n\t\t\t\t\ttype: ANIME, seasonYear: $year, format: $format, sort: $sort) \r\n\t\t\t\t{\r\n          id\r\n\t\t\t\t\ttitle {\r\n\t\t\t\t\t\tromaji\r\n\t\t\t\t\t\tenglish\r\n\t\t\t\t\t\tnative\r\n\t\t\t\t\t\tuserPreferred\r\n\t\t\t\t\t} \r\n          coverImage {\r\n\t\t\t\t\t\tmedium\r\n\t\t\t\t\t\tlarge\r\n\t\t\t\t\t\textraLarge\r\n\t\t\t\t\t\tcolor\r\n          }\r\n        }\r\n      }\r\n    }\r\n    `\r\n\tconst url = \"https://graphql.anilist.co\",\r\n\t\toptions = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tquery: query,\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\t...variables,\r\n\t\t\t\t\tsearch: variables.query,\r\n\t\t\t\t\tsort: variables.query ? [\"SEARCH_MATCH\"] : [\"POPULARITY_DESC\"],\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t}\r\n\ttry {\r\n\t\tconst res = await fetch(url, options)\r\n\t\tconst json = await res.json()\r\n\t\treturn json.data.Page\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n}\r\nexport default searchQuery\r\n","import styled from \"styled-components\"\r\nimport { H2 } from \"../styles/Styles\"\r\n\r\nconst EmptyEl = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\timg {\r\n\t\tmax-width: 200px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n`\r\nconst EmptyState = () => {\r\n\treturn (\r\n\t\t<EmptyEl>\r\n\t\t\t<img src=\"/assets/images/no_results.png\" alt=\"\" />\r\n\t\t\t<H2>No results found</H2>\r\n\t\t</EmptyEl>\r\n\t)\r\n}\r\n\r\nexport default EmptyState\r\n","import styled from \"styled-components\"\r\nimport { FC, useState } from \"react\"\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\"\r\nimport { Link } from \"react-router-dom\"\r\nexport type CardType = {\r\n\tid: string\r\n\ttitle: {\r\n\t\tenglish: string\r\n\t\tromaji: string\r\n\t}\r\n\tcoverImage: {\r\n\t\tlarge: string\r\n\t\tcolor: string\r\n\t}\r\n}\r\n\r\nexport const Card: FC<{ item: CardType }> = ({ item }) => {\r\n\tconst [loaded, setLoaded] = useState(false)\r\n\tconst title = item.title.english ? item.title.english : item.title.romaji\r\n\tconst image = item.coverImage.large\r\n\tconst bgColor = item.coverImage.color\r\n\r\n\treturn (\r\n\t\t<CardBox bgColor={bgColor}>\r\n\t\t\t<Link to={`/anime/${item.id}`}>\r\n\t\t\t\t<img\r\n\t\t\t\t\t// style={loaded ? {} : { display: \"none\" }}\r\n\t\t\t\t\tsrc={image}\r\n\t\t\t\t\talt={title}\r\n\t\t\t\t\tonLoad={() => setLoaded(true)}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* {loaded ? null : <div className=\"mask\"></div>} */}\r\n\t\t\t\t<p>{title}</p>\r\n\t\t\t</Link>\r\n\t\t</CardBox>\r\n\t)\r\n}\r\n\r\nexport const SkeletonCard: FC<{ item: number }> = ({ item }) => {\r\n\treturn (\r\n\t\t<CardBox key={item}>\r\n\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" baseColor=\"#cad4de\">\r\n\t\t\t\t<Skeleton key={item} className=\"mask\" />\r\n\t\t\t</SkeletonTheme>\r\n\t\t\t<br />\r\n\t\t\t<SkeletonTheme highlightColor=\"#a7dac7\" baseColor=\"#cad4de\">\r\n\t\t\t\t<Skeleton width=\"120px\" height=\"15px\" key={item} />\r\n\t\t\t</SkeletonTheme>\r\n\t\t</CardBox>\r\n\t)\r\n}\r\n\r\nconst CardBox = styled.div<{ bgColor?: string }>`\r\n\twidth: 100%;\r\n\r\n\ta {\r\n\t\tdisplay: block;\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n\timg,\r\n\t.mask {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\t/* height: 255px; */\r\n\t\tobject-fit: cover;\r\n\t\taspect-ratio: auto 2 / 3;\r\n\t\tborder-radius: 8px;\r\n\t\tbackground: ${({ bgColor }) => bgColor};\r\n\t}\r\n\t/* @media (max-width: 1100px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 950px) {\r\n\t\twidth: 180px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 255px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 900px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 720px) {\r\n\t\twidth: 130px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 180px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 560px) {\r\n\t\twidth: 200px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 280px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media (max-width: 480px) {\r\n\t\twidth: 180px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 255px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 420px) {\r\n\t\twidth: 150px;\r\n\t\timg,\r\n\t\t.mask {\r\n\t\t\theight: 210px;\r\n\t\t}\r\n\t} */\r\n`\r\n","import { useState, useEffect, memo, FC } from \"react\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport searchAPI from \"../api/anime/searchAPI\"\r\nimport SearchSection from \"../components/Search/SearchSection\"\r\nimport InfiniteScroll from \"react-infinite-scroll-component\"\r\nimport EmptyState from \"../components/Search/EmptyState\"\r\nimport { Card, CardType, SkeletonCard } from \"../components/Search/Card\"\r\nimport getUrlObj from \"../utlis/getUrlObj\"\r\nconst array = new Array(18)\r\n\r\nconst SearchPage: FC = () => {\r\n\tconst [result, setResult] = useState<CardType[]>([])\r\n\tconst [hasNoResult, setHasNoResult] = useState(false)\r\n\tconst [page, setPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [hasNextPage, sethasNextPage] = useState(true)\r\n\tconst location = useLocation()\r\n\r\n\tconst getData = async () => {\r\n\t\tsetLoading(true)\r\n\t\tconst urlParams = new URLSearchParams(location.search)\r\n\t\tconst entries = urlParams.entries()\r\n\t\tconst newParams = Object.fromEntries(entries)\r\n\t\tconst data = await searchAPI({ ...newParams, page })\r\n\t\tif (!data.media.length) return setHasNoResult(true)\r\n\t\tsetHasNoResult(false)\r\n\t\tsethasNextPage(data.pageInfo.hasNextPage)\r\n\t\tsetResult(prevResult => [...prevResult, ...data.media])\r\n\t\tsetLoading(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tconst { genre, query, format, season, year } = getUrlObj(location.search)\r\n\t\tif (genre || query || format || season || year) {\r\n\t\t\tsetHasNoResult(false)\r\n\t\t\tsetPage(1)\r\n\t\t\tsetResult([])\r\n\t\t\tgetData()\r\n\t\t} else {\r\n\t\t\tsetHasNoResult(true)\r\n\t\t}\r\n\t}, [location])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (page > 1) {\r\n\t\t\tgetData()\r\n\t\t}\r\n\t}, [page])\r\n\r\n\tconst SearchResults = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{loading && !result.length\r\n\t\t\t\t\t? array.map(num => <SkeletonCard item={num} key={num} />)\r\n\t\t\t\t\t: result.map(item => <Card item={item} key={item.id} />)}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<SearchPageStyle>\r\n\t\t\t<SearchSection />\r\n\t\t\t{!hasNoResult ? (\r\n\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\tclassName=\"grid\"\r\n\t\t\t\t\tdataLength={result.length}\r\n\t\t\t\t\tnext={() => setPage(prev => prev + 1)}\r\n\t\t\t\t\tpullDownToRefreshThreshold={50}\r\n\t\t\t\t\thasMore={hasNextPage}\r\n\t\t\t\t\tloader={[1, 2, 3, 4, 5, 6].map(num => (\r\n\t\t\t\t\t\t<SkeletonCard item={num} key={num} />\r\n\t\t\t\t\t))}>\r\n\t\t\t\t\t<SearchResults />\r\n\t\t\t\t</InfiniteScroll>\r\n\t\t\t) : (\r\n\t\t\t\t<EmptyState />\r\n\t\t\t)}\r\n\t\t</SearchPageStyle>\r\n\t)\r\n}\r\nexport default SearchPage\r\nconst SearchPageStyle = styled.div`\r\n\t.grid {\r\n\t\tmargin: 0 auto;\r\n\t\tmax-width: 1200px;\r\n\t\tpadding: 0 50px;\r\n\t\tdisplay: grid;\r\n\t\t/* grid-template-columns: repeat(auto-fit, minmax(100px, 180px)); */\r\n\t\tgrid-template-columns: repeat(5, 1fr);\r\n\t\t/* grid-template-columns: masonry; */\r\n\t\tcolumn-gap: 30px;\r\n\t\trow-gap: 30px;\r\n\t}\r\n\t@media (max-width: 950px) {\r\n\t\t.grid {\r\n\t\t\tgrid-template-columns: repeat(4, auto);\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 768px) {\r\n\t\t.grid {\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 640px) {\r\n\t\t.grid {\r\n\t\t\tgrid-template-columns: repeat(3, auto);\r\n\t\t}\r\n\t}\r\n\t@media (max-width: 560px) {\r\n\t\t.grid {\r\n\t\t\tgrid-template-columns: repeat(2, auto);\r\n\t\t}\r\n\t}\r\n`\r\n","import { useContext } from \"react\"\r\nimport { useState } from \"react\"\r\nimport { useEffect } from \"react\"\r\nimport { FC } from \"react\"\r\nimport { RouteChildrenProps } from \"react-router-dom\"\r\nimport { ClipLoader } from \"react-spinners\"\r\nimport styled from \"styled-components\"\r\nimport LoadingSpinner from \"../components/LoadingSpinner\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { H1, H2 } from \"../components/styles/Styles\"\r\nimport { AppContext } from \"../context/AppContext\"\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\ttoken: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteChildrenProps[\"history\"]\r\n}\r\nconst EmailVerificationPage: FC<Props> = ({ match, history }) => {\r\n\tconst { client } = useContext(AppContext)\r\n\tconst [isLoading, setIsLoading] = useState(true)\r\n\tconst [hasVerified, setHasVerified] = useState(false)\r\n\tconst verifyEmail = async () => {\r\n\t\tconst { ok } = await client(`/auth/verify/${match.params.token}`, {\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tsetIsLoading(false)\r\n\t\tsetHasVerified(ok)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tverifyEmail()\r\n\t}, [])\r\n\treturn (\r\n\t\t<PageStyled>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<H1>Verify email</H1>\r\n\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t<LoadingSpinner size={70} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{hasVerified ? (\r\n\t\t\t\t\t\t\t<div className=\"success\">\r\n\t\t\t\t\t\t\t\t<img src=\"/assets/icons/email.svg\" alt=\"\" />\r\n\t\t\t\t\t\t\t\t<h2>Success! Your email has been verified!</h2>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn onClick={() => history.push(\"/login\")}>Login</PrimaryBtn>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\t\t\t\t<img src=\"/assets/icons/cancel.svg\" alt=\"\" />\r\n\t\t\t\t\t\t\t\t<h2>Oops! Someting went wrong</h2>\r\n\t\t\t\t\t\t\t\t<p>Seems like the link has expired or your account has already been verified.</p>\r\n\t\t\t\t\t\t\t\t<PrimaryBtn onClick={() => history.push(\"/resend-verification\")}>\r\n\t\t\t\t\t\t\t\t\tResend link\r\n\t\t\t\t\t\t\t\t</PrimaryBtn>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</PageStyled>\r\n\t)\r\n}\r\nconst PageStyled = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 480px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 6px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\t@media (max-width: 480px) {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 100px;\r\n\t\t\theight: auto;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\twidth: 70px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.success,\r\n\t\t.error {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\th2 {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin-bottom: 30px;\r\n\t\t\t}\r\n\t\t\tp {\r\n\t\t\t\tmargin-bottom: 30px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n\r\nexport default EmailVerificationPage\r\n","import { FC, FormEvent, useContext, useState } from \"react\"\r\nimport { RouteChildrenProps } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn, SecondaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { H1 } from \"../components/styles/Styles\"\r\nimport { AppContext } from \"../context/AppContext\"\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\ttoken: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteChildrenProps[\"history\"]\r\n}\r\nconst ResendVerificationPage: FC<Props> = ({ match, history }) => {\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [status, setStatus] = useState({ hasSent: false, isSuccess: false })\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst { client } = useContext(AppContext)\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsLoading(true)\r\n\t\tconst { data, message, ok } = await client(\"/auth/resend-verification-link\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { email },\r\n\t\t\tshouldShowMessage: \"none\",\r\n\t\t})\r\n\t\tmessage && setMessage(message)\r\n\t\tsetIsLoading(false)\r\n\t\tsetStatus({ hasSent: true, isSuccess: ok })\r\n\t}\r\n\treturn (\r\n\t\t<PageStyled>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<H1>Resend link</H1>\r\n\t\t\t\t{status.hasSent ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{status.isSuccess ? (\r\n\t\t\t\t\t\t\t<div className=\"success\">\r\n\t\t\t\t\t\t\t\t<img src=\"/assets/icons/checked.svg\" alt=\"\" />\r\n\t\t\t\t\t\t\t\t<p>Email has been sent. Check your inbox.</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"error\">\r\n\t\t\t\t\t\t\t\t<img src=\"/assets/icons/cancel.svg\" alt=\"\" />\r\n\t\t\t\t\t\t\t\t<h2>Oops! Something went wrong. </h2>\r\n\t\t\t\t\t\t\t\t{message && <p>{message}</p>}\r\n\t\t\t\t\t\t\t\t<div className=\"link-container\">\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\tAlready verified?{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t<SecondaryBtn\r\n\t\t\t\t\t\t\t\t\t\t\tcustomStyle=\"font-size: 0.9rem;\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => history.replace(\"/login\")}>\r\n\t\t\t\t\t\t\t\t\t\t\tLog in\r\n\t\t\t\t\t\t\t\t\t\t</SecondaryBtn>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PrimaryBtn disabled={isLoading}>Resend link</PrimaryBtn>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</PageStyled>\r\n\t)\r\n}\r\nexport default ResendVerificationPage\r\n\r\nconst PageStyled = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 480px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 6px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\t@media (max-width: 480px) {\r\n\t\t\tpadding: 50px;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 80px;\r\n\t\t\theight: auto;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\twidth: 60px;\r\n\t\t\t}\r\n\t\t}\r\n\t\tinput {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-bottom: 50px;\r\n\t\t\theight: 35px;\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 5px 10px;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: #edf1f5;\r\n\t\t}\r\n\t\t.success,\r\n\t\t.error {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\th2 {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin-bottom: 30px;\r\n\t\t\t}\r\n\t\t\t.link-container {\r\n\t\t\t\tmargin-top: 30px;\r\n\r\n\t\t\t\tspan {\r\n\t\t\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n","import { useContext } from \"react\"\r\nimport { FormEvent, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { H1 } from \"../components/styles/Styles\"\r\nimport { AppContext } from \"../context/AppContext\"\r\n\r\nconst RequestPasswordResetPage = () => {\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [status, setStatus] = useState({ hasSent: false, isSuccess: false })\r\n\tconst { client } = useContext(AppContext)\r\n\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsLoading(true)\r\n\t\tconst { ok } = await client(\"/auth/request-password-reset\", { method: \"POST\", body: { email } })\r\n\t\tsetIsLoading(false)\r\n\r\n\t\tsetStatus({ hasSent: true, isSuccess: ok })\r\n\t}\r\n\treturn (\r\n\t\t<PageStyled>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<h1>Request password reset</h1>\r\n\t\t\t\t{status.hasSent ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{status.isSuccess ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<img src=\"/assets/icons/checked.svg\" alt=\"\" />\r\n\t\t\t\t\t\t\t\t<p>Password reset link has been sent. Check your inbox.</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<img src=\"/assets/icons/cancel.svg\" alt=\"\" />\r\n\t\t\t\t\t\t\t\t<p>Oops! Something went wrong!</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PrimaryBtn disabled={isLoading}>Send link</PrimaryBtn>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</PageStyled>\r\n\t)\r\n}\r\nconst PageStyled = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 480px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 6px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\t@media (max-width: 480px) {\r\n\t\t\tpadding: 40px 20px;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 1.7rem;\r\n\t\t\t}\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\tfont-size: 1.4rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 80px;\r\n\t\t\theight: auto;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\twidth: 60px;\r\n\t\t\t}\r\n\t\t}\r\n\t\tinput {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin-bottom: 50px;\r\n\t\t\theight: 35px;\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 5px 10px;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: #edf1f5;\r\n\t\t}\r\n\t\t.success,\r\n\t\t.error {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\th2 {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin-bottom: 30px;\r\n\t\t\t}\r\n\t\t\t.link-container {\r\n\t\t\t\tmargin-top: 30px;\r\n\r\n\t\t\t\tspan {\r\n\t\t\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n\r\nexport default RequestPasswordResetPage\r\n","import { useContext } from \"react\"\r\nimport { useState } from \"react\"\r\nimport { FC, FormEvent } from \"react\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport styled from \"styled-components\"\r\nimport { PrimaryBtn } from \"../components/styles/ButtonStyles\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport getUrlObj from \"../utlis/getUrlObj\"\r\n\r\ninterface Props {\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tid: string\r\n\t\t\ttoken: string\r\n\t\t}\r\n\t}\r\n\thistory: RouteComponentProps[\"history\"]\r\n}\r\nconst ResetPasswordPage: FC<Props> = ({ match, history }) => {\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [password2, setPassword2] = useState(\"\")\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { id, token } = getUrlObj(history.location.search)\r\n\tif (!id || !token) {\r\n\t\thistory.replace(\"/404\")\r\n\t}\r\n\tconst { client, showModalMessage } = useContext(AppContext)\r\n\tconst handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsLoading(true)\r\n\t\tif (password !== password2) {\r\n\t\t\tshowModalMessage(\"Passwords must match\", false)\r\n\t\t}\r\n\t\tconst { ok } = await client(\"/auth/reset-password\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: { new_password: password, id, token },\r\n\t\t\tshouldShowMessage: \"default\",\r\n\t\t})\r\n\t\tif (ok) {\r\n\t\t\thistory.push(\"/login\")\r\n\t\t}\r\n\t\tsetIsLoading(false)\r\n\t}\r\n\treturn (\r\n\t\t<PageStyled>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<h1>Reset password</h1>\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\tplaceholder=\"New password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tvalue={password2}\r\n\t\t\t\t\t\tonChange={e => setPassword2(e.target.value)}\r\n\t\t\t\t\t\tplaceholder=\"Confirm new password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PrimaryBtn>Reset</PrimaryBtn>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</PageStyled>\r\n\t)\r\n}\r\nconst PageStyled = styled.div`\r\n\tmax-width: 1200px;\r\n\tpadding: 0 50px;\r\n\tmargin: auto;\r\n\t@media (max-width: 480px) {\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.container {\r\n\t\tmax-width: 400px;\r\n\t\tmargin: auto;\r\n\t\tmargin-top: 50px;\r\n\t\tpadding: 50px;\r\n\t\tbackground: ${({ theme }) => theme.commentBg};\r\n\t\tborder-radius: 6px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\t@media (max-width: 480px) {\r\n\t\t\tpadding: 40px 20px;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t\tform {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 768px) {\r\n\t\t\t\tfont-size: 1.7rem;\r\n\t\t\t}\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\tfont-size: 1.4rem;\r\n\t\t\t}\r\n\t\t}\r\n\t\timg {\r\n\t\t\twidth: 80px;\r\n\t\t\theight: auto;\r\n\t\t\tmargin-bottom: 30px;\r\n\t\t\t@media (max-width: 480px) {\r\n\t\t\t\twidth: 60px;\r\n\t\t\t}\r\n\t\t}\r\n\t\tinput {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 35px;\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 5px 10px;\r\n\t\t\tborder: none;\r\n\t\t\tbackground: #edf1f5;\r\n\r\n\t\t\t&[name=\"password\"] {\r\n\t\t\t\tmargin-bottom: 20px;\r\n\t\t\t}\r\n\t\t\t&[name=\"password2\"] {\r\n\t\t\t\tmargin-bottom: 50px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.success,\r\n\t\t.error {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\th2 {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tmargin-bottom: 30px;\r\n\t\t\t}\r\n\t\t\t.link-container {\r\n\t\t\t\tmargin-top: 30px;\r\n\r\n\t\t\t\tspan {\r\n\t\t\t\t\tcolor: ${({ theme }) => theme.text};\r\n\t\t\t\t\tfont-size: 0.9rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nexport default ResetPasswordPage\r\n","import { useEffect, useState, memo, useContext } from \"react\"\r\nimport Navbar from \"./components/Navbar\"\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\nimport { createGlobalStyle, ThemeProvider } from \"styled-components\"\r\nimport Home from \"./pages/HomePage\"\r\nimport Login from \"./pages/LoginPage\"\r\nimport AnimePage from \"./pages/AnimePage\"\r\nimport Register from \"./pages/RegisterPage\"\r\nimport User from \"./pages/AccountPage\"\r\nimport { lightTheme, darkTheme, Theme } from \"./utlis/constants\"\r\nimport Footer from \"./components/Footer\"\r\nimport ModalMessage from \"./components/Modal/ModalMessage\"\r\nimport RootModal from \"./components/Modal/RootModal\"\r\nimport Character from \"./pages/CharacterPage\"\r\nimport DiscussionsListPage from \"./pages/DiscussionsListPage\"\r\nimport DiscussionPage from \"./pages/DiscussionPage\"\r\nimport NotFound from \"./pages/NotFound\"\r\nimport { UserContext } from \"./context/UserContext\"\r\nimport MemberPage from \"./pages/MemberPage\"\r\nimport SearchPage from \"./pages/SearchPage\"\r\nimport EmailVerificationPage from \"./pages/EmailVerificationPage\"\r\nimport ResendVerificationPage from \"./pages/ResendVerificationPage\"\r\nimport RequestPasswordResetPage from \"./pages/RequestResetPasswordPage\"\r\nimport ResetPasswordPage from \"./pages/ResetPasswordPage\"\r\n\r\nconst App = () => {\r\n\tconst [theme, setTheme] = useState<Theme>(lightTheme)\r\n\tconst { user, setUser } = useContext(UserContext)\r\n\tuseEffect(() => {\r\n\t\tsetUser()\r\n\r\n\t\tconst userTheme = localStorage.getItem(\"theme\")\r\n\t\tsetTheme(userTheme === \"dark\" ? darkTheme : lightTheme)\r\n\t}, [])\r\n\r\n\tconst switchTheme = (themeType: string) => {\r\n\t\tsetTheme(themeType === \"dark\" ? darkTheme : lightTheme)\r\n\t\tlocalStorage.setItem(\"theme\", themeType)\r\n\t}\r\n\treturn (\r\n\t\t<ThemeProvider theme={theme}>\r\n\t\t\t<Router>\r\n\t\t\t\t<GlobalStyle />\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t<Navbar theme={theme.theme} switchTheme={switchTheme} />\r\n\t\t\t\t\t<main>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/\" component={Home} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/anime/:id\" component={AnimePage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/character/:id\" component={Character} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/user/:username\" component={MemberPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/search\" component={SearchPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/me/:category\" component={User} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/login\" component={Login} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/register\" component={Register} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/verify-email/:token\" component={EmailVerificationPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/resend-verification\" component={ResendVerificationPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/request-password-reset\" component={RequestPasswordResetPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/reset-password\" component={ResetPasswordPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/discussions\" component={DiscussionsListPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/discussions/threads/:thread_id\" component={DiscussionPage} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/404\" component={NotFound} />\r\n\t\t\t\t\t\t\t<Route path=\"*\" component={NotFound} />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</main>\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalMessage />\r\n\t\t\t\t<RootModal />\r\n\t\t\t</Router>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n\r\nexport default memo(App)\r\nconst GlobalStyle = createGlobalStyle`\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n\t\tbox-sizing: border-box;\r\n\t\tfont-family: 'Overpass', sans-serif;\r\n\t}\r\n\tbody {\r\n\t\tbackground: ${({ theme }: any) => theme.body};\r\n\t}\r\n\r\n\tmain {\r\n  \tmin-height: calc(100vh - 10rem);\r\n\t}\r\n\r\n\ta {\r\n\t\ttext-decoration: none;\r\n\t}\r\n\th1, h2, h3, h4 {\r\n\t\tcolor: ${({ theme }) => theme.header};\r\n\t}\r\n\tp {\r\n\t\tcolor: ${({ theme }) => theme.text};\r\n\t}\r\n`\r\n","import React from \"react\"\r\nimport { render } from \"react-dom\"\r\nimport App from \"./App\"\r\nimport { AppProvider } from \"./context/AppContext\"\r\nimport { UserProvider } from \"./context/UserContext\"\r\n\r\nrender(\r\n\t<React.StrictMode>\r\n\t\t<AppProvider>\r\n\t\t\t<UserProvider>\r\n\t\t\t\t<App />\r\n\t\t\t</UserProvider>\r\n\t\t</AppProvider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}